<!doctype html><html class="dark light"><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><title>
         2020 Mar
        
    </title><meta content="2020 Mar" property=og:title><meta content="An elegant and understated" property=og:description><meta content="An elegant and understated" name=description><link href=/icon/favicon.png rel=icon type=image/png><link href=https://ashang.github.io/zz/fonts.css rel=stylesheet><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]}}</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link href=https://ashang.github.io/zz/atom.xml rel=alternate title=atbb type=application/atom+xml><link href=https://ashang.github.io/zz/theme/light.css rel=stylesheet><link href=https://ashang.github.io/zz/theme/dark.css id=darkModeStyle rel=stylesheet><link href=https://ashang.github.io/zz/main.css media=screen rel=stylesheet><body><div class=content><header><div class=main><a href=https://ashang.github.io/zz/>atbb</a><div class=socials><a class=social href=https://github.com/ashang/ rel=me> <img alt=github src=/social_icons/github.svg> </a></div></div><nav><a href=$BASE_URL/search/ style=margin-left:.7em>Search</a><a href=/notes style=margin-left:.7em>/notes</a><a href=/posts style=margin-left:.7em>/posts</a><a href=/gallery style=margin-left:.7em>/gallery</a><a href=/tags style=margin-left:.7em>/tags</a><a href=/projects style=margin-left:.7em>/projects</a> | <a href=javascript:void(0) id=dark-mode-toggle onclick=toggleTheme()> <img id=sun-icon src=/feather/sun.svg style=filter:invert(1)> <img id=moon-icon src=/feather/moon.svg> </a><script src=https://ashang.github.io/zz/js/themetoggle.js></script></nav></header><main><article><div class=title><div class=page-header>2020 Mar<span class=primary-color style=font-size:1.6em>.</span></div><div class=meta>Posted on <time>2020-03-20</time></div></div><h1>Table of Contents</h1><ul><li><a href=https://ashang.github.io/zz/posts/2020-mar/#guang-tong-xin-shi-yi-chong-li-yong-guang-lai-xi-dai-xin-xi-de-tong-xin-ji-shu-ye-cheng-wei-yuan-cheng-guang-tong-xin-you-ren-yan-guan-cha-lai-jie-shi-xin-hao-jian-dan-de-xin-hao-ru-feng-huo-fu-za-de-xin-hao-ze-ru-guang-bian-yi-de-se-ma-huo-shan-guang-mo-si-mi-ma-deng>光通信是一种利用光来携带信息的通信技术，也称为远程光通信。由人眼观察来解释信号，简单的信号如烽火、复杂的信号则如光编译的色码或闪光摩斯密码等。</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#solid-state-drive-memory-cell-clearing>Solid state drive/Memory cell clearing</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#lsblk-fs>lsblk --fs</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#></a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#inxi-admin-disk>inxi --admin --disk</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#-1></a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#hdparm-t-dev-sda>hdparm -t /dev/sda</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#-2></a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#hdparm-t-dev-sda2>hdparm -t /dev/sda2</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#-3></a> <ul><li><a href=https://ashang.github.io/zz/posts/2020-mar/#nvme-ssd>NVMe SSD</a></ul><li><a href=https://ashang.github.io/zz/posts/2020-mar/#nvme-id-ctrl-dev-nvme0-h-grep-format-crypto-erase-sanitize>nvme id-ctrl /dev/nvme0 -H | grep "Format |Crypto Erase|Sanitize"</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#nvme-format-dev-nvme0-s-2-n-1>nvme format /dev/nvme0 -s 2 -n 1</a> <ul><li><a href=https://ashang.github.io/zz/posts/2020-mar/#tun>TUN</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#tayga>TAYGA</a></ul><li><a href=https://ashang.github.io/zz/posts/2020-mar/#configure-make-make-install>./configure && make && make install</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#mkdir-p-var-db-tayga>mkdir -p /var/db/tayga</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#cat-usr-local-etc-tayga-conf-eod>cat >/usr/local/etc/tayga.conf <&LTEOD</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#tayga-mktun>tayga --mktun</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#ip-link-set-nat64-up>ip link set nat64 up</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#ip-addr-add-192-168-0-1-dev-nat64-replace-with-your-router-s-ipv4-address>ip addr add 192.168.0.1 dev nat64 (replace with your router's IPv4 address)</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#ip-addr-add-2001-db8-1-1-dev-nat64-replace-with-your-router-s-ipv6-address>ip addr add 2001:db8:1::1 dev nat64 (replace with your router's IPv6 address)</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#ip-route-add-192-168-255-0-24-dev-nat64>ip route add 192.168.255.0/24 dev nat64</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#ip-route-add-2001-db8-1-ffff-96-dev-nat64>ip route add 2001:db8:1:ffff::/96 dev nat64</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#tayga-1>tayga</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#ping6-2001-db8-1-ffff-192-168-0-1>ping6 2001:db8:1:ffff::192.168.0.1</a> <ul><li><a href=https://ashang.github.io/zz/posts/2020-mar/#briny-brackish-saline>Briny, Brackish, Saline</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#gfwlist>GFWList</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#linux-5-10-y-picos-4-4>linux-5.10.y-picos-4.4</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#-4></a></ul><li><a href=https://ashang.github.io/zz/posts/2020-mar/#root-x2>root@x2:~</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#proxychains-sudo-apt-update>proxychains sudo apt update</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#root-x2-1>root@x2:~</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#proxychains-apt-update>proxychains apt update</a> <ul><li><a href=https://ashang.github.io/zz/posts/2020-mar/#w-i-r-e-l-e-s-s-f-r-e-e-d-o-m>| |.-----.-----.-----.| | | |.----.| |_| - || _ | -| || | | || || |||| |||||||| |||| W I R E L E S S F R E E D O M</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#openwrt-19-07-7-r11306-c4a6851c72>OpenWrt 19.07.7, r11306-c4a6851c72</a></ul><li><a href=https://ashang.github.io/zz/posts/2020-mar/#solve-the-host-key-error-on-ancient-server>solve the "host key" error on ancient server</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#use-key-and-eliminate-password-prompt-on-ancient-server>use key and eliminate password prompt on ancient server</a> <ul><li><a href=https://ashang.github.io/zz/posts/2020-mar/#embed-jekyll-seo-tags-into-templates>embed jekyll seo tags into templates</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#debug>debug</a><li><a href=https://ashang.github.io/zz/posts/2020-mar/#ssl-vpn-l2tp-vpn>ssl vpn, l2tp vpn</a></ul></ul><section class=body><h2 id=guang-tong-xin-shi-yi-chong-li-yong-guang-lai-xi-dai-xin-xi-de-tong-xin-ji-shu-ye-cheng-wei-yuan-cheng-guang-tong-xin-you-ren-yan-guan-cha-lai-jie-shi-xin-hao-jian-dan-de-xin-hao-ru-feng-huo-fu-za-de-xin-hao-ze-ru-guang-bian-yi-de-se-ma-huo-shan-guang-mo-si-mi-ma-deng>光通信是一种利用光来携带信息的通信技术，也称为远程光通信。由人眼观察来解释信号，简单的信号如烽火、复杂的信号则如光编译的色码或闪光摩斯密码等。</h2><p>如烽火、液压电报、船只的旗帜、信号灯等是最早的光通信技术[1] [2] [3][4]。液压电报最早可以回溯到公元四世纪前的希腊。而在使用灯塔与导航灯防止船难的年代，海水手使用的求救信号弹也是一种光通信技术。<p>掺铒光纤放大器（Erbium-doped Optical Fiber Amplifier，EDFA）的组成基本上包括了掺铒光纤，泵浦激光器，光合路器几个部分。基于不同的用途，掺铒光纤放大器已经发展出多种不同的结构。<p>EDFA的放大原理与激光产生原理类似，光纤中掺杂的稀土族元素Er(3+)其亚稳态（meta-stable state）和基态（ground state）的能量差相当于1550nm光子的能量、<p>当吸收适当波长的泵浦光能量（980nm或1480nm）后，电子会从基态跃迁到能阶较高的激发态（exciting state），接着释放少量能量转移到较稳定的亚稳态、在泵浦光源足够时铒离子的电子会发生居量反转（population inversion），即高能阶的亚稳态比能阶低的基态电子数量多、当适当的光信号通过时，亚稳态电子会发生受激辐射效应，放射出大量同波长光子、但因为存在振动能阶，所以波长不是单一而是一个范围，典型值为1530~1570nm、<p>光放大器一般可以分为光纤放大器和半导体光放大器两种。光纤放大器还可以分为掺铒(Er)光纤放大器，掺镨(Pr)光纤放大器以及拉曼放大器等几种。其中掺铒光纤放大器工作于1550nm波长，已经广泛应用于光纤通信工业领域。掺镨的放大器可以工作于1310nm波长，但是由于转换效率不理想，现在仍然处于实验室研究阶段。拉曼放大器是近几年开始商用化的一种新型放大器，主要应用于需要分布式放大的场合。半导体光放大器结构小巧，方便集成，一直被很多人看好。但是由于偏振效应不太理想，一直没有大规模商用化。<h2 id=solid-state-drive-memory-cell-clearing>Solid state drive/Memory cell clearing</h2><p>== Enabling the Host Protected Area == '''Warning: Only enable the Host Protected Area (HPA) on SSDs that do not contain any data. Otherwise, there is the threat of data loss.'''<p>Under normal circumstances, the '''host protected area''' is disabled. Thus, the SSD, in this example an [[Intel 320 Series SSDs|Intel 320 Series 160 GB SSD]], displays its normal net capacity (displayed in groups of 512-byte sectors).<pre>
root@ubuntu-10-10:~# hdparm -N /dev/sdb

/dev/sdb:
 max sectors   = 312581808/312581808, HPA is disabled
root@ubuntu-10-10:~#
</pre><p>These 312,581,808 sectors multiplied by 512 correspond to exactly 160,041,885,696 bytes, thus the normal net capacity of this SSD, precisely.<p>'''hdparm -Np''' enables the host protected area. In doing this, the number of visible remaining sectors is specified after the –Np flag (without a space between). The --yes-i-know-what-i-am-doing flag and device name are required as additional parameters.<pre>
root@ubuntu-10-10:~# hdparm -Np281323627 /dev/sdb

/dev/sdb:
 setting max visible sectors to 281323627 (permanent)
Use of -Nnnnnn is VERY DANGEROUS.
You have requested reducing the apparent size of the drive.
This is a BAD idea, and can easily destroy all of the drive's contents.
Please supply the --yes-i-know-what-i-am-doing flag if you really want this.
Program aborted.
root@ubuntu-10-10:~# hdparm -Np281323627 --yes-i-know-what-i-am-doing /dev/sdb

/dev/sdb:
 setting max visible sectors to 281323627 (permanent)
 max sectors   = 281323627/312581808, HPA is enabled

root@ubuntu-10-10:~#
</pre><p>Calling hdparam –N again confirms that the HPA has been unlocked.<pre>
root@ubuntu-10-10:~# hdparm -N /dev/sdb

/dev/sdb:
 max sectors   = 281323627/312581808, HPA is enabled
root@ubuntu-10-10:~#
</pre><p>== HPA Unlocked Problem == Many Linux distribution files enable the libata parameter, ignore_hpa.<ref>[http://kerneltrap.org/mailarchive/linux-kernel/2009/5/25/4447854/thread (PATCH 1/3) ide: add "ignore_hpa" module parameter]</ref> By doing so, the HPA will be disabled when the computer is next started or hot-plugging (for eSATA), which can lead to many problems.<ref>[https://bugs.launchpad.net/ubuntu/+source/linux/+bug/380138 Bug #380138 in linux (Ubuntu): “Do NOT disable HPA by default -> leads to data loss”] (bugs.launchpad.net)</ref><p>Whether ignore_hpa has been enabled or not can be determined by using the following command. cat /sys/module/libata/parameters/ignore_hpa<p>If the HPA will automatically be disabled as soon as an SSD with an HPA has been connected, "1" will be returned. The following example displays the /var/log/messages file for Ubuntu 10.10. The SSD has been connected to it using eSATA. The fourth line shows the disabling of the HPA (HPA unlocked).<pre>
Jun  1 10:07:17 ubuntu-10-10 kernel: [  116.644752] ata6: hard resetting link
Jun  1 10:07:18 ubuntu-10-10 kernel: [  117.583941] ata6: SATA link up 3.0 Gbps (SStatus 123 SControl 300)
Jun  1 10:07:18 ubuntu-10-10 kernel: [  117.584645] ata6.00: ACPI cmd f5/00:00:00:00:00:a0 (SECURITY FREEZE LOCK) filtered out
Jun  1 10:07:18 ubuntu-10-10 kernel: [  117.606303] ata6.00: HPA unlocked: 281323627 -> 312581808, native 312581808
Jun  1 10:07:18 ubuntu-10-10 kernel: [  117.606310] ata6.00: ATA-8: INTEL SSDSA2CW160G3, 4PC10302, max UDMA/133
Jun  1 10:07:18 ubuntu-10-10 kernel: [  117.606314] ata6.00: 312581808 sectors, multi 1: LBA48 NCQ (depth 31/32)
Jun  1 10:07:18 ubuntu-10-10 kernel: [  117.607145] ata6.00: ACPI cmd f5/00:00:00:00:00:a0 (SECURITY FREEZE LOCK) filtered out
Jun  1 10:07:18 ubuntu-10-10 kernel: [  117.607576] ata6.00: configured for UDMA/133
Jun  1 10:07:18 ubuntu-10-10 kernel: [  117.608514] ata6.00: configured for UDMA/133
Jun  1 10:07:18 ubuntu-10-10 kernel: [  117.608522] ata6: EH complete
Jun  1 10:07:18 ubuntu-10-10 kernel: [  117.608699] scsi 5:0:0:0: Direct-Access     ATA      INTEL SSDSA2CW16 4PC1 PQ: 0 ANSI: 5
Jun  1 10:07:18 ubuntu-10-10 kernel: [  117.608953] sd 5:0:0:0: Attached scsi generic sg2 type 0
Jun  1 10:07:18 ubuntu-10-10 kernel: [  117.608992] sd 5:0:0:0: [sdb] 312581808 512-byte logical blocks: (160 GB/149 GiB)
Jun  1 10:07:18 ubuntu-10-10 kernel: [  117.609079] sd 5:0:0:0: [sdb] Write Protect is off
Jun  1 10:07:18 ubuntu-10-10 kernel: [  117.609128] sd 5:0:0:0: [sdb] Write cache: enabled, read cache: enabled, doesn't support DPO or FUA
Jun  1 10:07:18 ubuntu-10-10 kernel: [  117.609373]  sdb:
Jun  1 10:07:18 ubuntu-10-10 kernel: [  117.610090] sd 5:0:0:0: [sdb] Attached SCSI disk
</pre><p>=== Affected Linux Systems === Many Linux distribution files will be affected by this behavior, including:<ul><li>Ubuntu 10.10</ul><p>A patch from Tejun Heo (with on-demand HPA unlocking) will resolve this problem.<ref>[http://lkml.org/lkml/2010/5/15/68 (PATCH 8/8) libata: implement on-demand HPA unlocking] (Linux Kernel Mailing List)</ref><ref>[http://kerneltrap.org/mailarchive/git-commits-head/2010/6/3/41154 libata: implement on-demand HPA unlocking] (kerneltrap.org)</ref> Newer Linux kernels and Linux distribution files have already integrated this patch, including:<ul><li>Ubuntu 11.04</ul><p>The use of the HPA (HPA detected) will work with Ubuntu 11.04.<pre>
root@ubuntu:~# tail -f /var/log/kern.log
Jun  1 08:54:32 ubuntu kernel: [  213.433902] ata7: exception Emask 0x10 SAct 0x0 SErr 0x4050000 action 0xe frozen
Jun  1 08:54:32 ubuntu kernel: [  213.433909] ata7: irq_stat 0x00400040, connection status changed
Jun  1 08:54:32 ubuntu kernel: [  213.433914] ata7: SError: { PHYRdyChg CommWake DevExch }
Jun  1 08:54:32 ubuntu kernel: [  213.433926] ata7: hard resetting link
Jun  1 08:54:32 ubuntu kernel: [  214.182197] ata7: SATA link up 3.0 Gbps (SStatus 123 SControl 300)
Jun  1 08:54:32 ubuntu kernel: [  214.182631] ata7.00: HPA detected: current 281323627, native 312581808
Jun  1 08:54:32 ubuntu kernel: [  214.182640] ata7.00: ATA-8: INTEL SSDSA2CW160G3, 4PC10302, max UDMA/133
Jun  1 08:54:32 ubuntu kernel: [  214.182645] ata7.00: 281323627 sectors, multi 1: LBA48 NCQ (depth 31/32)
Jun  1 08:54:32 ubuntu kernel: [  214.183140] ata7.00: configured for UDMA/133
Jun  1 08:54:32 ubuntu kernel: [  214.202174] ata7: EH complete
Jun  1 08:54:32 ubuntu kernel: [  214.202317] scsi 6:0:0:0: Direct-Access     ATA      INTEL SSDSA2CW16 4PC1 PQ: 0 ANSI: 5
Jun  1 08:54:32 ubuntu kernel: [  214.202601] sd 6:0:0:0: [sdd] 281323627 512-byte logical blocks: (144 GB/134 GiB)
Jun  1 08:54:32 ubuntu kernel: [  214.202679] sd 6:0:0:0: Attached scsi generic sg4 type 0
Jun  1 08:54:32 ubuntu kernel: [  214.202761] sd 6:0:0:0: [sdd] Write Protect is off
Jun  1 08:54:32 ubuntu kernel: [  214.202768] sd 6:0:0:0: [sdd] Mode Sense: 00 3a 00 00
Jun  1 08:54:32 ubuntu kernel: [  214.202823] sd 6:0:0:0: [sdd] Write cache: enabled, read cache: enabled, doesn't support DPO or FUA
Jun  1 08:54:32 ubuntu kernel: [  214.203555]  sdd:
Jun  1 08:54:32 ubuntu kernel: [  214.204000] sd 6:0:0:0: [sdd] Attached SCSI disk
^C
root@ubuntu:~# cat /proc/partitions
major minor  #blocks  name

   7        0    1258132 loop0
   8        0  976762584 sda
   8        1   19530752 sda1
   8        2          1 sda2
   8        5    1998848 sda5
   8        6  878905344 sda6
   8       48  140661813 sdd
root@ubuntu:~# fdisk -l /dev/sdd

Disk /dev/sdd: 144.0 GB, 144037697024 bytes
255 heads, 63 sectors/track, 17511 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0xafd4e895

   Device Boot      Start         End      Blocks   Id  System
root@ubuntu:~#
</pre><p>=== Automatically Preventing HPA Disabling for Affected Linux Systems ===<p>==== Temporarily ==== ignore_hpa can be temporarily disabled through the sysfs file system. This temporary change can be helpful, if an SSD with an HPA has been quickly connected to a computer. For SSDs that were already connected when the computer was started, a permanent solution will be required. The temporary setting will remain valid until the next reboot.<pre>
root@ubuntu-10-10:~# cd /sys/module/libata/parameters
root@ubuntu-10-10:/sys/module/libata/parameters# cat ignore_hpa
1
root@ubuntu-10-10:/sys/module/libata/parameters# echo 0 > ignore_hpa
root@ubuntu-10-10:/sys/module/libata/parameters# cat ignore_hpa
0
root@ubuntu-10-10:/sys/module/libata/parameters#
</pre><p>The HPA will now be used correctly (HPA detected: current 281323627, native 312581808):<pre>
Jun  1 11:20:13 ubuntu-10-10 kernel: [   70.824850] ata6: hard resetting link
Jun  1 11:20:14 ubuntu-10-10 kernel: [   71.764776] ata6: SATA link up 3.0 Gbps (SStatus 123 SControl 300)
Jun  1 11:20:14 ubuntu-10-10 kernel: [   71.765573] ata6.00: ACPI cmd f5/00:00:00:00:00:a0 (SECURITY FREEZE LOCK) filtered out
Jun  1 11:20:14 ubuntu-10-10 kernel: [   71.765980] ata6.00: HPA detected: current 281323627, native 312581808
Jun  1 11:20:14 ubuntu-10-10 kernel: [   71.765989] ata6.00: ATA-8: INTEL SSDSA2CW160G3, 4PC10302, max UDMA/133
Jun  1 11:20:14 ubuntu-10-10 kernel: [   71.765993] ata6.00: 281323627 sectors, multi 1: LBA48 NCQ (depth 31/32)
Jun  1 11:20:14 ubuntu-10-10 kernel: [   71.766845] ata6.00: ACPI cmd f5/00:00:00:00:00:a0 (SECURITY FREEZE LOCK) filtered out
Jun  1 11:20:14 ubuntu-10-10 kernel: [   71.767284] ata6.00: configured for UDMA/133
Jun  1 11:20:14 ubuntu-10-10 kernel: [   71.768148] ata6.00: configured for UDMA/133
Jun  1 11:20:14 ubuntu-10-10 kernel: [   71.768157] ata6: EH complete
Jun  1 11:20:14 ubuntu-10-10 kernel: [   71.768374] scsi 5:0:0:0: Direct-Access     ATA      INTEL SSDSA2CW16 4PC1 PQ: 0 ANSI: 5
Jun  1 11:20:14 ubuntu-10-10 kernel: [   71.768663] sd 5:0:0:0: [sdb] 281323627 512-byte logical blocks: (144 GB/134 GiB)
Jun  1 11:20:14 ubuntu-10-10 kernel: [   71.768679] sd 5:0:0:0: Attached scsi generic sg2 type 0
Jun  1 11:20:14 ubuntu-10-10 kernel: [   71.768772] sd 5:0:0:0: [sdb] Write Protect is off
Jun  1 11:20:14 ubuntu-10-10 kernel: [   71.768807] sd 5:0:0:0: [sdb] Write cache: enabled, read cache: enabled, doesn't support DPO or FUA
Jun  1 11:20:14 ubuntu-10-10 kernel: [   71.769104]  sdb:
Jun  1 11:20:14 ubuntu-10-10 kernel: [   71.770897] sd 5:0:0:0: [sdb] Attached SCSI disk
</pre><p>==== Permanently ==== Depending on whether libdata has been compiled into the kernel or exists as a module, ignore_hpa can be permanently disabled as follows.<p>For libdata in the kernel:<ref>[https://bugs.launchpad.net/ubuntu/+source/linux/+bug/380138/comments/13 Bug #380138 in linux (Ubuntu): “Do NOT disable HPA by default -> leads to data loss”] (bugs.launchpad.net), Comment 13</ref><ul><li>Supplement the <code>libata.ignore_hpa=0</code> kernel flag in the boot loader configuration file</ul><p>For libdata as a module:<ref>[https://bugs.launchpad.net/ubuntu/+source/linux/+bug/380138/comments/15 Bug #380138 in linux (Ubuntu): “Do NOT disable HPA by default -> leads to data loss”] (bugs.launchpad.net), Comment 15</ref><ul><li><code>bash -c 'echo options libata ignore_hpa=0 > /etc/modprobe.d/libata.conf'</code> (as root or via sudo)</ul><p>闪存在分类上属于“EEPROM”的一种，但一般业界所讲的EEPROM指的是那种“非快闪式”的普通EEPROM，并不是指它。闪存以“宏块抹除”的方式改写其体内的资料，因为这种宏块的特性导致它的“写入速度”往往慢于“读取速度”，但也导致它的成本远远低于“以字节为单位写入”的普通EEPROM[1]。由于普通EEPROM需要一个一个比特的删除已有资料，这让其传输速度极其缓慢，相较之下快闪记体直接使用“宏块抹除”则会快得多，在会多次用到高清画面、高质量音乐的情况下尤为明显。<p>闪存又分为NOR与NAND两型，闪存最常见的封装方式是TSOP48和BGA，在逻辑接口上的标准则由于厂商阵营而区分为两种：ONFI （页面存档备份，存于互联网档案馆）和Toggle。手机上的闪存常常以eMMC、UFS和NVME（特用于苹果设备中的闪存）的方式存在。<p>SATA Secure Erase is basically the safest way to destroy data if you do not want to destroy the storage medium.<p>With all other solutions, data may remain under certain circumstances. The controller of an SSD, for example, distributes the write operations evenly across the cells. Thus, when using dd, one cannot be sure that all cells have been overwritten.<p>However, because one often does not want to delete the entire HDD / SSD, I would therefore recommend to encrypt the storage devices.<h1 id=lsblk-fs>lsblk --fs</h1><p>NAME FSTYPE LABEL UUID FSAVAIL FSUSE% MOUNTPOINT sda ├─sda1 vfat 2539-7D44 492,2M 2% /boot/efi ├─sda2 ext4 c59a64bf-b464-4ea2-bf3a-d3fd9dded03f 67,9G 31% / └─sda3 swap e96bee61-d116-4700-a761-c72153babfde [SWAP]<h1></h1><h1 id=inxi-admin-disk>inxi --admin --disk</h1><p>Drives: ID-1: /dev/sda vendor: Intenso model: SSD Sata III size: 111.79 GiB block size: physical: 512 B logical: 512 B sata: 3.2 speed: 6.0 Gb/s serial: AA000000000000035990 rev: 2A0 scheme: GPT SMART: yes state: enabled health: PASSED on: 54d 6h cycles: 227 read: 9.6 MiB written: 1.4 MiB<h1 id=-1></h1><h1 id=hdparm-t-dev-sda>hdparm -t /dev/sda</h1><p>/dev/sda: Timing buffered disk reads: 1572 MB in 3.00 seconds = 523.68 MB/sec<h1 id=-2></h1><h1 id=hdparm-t-dev-sda2>hdparm -t /dev/sda2</h1><p>/dev/sda2: Timing buffered disk reads: 1542 MB in 3.00 seconds = 513.97 MB/sec<h1 id=-3></h1><p>https://fio.readthedocs.io/en/latest/fio_doc.html<p>MLC 多层存储单元（Multi-Level Cell,MLC）可以在每个存储单元内存储2个以上的信息比特，其“多级”指的是电荷充电有多个能级（即多个电压值），如此便能存储多个比特的值于每个存储单元中。借由每个存储单元可存储更多的比特，MLC闪存可降低生产成本，但比起SLC闪存，其传输速度较慢，功率消耗较高和存储单元的寿命较低，因此MLC闪存技术会用在标准型的储存卡，也用在最常见的消费型固态硬盘和U盘上。另外，如飞索半导体的MirrorBit®技术，也是属于这一类技术。<p>TLC 三层储存单元（Triple-Level Cell, TLC），这种架构的原理与MLC类似，但可以在每个储存单元内储存3个信息比特。TLC的写入速度比SLC和MLC慢，寿命也比SLC和MLC短（使用LDPC的话，约有1500次），大约1000次。现在，厂商已不使用TLC这个名字，而是称其为3-bit MLC。[3]在使用3D技术取代微缩后，TLC(3D-TLC)成为市场主流。<p>QLC 四层储存单元（Quad-Level Cell, QLC），每个存储单元有4个bits的格式，寿命为四者之中最短，大约只有500次。<p>在假设低电位表示二进制的0，高电位表示二进制的1时，SLC、MLC、TLC和QLC的电位及二进制值对比表。<p>在表中可以清楚的看到SLC、MLC、TLC和QLC技术分别将单个存储单元划分为2/4/8/16阶，拿来存储1/2/3/4个二进制位数。<p>Solid-State Drives (SSDs) have a so-called spare area, a data area that is not directly visible to the operating system. The SSD uses this spare area for wear leveling, among other things. Increasing the size of the spare area (over-provisioning) can increase performance and the life cycle of an SSD. This article will show how to increase the size of the spare area of a SATA SSD using hdparm under Linux by enabling the host protected area (ATA8-ACS SET MAX ADDRESS). The net usable capacity of the SSD will be reduced by doing so. The spare area section of the article about solid-state drives presents alternative methods for over-provisioning and other information.<p>Preparation Before increasing the size of the spare area, all SSD blocks must be deleted. Only in this manner can the SSD controller actually use the hidden data areas for wear leveling.<p>All SSD blocks will have been deleted, when:<p>the SSD is in its delivery state or a secure erase or manual TRIM (depending on the specific SSD) has been performed<p>The hdparm tool for Linux provides an additional option, however the man page advises against using the option with hdparm version 9.27 (Ubuntu 10.10):<pre style=background:#0f1419;color:#bfbab0><code><span>   --trim-sector-ranges
</span><span>          For  Solid  State  Drives (SSDs).  EXCEPTIONALLY DANGEROUS. DO NOT USE THIS FLAG!!  Tells
</span><span>          the drive firmware to discard unneeded data sectors, destroying any data  that  may  have
</span><span>          been  present  within  them.  This makes those sectors available for immediate use by the
</span><span>          firmware's garbage collection mechanism, to improve scheduling for wear-leveling  of  the
</span><span>          flash  media.   This  option expects one or more sector range pairs immediately after the
</span><span>          flag: an LBA starting address, a colon, and a sector count, with no  intervening  spaces.
</span><span>          EXCEPTIONALLY DANGEROUS. DO NOT USE THIS FLAG!!
</span><span>
</span><span>          E.g.  hdparm --trim-sector-ranges 1000:4 7894:16 /dev/sdz
</span></code></pre><p>Step 2: Set the User Passwords So that you can execute a secure erase, you must first define a user password. In the example, we have used the password, Eins. The security feature will be enable thereafter.<p>Warning: If you set the user password, the SSD will entire the locked state after re-booting. The SSD will then block all normal access until it is re-locked with the correct password. However, if you perform the additional steps completely (without re-booting), the security feature will be automatically deactivated.<p>root@ubuntu-10-04:~# hdparm --user-master u --security-set-pass Eins /dev/sdb security_password="Eins"<p>/dev/sdb: Issuing SECURITY_SET_PASS command, password="Eins", user=user, mode=high root@ubuntu-10-04:~# hdparm -I /dev/sdb [...] Security: Master password revision code = 65534 supported enabled not locked not frozen not expired: security count supported: enhanced erase Security level high 2min for SECURITY ERASE UNIT. 2min for ENHANCED SECURITY ERASE UNIT. [...] Step 3: Secure Erase Now, execute the secure erase procedure:<p>root@ubuntu-10-04:~# time hdparm --user-master u --security-erase Eins /dev/sdb security_password="Eins"<p>/dev/sdb: Issuing SECURITY_ERASE command, password="Eins", user=user<p>real 0m55.408s user 0m0.000s sys 0m0.000s root@ubuntu-10-04:~# Step 4: Checking After the secure erase procedure has completed, the SSD security feature will be disabled.<p>root@ubuntu-10-04:~# hdparm -I /dev/sdb [...] Security: Master password revision code = 65534 supported not enabled not locked not frozen not expired: security count supported: enhanced erase 2min for SECURITY ERASE UNIT. 2min for ENHANCED SECURITY ERASE UNIT. [...]<p>On occasion, users may wish to completely reset the SSD to the initial "clean" state it was manufactured with, thus restoring it to its factory default write performance. Write performance is known to degrade over time even on SSDs with native TRIM support. TRIM only safeguards against file deletes, not replacements such as an incremental save.<h3 id=nvme-ssd>NVMe SSD</h3><p>The NVMe specification defines a standardized way to format NVMe drives, since those do not use the SATA interface protocol and therefore cannot be cleared in the same way as SATA SSDs.<h1 id=nvme-id-ctrl-dev-nvme0-h-grep-format-crypto-erase-sanitize>nvme id-ctrl /dev/nvme0 -H | grep "Format |Crypto Erase|Sanitize"</h1><p>Example output:<p>[1:1] : 0x1 Format NVM Supported [29:29] : 0 No-Deallocate After Sanitize bit in Sanitize command Supported [2:2] : 0 Overwrite Sanitize Operation Not Supported [1:1] : 0x1 Block Erase Sanitize Operation Supported [0:0] : 0x1 Crypto Erase Sanitize Operation Supported [2:2] : 0x1 Crypto Erase Supported as part of Secure Erase [1:1] : 0 Crypto Erase Applies to Single Namespace(s) [0:0] : 0 Format Applies to Single Namespace(s)<p>The Format command is conceptually closer to a mix of hdparm and fdisk, as it allows to set low-level parameters for the drive and additionally to send a secure erase command.<p>nvme-format(1) gives the following details about the Secure Erase Settings (-s <ses>, --ses=<ses>) option: <p>Secure Erase Settings: This field specifies whether a secure erase should be performed as part of the format and the type of the secure erase operation. The erase applies to all user data, regardless of location (e.g., within an exposed LBA, within a cache, within deallocated LBAs, etc). Defaults to 0. Possible values :</p> <p>Value Definitions 0 No secure erase operation requested 1 User Data Erase: All user data shall be erased, contents of the user data after the erase is indeterminate (e.g., the user data may be zero filled, one filled, etc). The controller may perform a cryptographic erase when a User Data Erase is requested if all user data is encrypted. 2 Cryptographic Erase: All user data shall be erased cryptographically. This is accomplished by deleting the encryption key. While the Format command accepts either the whole NVMe character device (e.g. /dev/nvme0) or a specific namespace block device (e.g. /dev/nvme0n1), make sure this feature is supported by your drive before triggering it. E.g. in the output of the Identify Controller command above, we see that the Crypto Erase Applies to Single Namespace(s) and Format Applies to Single Namespace(s) bits are set to zero, which according to the spec means that "the controller supports format on a per namespace basis" (see figure 249 byte row 524 "Format NVM Attributes (FNA)").</p> <p>For example, to format /dev/nvme0 with a crypto erase to namespace 1:</p> <h1 id=nvme-format-dev-nvme0-s-2-n-1>nvme format /dev/nvme0 -s 2 -n 1</h1> <p>Use -n 0xffffffff to format all the namespaces.</p> <p>See nvme-format(1) for more information and important warnings regarding device/namespace selection.</p> <h2 id=tun>TUN</h2> <p>Though both are for tunneling purposes, TUN and TAP can't be used together because they transmit and receive packets at different layers of the network stack. TUN, namely network TUNnel, simulates a network layer device and operates in layer 3 carrying IP packets. TAP, namely network TAP, simulates a link layer device and operates in layer 2 carrying Ethernet frames. TUN is used with routing. TAP can be used to create a user space network bridge.[2]</p> <p>Applications Virtual private networks OpenVPN, Ethernet/IP over TCP/UDP; encrypted, compressed ZeroTier, Ethernet/IP over TCP/UDP; encrypted, compressed, cryptographic addressing scheme FreeLAN, open-source, free, multi-platform IPv4, IPv6 and peer-to-peer VPN software over UDP/IP. n2n, an open source Layer 2 over Layer 3 VPN application which uses a peer-to-peer architecture for network membership and routing Tinc, Ethernet/IPv4/IPv6 over TCP/UDP; encrypted, compressed VTun, Ethernet/IP/serial/Unix pipe over TCP; encrypted, compressed, traffic-shaping OpenSSH coLinux, Ethernet/IP over TCP/UDP Hamachi OpenConnect WireGuard Tailscale Virtual-machine networking Bochs coLinux Hercules (S/390 emulator) Open vSwitch QEMU/KVM User-mode Linux VirtualBox</p> <p>TUN与TAP是操作系统内核中的虚拟网络设备。不同于普通靠硬件网络适配器实现的设备，这些虚拟的网络设备全部用软件实现，并向运行于操作系统上的软件提供与硬件的网络设备完全相同的功能。</p> <p>TAP等同于一个以太网设备，它操作第二层数据包如以太网数据帧。TUN模拟了网络层设备，操作第三层数据包比如IP数据包。</p> <p>操作系统通过TUN/TAP设备向绑定该设备的用户空间的程序发送数据，反之，用户空间的程序也可以像操作硬件网络设备那样，通过TUN/TAP设备发送数据。在后种情况下，TUN/TAP设备向操作系统的网络栈投递（或“注入”）数据包，从而模拟从外部接受数据的过程。</p> <h2 id=tayga>TAYGA</h2> <p>Simple, no-fuss NAT64 for Linux TAYGA is an out-of-kernel stateless NAT64 implementation for Linux that uses the TUN driver to exchange IPv4 and IPv6 packets with the kernel. It is intended to provide production-quality NAT64 service for networks where dedicated NAT64 hardware would be overkill.</p> <p>TAYGA is:</p> <ul><li><p>Fast — can saturate gigabit Ethernet on modest PC hardware</p><li><p>Flexible — performs dynamic mapping to handle any site addressing scheme</p><li><p>Secure — runs outside of the kernel as an unprivileged process</p><li><p>Compatible — works with all Linux 2.4 and 2.6 kernels</p><li><p>Simple — requires only a five-line configuration file (three lines in some cases)</p><li><p>Easy to install — no kernel patches or external dependencies required</p><li><p>http://www.litech.org/tayga/</p></ul> <p>The latest release of TAYGA is version 0.9.2, released on 2011-06-10.</p> <p>Super-quick-start You will need to select an unused /96 from your site's IPv6 address range which will be used as the NAT64 prefix. You will also need a block of unused IPv4 addresses for the dynamic address pool. TAYGA will assign IPv4 addresses from this pool to the IPv6 hosts that need NAT64 service. The dynamic pool can be chosen from private IPv4 address space (10.x.x.x, 192.168.x.x, etc) and can be of any size, although it needs to be large enough to contain one IPv4 address for every IPv6 host that needs to use the NAT64.</p> <p>TAYGA also needs its own IPv4 address, but this can be taken from the dynamic address pool.</p> <h1 id=configure-make-make-install>./configure && make && make install</h1> <h1 id=mkdir-p-var-db-tayga>mkdir -p /var/db/tayga</h1> <h1 id=cat-usr-local-etc-tayga-conf-eod>cat >/usr/local/etc/tayga.conf <&LTEOD</h1> <p>tun-device nat64 ipv4-addr 192.168.255.1 (this is TAYGA's IPv4 address, not your router's address) prefix 2001:db8:1:ffff::/96 (replace with an unused /96 prefix from your site's address range) dynamic-pool 192.168.255.0/24 data-dir /var/db/tayga EOD</p> <h1 id=tayga-mktun>tayga --mktun</h1> <h1 id=ip-link-set-nat64-up>ip link set nat64 up</h1> <h1 id=ip-addr-add-192-168-0-1-dev-nat64-replace-with-your-router-s-ipv4-address>ip addr add 192.168.0.1 dev nat64 (replace with your router's IPv4 address)</h1> <h1 id=ip-addr-add-2001-db8-1-1-dev-nat64-replace-with-your-router-s-ipv6-address>ip addr add 2001:db8:1::1 dev nat64 (replace with your router's IPv6 address)</h1> <h1 id=ip-route-add-192-168-255-0-24-dev-nat64>ip route add 192.168.255.0/24 dev nat64</h1> <h1 id=ip-route-add-2001-db8-1-ffff-96-dev-nat64>ip route add 2001:db8:1:ffff::/96 dev nat64</h1> <h1 id=tayga-1>tayga</h1> <h1 id=ping6-2001-db8-1-ffff-192-168-0-1>ping6 2001:db8:1:ffff::192.168.0.1</h1> <p>If the ping6 command succeeds, TAYGA is working. Now you'll need to set up NAT44 rules in iptables or elsewhere on your network so the dynamic pool addresses can reach the rest of the Internet.</p> <p>Full documentation about the configuration and operation of TAYGA can be found in the man pages and README file accompanying the distribution.</p> <p>DNS64 ISC BIND supports DNS64 since version 9.8 and is the best option for DNS64 services. Another option is Totd, although it has not been updated in some years.</p> <p>What about stateful NAT? TAYGA could never come close to offering the power and flexibility available in iptables and mature commercial NAT44 implementations, so instead TAYGA turns IPv6 into IPv4 in the most transparent manner possible, allowing existing IPv4-only tools to be used to further manipulate sessions flowing through it.</p> <p>In other words, if you need stateful NAT64, route TAYGA's IPv4 path through a stateful NAT44.</p> <h2 id=briny-brackish-saline>Briny, Brackish, Saline</h2> <h2 id=gfwlist>GFWList</h2> <p>Rule List Config Rule List Format SwitchyAutoProxy Rule List URL https://gitlab.com/gfwlist/gfwlist/raw/master/gfwlist.txt The rule list will be updated from this URL. If it is left blank, the following text will be parsed instead.</p> <p>Rule List Text Rule list downloaded at Oct 11, 2023 6:17:27 PM:</p> <p>[AutoProxy 0.2.9] ! Checksum: 3G9Dd6DUURMFhqmYuuC91Q ! Expires: 6h ! Title: GFWList4LL ! GFWList with EVERYTHING included ! Last Modified: Sun, 17 Sep 2023 12:59:35 -0400 ! ! HomePage: https://github.com/gfwlist/gfwlist ! License: https://www.gnu.org/licenses/old-licenses/lgpl-2.1.txt ! ! GFWList is unlikely to fully comprise the real ! rules being deployed inside GFW system. We try ! our best to keep the list up to date. Please ! contact us regarding URL submission / removal, ! or suggestion / enhancement at issue tracker: ! https://github.com/gfwlist/gfwlist/issues/.</p> <p>!---------403/451/503/520 & URL Redirects--------- !--ehentai |http://85.17.73.31/ !--||adorama.com ||afreecatv.com ||agnesb.fr ||akiba-web.com ||altrec.com ||angela-merkel.de ||angola.org ||apartmentratings.com ||apartments.com ||arena.taipei ||asianspiss.com ||assimp.org ||athenaeizou.com ||azubu.tv ||bankmobilevibe.com ||banorte.com ||beeg.com ||global.bing.com ...</p> <p>@@||cn.noxinfluencer.com</p> <p>.pandora.tv</p> <p>summify.com</p> <p>sysresccd.org</p> <h2 id=linux-5-10-y-picos-4-4>linux-5.10.y-picos-4.4</h2> <h2 id=-4></h2> <p>在 Linux 里只要数分钟就能编译完成的 libgcc.a 在 Windows 里面需要半个小时以上才能完成，而且到最后使用 ar 命令将一堆 .o 文件合并为 .a 时，居然因为命令行超过 32KB 而导致命令执行失败。到最后是直接使用了 Linux 里面编译好的文件。</p> <p>哎。。。这都是 Windows 过于复杂的进程创建机制导致的。。。</p> <p>最近打算更新 MinGW 环境，发现 mingw-w64 比 mingw32 更优秀，因此就打算制作一个基于最新 gcc 的 mingw-w64 工具链。</p> <p>由于打算在 Linux 里面来制作一个在 Windows 里面运行的 mingw-w64 工具链，因此整个制作过程将分为两个阶段：第一阶段是制作在 Linux 里运行的 mingw-w64 工具链；第二阶段是使用此工具链来制作在 Windows 里面运行的工具链。</p> <p>两个阶段使用相同的源代码，需要的代码包如下：</p> <p>gmp-6.0.0: http://ftp.gnu.org/gnu/gmp/gmp-6.0.0a.tar.bz2 mpfr-3.1.3: http://ftp.gnu.org/gnu/mpfr/mpfr-3.1.3.tar.bz2 mpc-1.0.3: http://ftp.gnu.org/gnu/mpc/mpc-1.0.3.tar.gz isl-0.12: http://isl.gforge.inria.fr/isl-0.12.tar.bz2 (注意：不要使用 isl-0.13 或以上的版本，binutils 和 gcc 不支持) cloog-0.18.4: http://www.bastoul.net/cloog/pages/download/cloog-0.18.4.tar.gz binutils-2.25: http://ftp.gnu.org/gnu/binutils/binutils-2.25.tar.bz2 gcc-5.2.0: http://ftp.gnu.org/gnu/gcc/gcc-5.2.0/gcc-5.2.0.tar.bz2 mingw-w64-v4.0.4: http://sourceforge.net/projects/mingw-w64/files/mingw-w64/mingw-w64-release/mingw-w64-v4.0.4.tar.bz2/download libiconv-1.14: http://ftp.gnu.org/gnu/libiconv/libiconv-1.14.tar.gz m4-1.4.17: http://ftp.gnu.org/gnu/m4/m4-1.4.17.tar.bz2 libtool-2.4.6: http://ftp.gnu.org/gnu/libtool/libtool-2.4.6.tar.xz</p> <p>以下为第一阶段的编译过程： 编译环境：</p> <p>编译环境 (build)： x86_64-pc-linux-gnu 运行环境 (host)： x86_64-pc-linux-gnu (Ubuntu 15.04 AMD64) 目标环境 (target)： x86_64-w64-mingw32 (Windows mingw-w64) 生成的工具链存放目录 (prefix)： /home/hackpascal/mingw/toolchain/usr</p> <p>设置环境变量：</p> <p>export PREFIX=/home/hackpascal/mingw/toolchain/usr export TARGET=x86_64-w64-mingw32 export BUILD=x86_64-pc-linux-gnu export PATH=$PATH:$PREFIX/bin</p> <p>编译 gcc 所依赖的库 gmp mpfr mpc isl cloog。 这些库需要依次编译，因为它们存在依赖关系。其中 gmp 与 mpfr 为必需的，其余可选，但是跟优化相关。全部编译为静态，以防止工具链在运行时找不到这些库（毕竟工具链没有安装在系统目录，$PREFIX/lib 里面的文件不能被搜索到，修改 LD_LIBRARY_PATH 又不方便）。</p> <p>[gmp-6.0.0] ./configure --prefix=$PREFIX --build=$BUILD --disable-shared --enable-static --enable-cxx make make install</p> <p>[mpfr-3.1.3] ./configure --prefix=$PREFIX --build=$BUILD --disable-shared --enable-static --with-gmp=$PREFIX make make install</p> <p>[mpc-1.0.3] ./configure --prefix=$PREFIX --build=$BUILD --disable-shared --enable-static --with-mpfr=$PREFIX --with-gmp=$PREFIX make make install</p> <p>[isl-0.12] ./configure --prefix=$PREFIX --build=$BUILD --disable-shared --enable-static --with-gmp-prefix=$PREFIX make make install</p> <p>[cloog-0.18.4] ./configure --prefix=$PREFIX --build=$BUILD --disable-shared --enable-static --with-isl-prefix=$PREFIX --with-gmp-prefix=$PREFIX make make install</p> <p>编译 binutils。 由于是制作工具链，因此要指定 sysroot。编译时禁用多语言支持 (nls) 与链接时优化 (lto)。</p> <p>[binutils-2.25] ./configure --prefix=$PREFIX --build=$BUILD --target=$TARGET --enable-static --disable-shared --disable-nls --enable-ld --disable-lto --with-sysroot=$PREFIX/$TARGET --with-mpc=$PREFIX --with-mpfr=$PREFIX --with-gmp=$PREFIX --with-cloog=$PREFIX --with-isl=$PREFIX make make install</p> <p>编译 gcc 第一阶段。</p> <p>此阶段由于还没有编译 mingw-w64 的运行时库 (mingw-w64-crt)，因此缺少头文件，只能编译 gcc 的程序，而不能去编译它的库 (libssp libmudflap libgomp libgcc libstdc++-v3 libatomic libvtv libquadmath)。同时也不编译 multilib。Win64 环境下不能使用 DWARF2 异常处理模式，因此要禁用它，转而使用 setjump/longjump 模式。使用 win32 线程模型，不想带一个 winpthreads 库。</p> <p>[gcc-5.2.0-initial] ./configure --prefix=$PREFIX --build=$BUILD --host=$BUILD --target=$TARGET --program-prefix=$TARGET- --disable-nls --disable-lto --disable-multilib --disable-libssp --disable-libmudflap --disable-libgomp --disable-libgcc --disable-libstdc++-v3 --disable-libatomic --disable-libvtv --disable-libquadmath --enable-sjlj-exceptions --enable-languages=c,c++ --enable-version-specific-runtime-libs --enable-decimal-float=yes --enable-threads=win32 --enable-tls --enable-fully-dynamic-string --with-gnu-ld --with-gnu-as --with-libiconv --with-system-zlib --without-dwarf2 --with-sysroot=$PREFIX/$TARGET --with-local-prefix=$PREFIX/local --with-gmp=$PREFIX --with-mpfr=$PREFIX --with-mpc=$PREFIX --with-isl=$PREFIX --with-cloog=$PREFIX make make install</p> <p>编译 mingw-w64 CRT 库的头文件 (mingw-w64-headers)。 此代码存在于 mingw-w64-v4.0.4 里。其实这是一个完整的 mingw-w64 编译系统，可以自动编译一个完整的 mingw-w64 工具链。但这里我选择了手动编译，这样自由度很高。 头文件安装后，需要做一个 include 文件夹的符号链接，这样才能保证 gcc 第二阶段的编译能够顺利进行 (可以在 gcc 配置脚本中指定，但是这里偷懒，就这样吧)。</p> <p>[mingw-w64-headers] ./configure --prefix=$PREFIX/$TARGET --build=$BUILD --target=$TARGET --enable-idl --enable-secure-api --with-widl=$PREFIX/bin make make install mkdir $PREFIX/$TARGET/mingw ls -s ../include $PREFIX/$TARGET/mingw</p> <p>编译 mingw-w64-crt 所需的程序 (gendef genidl widl)。 此代码依然存在于 mingw-w64-v4.0.4 里。</p> <p>[gendef] ./configure --prefix=$PREFIX --build=$BUILD make make install</p> <p>[genidl] ./configure --prefix=$PREFIX --build=$BUILD make make install</p> <p>[widl] ./configure --prefix=$PREFIX --build=$BUILD --target=$TARGET make make install</p> <p>编译 mingw-w64-crt。 此代码依然存在于 mingw-w64-v4.0.4 里。 编译时要指定目标编译器，否则生成导入库时会出错。</p> <p>[mingw-w64-crt] AR='$TARGET-ar' <br> AS='$TARGET-as' <br> CC='$TARGET-gcc' <br> CXX='$TARGET-g++' <br> DLLTOOL='$TARGET-dlltool' <br> RANLIB='$TARGET-ranlib' <br> ./configure --prefix=$PREFIX/$TARGET --build=$BUILD --disable-w32api --disable-lib32 --enable-lib64 --enable-private-exports make make install</p> <p>编译 gcc 第二阶段。 此阶段即为在第一阶段的基础上编译 gcc 自带的库。 编译参数中一定要禁止使用 newlib，否则 libstdc++-v3 会使用 newlib 的头文件而不是 mingw-w64 的头文件，这将导致 libstdc++-v3 因为缺少宏定义以及使用了 Unix 的函数而编译失败。</p> <p>[gcc-5.2.0-final] ./configure --prefix=$PREFIX --build=$BUILD --host=$BUILD --target=$TARGET --with-local-prefix=$PREFIX/local --program-prefix=$TARGET- --disable-nls --disable-lto --disable-multilib --disable-libssp --disable-libmudflap --disable-libstdcxx-pch --disable-symvers --disable-shared --enable-static --enable-languages=c,c++ --enable-libstdcxx-debug --enable-version-specific-runtime-libs --enable-decimal-float=yes --enable-threads=win32 --enable-tls --enable-fully-dynamic-string --with-gnu-ld --with-gnu-as --with-libiconv --with-system-zlib --without-newlib --with-sysroot=$PREFIX/$TARGET --with-gmp=$PREFIX --with-mpfr=$PREFIX --with-mpc=$PREFIX --with-isl=$PREFIX --with-cloog=$PREFIX make make install</p> <p>编译 libiconv。 这是给第二阶段的 gcc 编译做准备的，这个库必须安装在第一阶段工具链中。</p> <p>此版本代码需要打一个补丁才能成功编译：</p> <p>1 2 3 4 5 6 7 8 9 10 11 12 13 --- a/srclib/stdio.in.h +++ b/srclib/stdio.in.h @@ -695,8 +695,10 @@ /* It is very rare that the developer ever has full control of stdin, so any use of gets warrants an unconditional warning. Assume it is always declared, since it is required by C89. */ +#if defined(<strong>GLIBC</strong>) && !defined(<strong>UCLIBC</strong>) && !__GLIBC_PREREQ(2, 16) _GL_WARN_ON_USE (gets, "gets is a security hole - use fgets instead"); #endif +#endif</p> <p>#if @GNULIB_OBSTACK_PRINTF@ || @GNULIB_OBSTACK_PRINTF_POSIX@ [libiconv-1.14] ./configure --prefix=$PREFIX/$TARGET --build=$BUILD --host=$HOST --enable-extra-encodings --enable-static --disable-shared --disable-nls --with-gnu-ld make make install</p> <p>至此工具链制作完成，位于 $PREFIX 中。</p> <p>以下为第二阶段的编译过程： 编译环境：</p> <p>编译环境 (build)： x86_64-pc-linux-gnu (Ubuntu 15.04 AMD64) 运行环境 (host)： x86_64-w64-mingw32 (Windows mingw-w64) 目标环境 (target)： x86_64-w64-mingw32 生成的工具链目录 (prefix)： /mingw64 工具链存放目录：/home/hackpascal/mingw</p> <p>引用一下第一步环境</p> <blockquote><p>编译环境 (build)： x86_64-pc-linux-gnu<p>运行环境 (host)： x86_64-pc-linux-gnu (Ubuntu 15.04 AMD64)<p>目标环境 (target)： x86_64-w64-mingw32 (Windows mingw-w64)<p>生成的工具链存放目录 (prefix)： /home/hackpascal/mingw/toolchain/usr</blockquote> <p>设置环境变量：</p> <p>export PREFIX=/mingw64 export TARGET=x86_64-w64-mingw32 export HOST=$TARGET export BUILD=x86_64-pc-linux-gnu export PATH=$PATH:/home/hackpascal/mingw/toolchain/usr/bin export OUTPUT_PATH=/home/hackpascal/mingw</p> <p>建立符号链接： 这是为了偷懒才这么做的。。。 第一个链接是为了编译代码时方便定位已经安装的库；第二个链接是 gcc 配置文件中默认的包含文件目录的位置。 sudo ln -s $OUTPUT_PATH$PREFIX $PREFIX sudo ln -s $PREFIX /mingw</p> <p>编译 gcc 所依赖的库 gmp mpfr mpc isl cloog。 由于 Windows 搜索动态链接库的特性，这些库都编译为动态链接库 (.dll) 以便节省空间。</p> <p>[gmp-6.0.0] ./configure --prefix=$PREFIX --build=$BUILD --host=$HOST --enable-cxx --enable-shared --disable-static make make install DESTDIR=$OUTPUT_PATH</p> <p>[mpfr-3.1.3] ./configure --prefix=$PREFIX --build=$BUILD --host=$HOST --with-gmp=$PREFIX --enable-shared --disable-static make make install DESTDIR=$OUTPUT_PATH</p> <p>[mpc-1.0.3] ./configure --prefix=$PREFIX --build=$BUILD --host=$HOST --with-mpfr=$PREFIX --with-gmp=$PREFIX --enable-shared --disable-static make make install DESTDIR=$OUTPUT_PATH</p> <p>[isl-0.12] ./configure --prefix=$PREFIX --build=$BUILD --host=$HOST --with-gmp-prefix=$PREFIX --enable-shared --disable-static make make install DESTDIR=$OUTPUT_PATH</p> <p>[cloog-0.18.4] ./configure --prefix=$PREFIX --build=$BUILD --host=$HOST --with-isl-prefix=$PREFIX --with-gmp-prefix=$PREFIX --enable-shared --disable-static make make install DESTDIR=$OUTPUT_PATH</p> <p>编译 binutils。 不需要指定 sysroot。</p> <p>[binutils-2.25] ./configure --prefix=$PREFIX --build=$BUILD --host=$HOST --target=$TARGET --enable-shared --disable-nls --enable-ld --disable-lto --with-mpc=$PREFIX --with-mpfr=$PREFIX --with-gmp=$PREFIX --with-cloog=$PREFIX --with-isl=$PREFIX make make install DESTDIR=$OUTPUT_PATH</p> <p>编译 m4 和 libtool。 这两个工具是在编译由 automake + autoconf 生成的代码包时可能用到的。</p> <p>[m4-1.4.17] ./configure --prefix=$PREFIX --build=$BUILD --host=$HOST --enable-threads=windows --enable-c++ make make install DESTDIR=$OUTPUT_PATH</p> <p>[libtool-2.4.6] ./configure --prefix=$PREFIX --build=$BUILD --host=$HOST --with-gnu-ld --enable-ltdl-install --enable-shared --disable-static make make install DESTDIR=$OUTPUT_PATH</p> <p>编译 mingw-w64 所需的库和工具。 此代码存在于 mingw-w64-v4.0.4 里。</p> <p>[libmangle] ./configure --prefix=$PREFIX --build=$BUILD --host=$HOST make make install DESTDIR=$OUTPUT_PATH</p> <p>[gendef] ./configure --prefix=$PREFIX --build=$BUILD --host=$HOST --with-mangle=$PREFIX make make install DESTDIR=$OUTPUT_PATH</p> <p>[genidl] ./configure --prefix=$PREFIX --build=$BUILD --host=$HOST make make install DESTDIR=$OUTPUT_PATH</p> <p>[genpeimg] ./configure --prefix=$PREFIX --build=$BUILD --host=$HOST make make install DESTDIR=$OUTPUT_PATH</p> <p>编译 widl 需要注意的是：在交叉编译时，configure 脚本对 malloc 以及 realloc 的检测会出错，因此需要手动指定它们的检测结果。</p> <p>[widl] ac_cv_func_malloc_0_nonnull=yes <br> ac_cv_func_realloc_0_nonnull=yes <br> ./configure --prefix=$PREFIX --build=$BUILD --host=$HOST --target=$TARGET --program-prefix="" make make install DESTDIR=$OUTPUT_PATH</p> <p>编译 mingw-w64 CRT 库的头文件 (mingw-w64-headers)。 也可以直接复制第一阶段编译好的文件。</p> <p>[mingw-w64-headers] ./configure --prefix=$PREFIX --build=$BUILD --host=$HOST --target=$TARGET --enable-idl --enable-secure-api make make install DESTDIR=$OUTPUT_PATH</p> <p>编译 mingw-w64-crt。 也可以直接复制第一阶段编译好的文件。</p> <p>[mingw-w64-crt] AR="$TARGET-ar" <br> AS="$TARGET-as" <br> CC="$TARGET-gcc" <br> CXX="$TARGET-g++" <br> DLLTOOL="$TARGET-dlltool" <br> RANLIB="$TARGET-ranlib" <br> ./configure --prefix=$PREFIX --build=$BUILD --host=$HOST --disable-w32api --disable-lib32 --enable-lib64 --enable-private-exports make make install DESTDIR=$OUTPUT_PATH</p> <p>编译 mingw-w64 的附加库。 winpthreads 是在 Windows 下实现的 pthread 兼容的线程库，用于 c++11 的 std::thread 等功能。 winstorecompat 用于支持 Windows Store 应用程序开发。</p> <p>[winpthreads] ./configure --prefix=$PREFIX --build=$BUILD --host=$HOST --enable-shared --enable-static --with-gnu-ld make make install DESTDIR=$OUTPUT_PATH</p> <p>[winstorecompat] ./configure --prefix=$PREFIX --build=$BUILD --host=$HOST make make install DESTDIR=$OUTPUT_PATH</p> <p>编译 gcc。 由于所需的库和头文件都已准备就绪，因此编译一次即可。 编译参数指定了使用 posix 线程模型，以便支持 c++11 的新特性。</p> <p>给 gcc 打一个补丁以便让 x86_64 架构支持 SEH 异常处理模型：</p> <p>1 2 3 4 5 6 7 8 9 10 11 12 13 14 --- a/libgcc/config.host +++ b/libgcc/config.host @@ -703,11 +703,7 @@ ;; esac # This has to match the logic for DWARF2_UNWIND_INFO in gcc/config/i386/cygming.h</p> <ul><li><pre style=background:#0f1419;color:#bfbab0><code><span>  if test x$enable_sjlj_exceptions = xyes; then
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span>          tmake_eh_file="i386/t-sjlj-eh"
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span>  else
</span><span>          tmake_eh_file="i386/t-seh-eh"
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span>  fi
</span><span>  # Shared libgcc DLL install dir depends on cross/native build.
</span><span>  if test x${build} = x${host} ; then
</span><span>          tmake_dlldir_file="i386/t-dlldir"
</span></code></pre></ul> <p>[gcc-5.2.0] ./configure --prefix=$PREFIX --build=$BUILD --host=$HOST --target=$TARGET --with-local-prefix=$PREFIX/local --disable-nls --enable-lto --disable-multilib --disable-win32-registry --disable-libstdcxx-pch --disable-symvers --enable-shared --enable-static --enable-languages=c,c++ --enable-libstdcxx-debug --enable-version-specific-runtime-libs --enable-decimal-float=yes --enable-threads=posix --enable-tls --enable-fully-dynamic-string --with-gnu-ld --with-gnu-as --without-newlib --with-libiconv --with-gmp=$PREFIX --with-mpfr=$PREFIX --with-mpc=$PREFIX --with-isl=$PREFIX --with-cloog=$PREFIX make make install DESTDIR=$OUTPUT_PATH</p> <p>编译 libiconv。 libiconv 不能先于 gcc 编译安装到第二阶段工具链的目录里，否则会导致 gcc 引用了错误的头文件而导致编译失败。 因此第一阶段就将 libiconv 编译安装到了第一阶段的工具链目录中。 但是此时还需要为第二阶段的工具链编译一次，以便第二阶段工具链的程序能够正常运行。</p> <p>[libiconv-1.14] ./configure --prefix=$PREFIX --build=$BUILD --host=$HOST --enable-extra-encodings --enable-static --disable-nls --with-gnu-ld make make install DESTDIR=$OUTPUT_PATH</p> <p>最后将 gcc 异常处理库文件复制到程序目录 cp $PREFIX/lib/gcc/$TARGET/<em>.dll $PREFIX/bin 将 libgcc_s.a 复制到 lib 目录 cp $PREFIX/lib/gcc/$TARGET/lib/</em> $PREFIX/lib</p> <p>至此运行于 Windows 平台的工具链制作完成。</p> <p>如果想要去掉工具链程序中的调试信息以便节省空间，可以在工具链目录中运行如下命令： find ./ -name '<em>.exe' -o -name '</em>.dll' | xargs $TARGET-strip -s</p> <p>前面建立的两个符号链接也可以删掉了： sudo rm -f $PREFIX sudo rm -f /mingw 千万记得不要使用 -r 参数，否则就得重来一次 make install 了。</p> <p>完整的在linux环境编译运行在windows环境的工具链的方法。这篇帖子只是其中之一。</p> <p>完整的编译流程是：</p> <ol><li>编译运行于linux环境的mingw工具链<li>编译运行于linux环境的目标工具链，对于你的需求而言就是3a4000<li>在linux环境编译运行于windows环境的目标工具链 以上3个步骤全部在linux环境下完成。</ol> <p>我给这3个步骤编写了两套编译脚本： 第一套就是本贴的mingw工具链的制作： https://github.com/hackpascal/mingw-builder 第二套是上述2、3步骤的脚本： https://github.com/hackpascal/toolchain-builder</p> <p>如果你能按照本帖编译出在linux运行的mingw工具链，那么就可以修改toolchain-builder来编译出linux环境的3a4000工具链，这一步完成后，应该就能顺利编译出运行在windows环境下的工具链了。</p> <ul><li>https://blog.hackpascal.net/2015/10/%e8%ae%b0%e4%b8%80%e6%ac%a1-mingw-w64-%e5%b7%a5%e5%85%b7%e9%93%be%e7%9a%84%e5%88%b6%e4%bd%9c%e8%bf%87%e7%a8%8b/</ul> <p>CRT runtime is a set of execution startup routines that perform initialization work before calling the program's main function. It is a basic runtime library/system.</p> <p>GCC ClooG is a free software tool that is used to generate code for loops in computer programs.</p> <p>ClooG stands for “Code Generation Library for Optimized Code Generation” and is used to generate code for loops that are optimized for performance. It is particularly useful for optimizing code that is executed frequently or that has a high level of complexity.</p> <p>GCC ClooG works by analyzing the structure of a loop and generating code that is optimized for the specific characteristics of the loop. It can generate code for loops that are written in C, C++, or other languages that are supported by GCC.</p> <p>To use GCC ClooG, you will need to install the GCC compiler on your computer and then invoke the ClooG tool from the command line. You will need to provide the source code for the loop that you want to optimize and specify any optimization options that you want to use. GCC ClooG will then generate optimized code for the loop, which you can incorporate into your program.</p> <p>fastcgi.server = ( ".php" => (( "socket" => "/var/run/php/php7.4-fpm.sock", "broken-scriptfilename" => "enable" )) )</p> <p>Err:16 http://linux.dropbox.com/debian bookworm InRelease</p> <p>Hit:5 https://linux-clients.seafile.com/seafile-deb/focal stable InRelease</p> <h1 id=root-x2>root@x2:~</h1> <h1 id=proxychains-sudo-apt-update>proxychains sudo apt update</h1> <p>[proxychains] config file found: /etc/proxychains4.conf [proxychains] preloading /usr/lib/x86_64-linux-gnu/libproxychains.so.4 [proxychains] DLL init: proxychains-ng 4.16</p> <h1 id=root-x2-1>root@x2:~</h1> <h1 id=proxychains-apt-update>proxychains apt update</h1> <p>[proxychains] config file found: /etc/proxychains4.conf [proxychains] preloading /usr/lib/x86_64-linux-gnu/libproxychains.so.4 [proxychains] DLL init: proxychains-ng 4.16 [proxychains] DLL init: proxychains-ng 4.16 [proxychains] DLL init: proxychains-ng 4.16 [proxychains] DLL init: proxychains-ng 4.16 [proxychains] DLL init: proxychains-ng 4.16 [proxychains] DLL init: proxychains-ng 4.16</p> <p>0% [Connecting to dl.google.com (224.0.0.1)] [Connecting to mirrors.ustc.edu.cn (224.0.0.1)] [Connecting [0% [Connecting to dl.google.com (224.0.0.1)] [Connecting to mirrors.ustc.edu.cn (224.0.0.1)] [Connecting &LT--socket error or timeout!</p> <p>快点超时，快点恢复。</p> <p>SSH 访问 Dropbear 提供 SSH 访问和 SCP 服务 Dropbear 实例 删除 接口 lan: 软件 VLAN: "eth0.1"无线网络: Master "pikachu" ▾ 仅监听指定的接口，未指定则监听全部 端口 22 密码验证</p> <p>允许 SSH 密码验证 允许 root 用户凭密码登录</p> <p>允许 root 用户凭密码登录 网关端口</p> <p>允许远程主机连接到本地 SSH 转发端口</p> <p>状态 系统 主机名 OpenWrt 型号 TP-Link TL-WR2041N v1 架构 Atheros AR9344 rev 2 固件版本 OpenWrt 19.07.7 r11306-c4a6851c72 / LuCI openwrt-19.07 branch git-21.044.30835-34e0d65 内核版本 4.14.221</p> <p>内存 可用数 已使用 已缓冲 已缓存 网络 IPv4 上游 协议: DHCP 客户端 地址: 10.151.24.27/23 网关: 10.151.24.1 DNS 1: 202.106.0.20 DNS 2: 114.114.114.114</p> <p>设备: 以太网适配器: "eth1" MAC 地址: 28:2C:B2:3F:8B:DE</p> <p>已分配的 DHCPv6 租约 主机 IPv6 地址 DUID 剩余租赁时间 DESKTOP-ORR1POT (DESKTOP-ORR1POT.lan) fd55:ef68:3c30::667 000100012a07982db083fe6fe8aa 8h 34m 43s helenyao fd55:ef68:3c30::a2a 00010001251a687eb083fe6ff8bb 4h 57m 49s DESKTOP-MANDY (DESKTOP-MANDY.lan)</p> <p>无线 radio0 类型: MAC80211 802.11bgn 信道: 11 (2.462 GHz) 传输速率: 91 Mbit/s 信号: -49 dBm / 质量: 87% SSID: pikachu 模式: Master BSSID: 28:2C:B2:3F:8B:DD 加密: WPA2 PSK (CCMP)</p> <p>radio0 类型: MAC80211 802.11bgn 信道: 11 (2.462 GHz) 传输速率: 90 Mbit/s 信号: -49 dBm / 质量: 87% SSID: pikachu 模式: Master BSSID: 28:2C:B2:3F:8B:DD 加密: WPA2 PSK (CCMP) 关联数: 8 已连接站点 网络 MAC 地址 主机 信号 / 噪声 接收速率 / 发送速率</p> <p>主设备 "pikachu" (wlan1) FC:B3:BC:58:A7:B9 debian12.lan (192.168.1.175, fe80::feb3:bcff:fe58:a7b9)</p> <p>-41/-95 dBm 130.0 Mbit/s, 20 MHz, MCS 15 57.8 Mbit/s, 20 MHz, MCS 5, Short GI</p> <p>主设备 "pikachu" (wlan1) BC:85:56:60:6A:93 x2.lan (192.168.1.168, fe80::96a2:352:586a:7c2b)</p> <p>-65/-95 dBm 52.0 Mbit/s, 20 MHz, MCS 5 58.5 Mbit/s, 20 MHz, MCS 6</p> <p>活动的 IPv4 路由 网络 目标 IPv4 网关 跃点数 表 wan 0.0.0.0/0 10.151.24.1 0 main wan 10.151.24.0/23 - 0 main lan 192.168.1.0/24 - 0 main</p> <p>Powered by LuCI openwrt-19.07 branch (git-21.044.30835-34e0d65) / OpenWrt 19.07.7 r11306-c4a6851c72</p> <p>uci add dropbear dropbear # =cfg024dd4</p> <p>刷新 负载 流量 无线 连接 eth0.1 eth1 br-lan eth0 wlan1</p> <p>$ ssh root@192.168.1.1 Unable to negotiate with 192.168.1.1 port 22: no matching host key type found. Their offer: ssh-rsa</p> <p>系统日志缓冲区大小 64 kiB 外部系统日志服务器地址 0.0.0.0 外部系统日志服务器端口 514 外部系统日志服务器协议</p> <p>UDP 将系统日志写入文件 /tmp/system.log 日志记录等级</p> <p>调试 Cron 日志级别</p> <p>调试</p> <p>ar93 状态 概览 防火墙 路由表 系统日志 内核日志 系统进程 实时信息 系统 系统 管理权 软件包 启动项 计划任务 LED 配置 备份/升级 重启 网络 接口 无线 交换机 DHCP/DNS 主机映射 静态路由 防火墙 网络诊断 退出 刷新 系统 此处配置设备的基础信息，如主机名称或时区。 系统属性 常规设置 日志 时间同步 语言和界面</p> <p>启用 NTP 客户端</p> <p>作为 NTP 服务器提供服务</p> <p>使用 DHCP 通告的服务器</p> <p>候选 NTP 服务器 0.openwrt.pool.ntp.org 1.openwrt.pool.ntp.org 2.openwrt.pool.ntp.org 3.openwrt.pool.ntp.org cn.pool.ntp.org ntp.sjtu.edu.cn</p> <ul><li></ul> <p>保存并应用 ▾ 保存 复位 Powered by LuCI openwrt-19.07 branch (git-21.044.30835-34e0d65) / OpenWrt 19.07.7 r11306-c4a6851c72</p> <p>ar93 状态 概览 防火墙 路由表 系统日志 内核日志 系统进程 实时信息 系统 系统 管理权 软件包 启动项 计划任务 LED 配置 备份/升级 重启 网络 接口 无线 交换机 DHCP/DNS 主机映射 静态路由 防火墙 网络诊断 退出 刷新 DHCP/DNS Dnsmasq 为 NAT 防火墙提供了一个集成的 DHCP 服务器和 DNS 转发器 服务器设置 常规设置 HOSTS 和解析文件 TFTP 设置 高级设置 静态地址分配 忽略空域名解析</p> <p>不转发没有 DNS 名称的解析请求 唯一授权</p> <p>这是本地网络中唯一的 DHCP 服务器 本地服务器 /lan/ 本地域名规则。与此域匹配的名称从不转发，仅从 DHCP 或 HOSTS 文件解析 本地域名 lan 本地域名后缀将添加到 DHCP 和 HOSTS 文件条目 记录查询日志</p> <p>将收到的 DNS 请求写入系统日志 DNS 转发 /example.org/10.1.2.3</p> <ul><li></ul> <p>将请求转发到的 DNS 服务器列表 重绑定保护</p> <p>丢弃 RFC1918 上行响应数据 允许本机</p> <p>允许 127.0.0.0/8 回环范围内的上行响应，例如：RBL 服务 域名白名单 ihost.netflix.com</p> <ul><li></ul> <p>允许 RFC1918 响应的域名列表 仅本地服务</p> <p>仅在网卡所属的子网中提供 DNS 服务。 非全部地址</p> <p>动态绑定到接口而不是通配符地址（推荐为 linux 默认值） 监听接口</p> <ul><li></ul> <p>仅监听这些接口和环回接口。 排除接口</p> <ul><li></ul> <p>不监听这些接口。</p> <p>尚无任何配置 保存并应用 ▾ 保存 复位 Powered by LuCI openwrt-19.07 branch (git-21.044.30835-34e0d65) / OpenWrt 19.07.7 r11306-c4a6851c72</p> <p>ar93 状态 概览 防火墙 路由表 系统日志 内核日志 系统进程 实时信息 系统 系统 管理权 软件包 启动项 计划任务 LED 配置 备份/升级 重启 网络 接口 无线 交换机 DHCP/DNS 主机映射 静态路由 防火墙 网络诊断 退出 刷新 DHCP/DNS Dnsmasq 为 NAT 防火墙提供了一个集成的 DHCP 服务器和 DNS 转发器 服务器设置 常规设置 HOSTS 和解析文件 TFTP 设置 高级设置 静态地址分配 不记录日志</p> <p>不记录这些协议的常规操作日志 顺序分配 IP</p> <p>从最低可用地址开始顺序分配 IP 地址 过滤本地包</p> <p>不转发本地网络的反向查询 过滤无用包</p> <p>不转发公共域名服务器无法回应的请求 本地化查询</p> <p>如果有多个 IP 可用，则根据请求来源的子网来本地化主机名 扩展 HOSTS 文件中的主机后缀</p> <p>添加本地域名后缀到 HOSTS 文件中的域名 禁用无效信息缓存</p> <p>不缓存无用的回应, 比如：不存在的域名 额外的 SERVERS 文件 此文件可能包含格式如“server=/domain/1.2.3.4”或“server=1.2.3.4”之类的行。前者为特定的域指定 DNS 服务器，后者则不限定服务器的解析范围。 严谨查序</p> <p>按照“解析文件”里的顺序查询 DNS 服务器 所有服务器</p> <p>查询所有可用的上游 DNS 服务器 忽略虚假空域名解析 67.215.65.132</p> <ul><li></ul> <p>允许虚假空域名响应的服务器列表 DNS 服务器端口 53 入站 DNS 查询端口 DNS 查询端口 任意 指定的 DNS 查询源端口 最大 DHCP 租约数量 无限制 允许的最大 DHCP 租用数 最大 EDNS0 数据包大小 1280 允许的最大 EDNS.0 UDP 数据包大小 最大并发查询数 150 允许的最大并发 DNS 查询数 DNS 查询缓存的大小 150 缓存的 DNS 条目数量（最大 10000，0 表示不缓存）</p> <p>尚无任何配置 保存并应用 ▾ 保存 复位 Powered by LuCI openwrt-19.07 branch (git-21.044.30835-34e0d65) / OpenWrt 19.07.7 r11306-c4a6851c72</p> <p>ar93 状态 概览 防火墙 路由表 系统日志 内核日志 系统进程 实时信息 系统 系统 管理权 软件包 启动项 计划任务 LED 配置 备份/升级 重启 网络 接口 无线 交换机 DHCP/DNS 主机映射 静态路由 防火墙 网络诊断 退出 刷新 交换机 本设备可以划分为多个 VLAN，并支持电脑间的直接通讯。VLAN 也常用于分割不同网段。默认通常是一条上行端口连接 ISP，其余端口为本地子网。 交换机 "switch0" (AR934X built-in switch) 启用 VLAN</p> <p>启用流入数据包镜像</p> <p>启用流出数据包镜像</p> <p>"switch0" 上的 VLAN (AR934X built-in switch) VLAN ID CPU (eth0) LAN 1 LAN 2 LAN 3 LAN 4 端口状态： 1000baseT 全双工 未连接 未连接 未连接 未连接 1</p> <p>已标记</p> <p>未标记</p> <p>未标记</p> <p>未标记</p> <p>未标记 删除 添加 VLAN 保存并应用 ▾ 保存 复位 Powered by LuCI openwrt-19.07 branch (git-21.044.30835-34e0d65) / OpenWrt 19.07.7 r11306-c4a6851c72</p> <p>ar93 状态 概览 防火墙 路由表 系统日志 内核日志 系统进程 实时信息 系统 系统 管理权 软件包 启动项 计划任务 LED 配置 备份/升级 重启 网络 接口 无线 交换机 DHCP/DNS 主机映射 静态路由 防火墙 网络诊断 退出 刷新 无线概况 radio0 Generic MAC80211 802.11bgn 信道: 11 (2.462 GHz) | 传输速率: 102.3 Mbit/s 重新启动 扫描 新增 -48/-95 dBm SSID: pikachu | 模式: Master BSSID: 28:2C:B2:3F:8B:DD | 加密: WPA2 PSK (CCMP) 禁用 编辑 移除 已连接站点 网络 MAC 地址 主机 信号/噪声 接收速率/发送速率 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) FC:B3:BC:58:A7:B9 debian12.lan (192.168.1.175, fe80::feb3:bcff:fe58:a7b9)</p> <p>-52/-95 dBm 144.4 Mbit/s, 20 MHz, MCS 15, Short GI 52.0 Mbit/s, 20 MHz, MCS 5 断开 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) 08:1F:71:3E:02:69 DESKTOP-ORR1POT.lan (192.168.1.124, fe80::51d4:c562:ebc9:f2ad)</p> <p>-51/-95 dBm 65.0 Mbit/s, 20 MHz, MCS 7 58.5 Mbit/s, 20 MHz, MCS 6 断开 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) A2:BB:DB:33:5A:DA 192.168.1.191</p> <p>-49/-95 dBm 24.0 Mbit/s, 20 MHz 117.0 Mbit/s, 20 MHz, MCS 14 断开 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) CA:88:96:AC:B0:76 192.168.1.242</p> <p>-48/-95 dBm 24.0 Mbit/s, 20 MHz 130.0 Mbit/s, 20 MHz, MCS 15 断开 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) 50:3D:C6:C5:02:12 M2007J17C.lan (192.168.1.198, fd55:ef68:3c30:0:dd98:de11:5e43:1f2)</p> <p>-42/-95 dBm 1.0 Mbit/s, 20 MHz 115.6 Mbit/s, 20 MHz, MCS 13, Short GI 断开 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) 22:19:0B:A3:DA:24 192.168.1.245</p> <p>-42/-95 dBm 24.0 Mbit/s, 20 MHz 130.0 Mbit/s, 20 MHz, MCS 14, Short GI 断开 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) BC:85:56:60:6A:93 x2.lan (192.168.1.168, fe80::96a2:352:586a:7c2b)</p> <p>-57/-95 dBm 52.0 Mbit/s, 20 MHz, MCS 5 72.2 Mbit/s, 20 MHz, MCS 7, Short GI 断开 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) 7E:C2:A3:D9:D2:A2 192.168.1.164</p> <p>-63/-95 dBm 24.0 Mbit/s, 20 MHz 144.4 Mbit/s, 20 MHz, MCS 15, Short GI 断开 保存并应用 ▾ 保存 复位 Powered by LuCI openwrt-19.07 branch (git-21.044.30835-34e0d65) / OpenWrt 19.07.7 r11306-c4a6851c72 无线网络: 主设备 "pikachu" (wlan1) 设备配置 基本设置 高级设置 状态</p> <p>-48/-95 dBm 模式: Master | SSID: pikachu BSSID: 28:2C:B2:3F:8B:DD 加密: WPA2 PSK (CCMP) 信道: 11 (2.462 GHz) 传输功率: 20 dBm 信号: -48 dBm | 噪声: -95 dBm 传输速率: 102.3 Mbit/s | 国家: 00 无线网络已启用 禁用</p> <p>工作频率 模式</p> <p>N 信道</p> <p>11 (2462 Mhz) 带宽</p> <p>20 MHz</p> <p>最大传输功率</p> <p>驱动默认</p> <ul><li>当前功率: 20 dBm 指定最大发射功率。依据监管要求和使用情况，驱动程序可能将实际发射功率限定在此值以下。 接口配置 基本设置 无线安全 MAC 过滤 高级设置 模式</ul> <p>接入点 AP ESSID pikachu 网络 lan: 软件 VLAN: "eth0.1"无线网络: Master "pikachu" ▾ 选择指派到此无线接口的网络，或者填写创建栏来新建网络。 隐藏 ESSID</p> <p>WMM 模式</p> <p>关闭 保存</p> <p>ar93 状态 概览 防火墙 路由表 系统日志 内核日志 系统进程 实时信息 系统 系统 管理权 软件包 启动项 计划任务 LED 配置 备份/升级 重启 网络 接口 无线 交换机 DHCP/DNS 主机映射 静态路由 防火墙 网络诊断 退出 刷新 无线概况 radio0 Generic MAC80211 802.11bgn 信道: 11 (2.462 GHz) | 传输速率: 103.8 Mbit/s 重新启动 扫描 新增 -49/-95 dBm SSID: pikachu | 模式: Master BSSID: 28:2C:B2:3F:8B:DD | 加密: WPA2 PSK (CCMP) 禁用 编辑 移除 已连接站点 网络 MAC 地址 主机 信号/噪声 接收速率/发送速率 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) FC:B3:BC:58:A7:B9 debian12.lan (192.168.1.175, fe80::feb3:bcff:fe58:a7b9)</p> <p>-49/-95 dBm 6.0 Mbit/s, 20 MHz 57.8 Mbit/s, 20 MHz, MCS 5, Short GI 断开 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) 08:1F:71:3E:02:69 DESKTOP-ORR1POT.lan (192.168.1.124, fe80::51d4:c562:ebc9:f2ad)</p> <p>-51/-95 dBm 58.5 Mbit/s, 20 MHz, MCS 6 72.2 Mbit/s, 20 MHz, MCS 7, Short GI 断开 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) A2:BB:DB:33:5A:DA 192.168.1.191</p> <p>-50/-95 dBm 24.0 Mbit/s, 20 MHz 117.0 Mbit/s, 20 MHz, MCS 14 断开 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) CA:88:96:AC:B0:76 192.168.1.242</p> <p>-48/-95 dBm 24.0 Mbit/s, 20 MHz 130.0 Mbit/s, 20 MHz, MCS 15 断开 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) 50:3D:C6:C5:02:12 M2007J17C.lan (192.168.1.198, fd55:ef68:3c30:0:dd98:de11:5e43:1f2)</p> <p>-44/-95 dBm 1.0 Mbit/s, 20 MHz 115.6 Mbit/s, 20 MHz, MCS 13, Short GI 断开 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) 22:19:0B:A3:DA:24 192.168.1.245</p> <p>-42/-95 dBm 24.0 Mbit/s, 20 MHz 130.0 Mbit/s, 20 MHz, MCS 14, Short GI 断开 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) BC:85:56:60:6A:93 x2.lan (192.168.1.168, fe80::96a2:352:586a:7c2b)</p> <p>-60/-95 dBm 39.0 Mbit/s, 20 MHz, MCS 4 52.0 Mbit/s, 20 MHz, MCS 5 断开 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) 7E:C2:A3:D9:D2:A2 192.168.1.164</p> <p>-63/-95 dBm 24.0 Mbit/s, 20 MHz 144.4 Mbit/s, 20 MHz, MCS 15, Short GI 断开 保存并应用 ▾ 保存 复位 Powered by LuCI openwrt-19.07 branch (git-21.044.30835-34e0d65) / OpenWrt 19.07.7 r11306-c4a6851c72 无线网络: 主设备 "pikachu" (wlan1) 设备配置 基本设置 高级设置 状态</p> <p>-49/-95 dBm 模式: Master | SSID: pikachu BSSID: 28:2C:B2:3F:8B:DD 加密: WPA2 PSK (CCMP) 信道: 11 (2.462 GHz) 传输功率: 20 dBm 信号: -49 dBm | 噪声: -95 dBm 传输速率: 103.8 Mbit/s | 国家: 00 无线网络已启用 禁用</p> <p>工作频率 模式</p> <p>N 信道</p> <p>11 (2462 Mhz) 带宽</p> <p>20 MHz</p> <p>最大传输功率</p> <p>驱动默认</p> <ul><li>当前功率: 20 dBm 指定最大发射功率。依据监管要求和使用情况，驱动程序可能将实际发射功率限定在此值以下。 接口配置 基本设置 无线安全 MAC 过滤 高级设置 加密</ul> <p>WPA2-PSK (强安全性) 算法</p> <p>自动 密钥 ••••••••••• ∗ 启用密钥重新安装（KRACK）对策</p> <p>通过禁用用于安装密钥的 EAPOL-Key 帧的重新传输，来增加客户端密钥重安装攻击的复杂度。此解决方法可能会导致互操作性问题，并降低密钥协商的可靠性，特别是在流量负载较重的环境中。 关闭 保存</p> <p>ar93 状态 概览 防火墙 路由表 系统日志 内核日志 系统进程 实时信息 系统 系统 管理权 软件包 启动项 计划任务 LED 配置 备份/升级 重启 网络 接口 无线 交换机 DHCP/DNS 主机映射 静态路由 防火墙 网络诊断 退出 刷新 无线概况 radio0 Generic MAC80211 802.11bgn 信道: 11 (2.462 GHz) | 传输速率: 103.9 Mbit/s 重新启动 扫描 新增 -51/-95 dBm SSID: pikachu | 模式: Master BSSID: 28:2C:B2:3F:8B:DD | 加密: WPA2 PSK (CCMP) 禁用 编辑 移除 已连接站点 网络 MAC 地址 主机 信号/噪声 接收速率/发送速率 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) FC:B3:BC:58:A7:B9 debian12.lan (192.168.1.175, fe80::feb3:bcff:fe58:a7b9)</p> <p>-48/-95 dBm 6.0 Mbit/s, 20 MHz 65.0 Mbit/s, 20 MHz, MCS 7 断开 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) 08:1F:71:3E:02:69 DESKTOP-ORR1POT.lan (192.168.1.124, fe80::51d4:c562:ebc9:f2ad)</p> <p>-50/-95 dBm 72.2 Mbit/s, 20 MHz, MCS 7, Short GI 72.2 Mbit/s, 20 MHz, MCS 7, Short GI 断开 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) A2:BB:DB:33:5A:DA 192.168.1.191</p> <p>-49/-95 dBm 24.0 Mbit/s, 20 MHz 117.0 Mbit/s, 20 MHz, MCS 14 断开 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) CA:88:96:AC:B0:76 192.168.1.242</p> <p>-48/-95 dBm 24.0 Mbit/s, 20 MHz 130.0 Mbit/s, 20 MHz, MCS 15 断开 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) 50:3D:C6:C5:02:12 M2007J17C.lan (192.168.1.198, fd55:ef68:3c30:0:dd98:de11:5e43:1f2)</p> <p>-43/-95 dBm 1.0 Mbit/s, 20 MHz 115.6 Mbit/s, 20 MHz, MCS 13, Short GI 断开 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) 22:19:0B:A3:DA:24 192.168.1.245</p> <p>-42/-95 dBm 24.0 Mbit/s, 20 MHz 130.0 Mbit/s, 20 MHz, MCS 14, Short GI 断开 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) BC:85:56:60:6A:93 x2.lan (192.168.1.168, fe80::96a2:352:586a:7c2b)</p> <p>-64/-95 dBm 39.0 Mbit/s, 20 MHz, MCS 4 58.5 Mbit/s, 20 MHz, MCS 6 断开 Generic MAC80211 802.11bgn Wireless Controller (radio0) 主设备 "pikachu" (wlan1) 7E:C2:A3:D9:D2:A2 192.168.1.164</p> <p>-69/-95 dBm 1.0 Mbit/s, 20 MHz 144.4 Mbit/s, 20 MHz, MCS 15, Short GI 断开 保存并应用 ▾ 保存 复位 Powered by LuCI openwrt-19.07 branch (git-21.044.30835-34e0d65) / OpenWrt 19.07.7 r11306-c4a6851c72 无线网络: 主设备 "pikachu" (wlan1) 设备配置 基本设置 高级设置</p> <p>国家代码</p> <p>00 - World 允许传统的 802.11b 速率</p> <p>距离优化 auto 最远网络用户的距离（米）。 分片阈值 关 RTS/CTS 阈值 关 强制 40MHz 模式</p> <p>即使辅助信道重叠，也始终使用 40MHz 信道。使用此选项不符合 IEEE 802.11n-2009！ Beacon 间隔 100 接口配置 基本设置 无线安全 MAC 过滤 高级设置 隔离客户端</p> <p>禁止客户端间通信 接口名称 wlan1 重设默认接口名称 Short Preamble</p> <p>DTIM 间隔 2 发送流量指示消息间隔 重新加密 GTK 的时间间隔 600 秒 禁用不活动轮询</p> <p>非活动站点限制 300 秒 允许的最大监听间隔 65535 在低 Ack 应答时断开连接</p> <p>允许 AP 模式时在 low ACK 的情况下断开无线终端 关闭 保存</p> <p>ar93 状态 概览 防火墙 路由表 系统日志 内核日志 系统进程 实时信息 系统 系统 管理权 软件包 启动项 计划任务 LED 配置 备份/升级 重启 网络 接口 无线 交换机 DHCP/DNS 主机映射 静态路由 防火墙 网络诊断 退出 刷新 接口 全局网络选项 接口 LAN</p> <p>类型: 桥接 设备: br-lan 已连接: 是 MAC: 28:2C:B2:3F:8B:DB 接收: 5.19 GB (21022404 数据包) 发送: 38.07 GB (32438300 数据包) ( 类型: 软件 VLAN 设备: eth0.1 已连接: 是 MAC: 28:2C:B2:3F:8B:DB 接收: 0 B (0 数据包) 发送: 0 B (0 数据包)</p> <p>类型: 无线适配器 设备: wlan1 已连接: 是 MAC: 28:2C:B2:3F:8B:DD 接收: 5.49 GB (21028568 数据包) 发送: 38.99 GB (32612196 数据包) ) br-lan 协议: 静态地址 运行时间: 2d 23h 55m 50s MAC: 28:2C:B2:3F:8B:DB 接收: 5.19 GB (21022404 数据包) 发送: 38.07 GB (32438300 数据包) IPv4: 192.168.1.1/24 IPv6: fd55:ef68:3c30::1/60 重新启动 停止 编辑 删除 WAN</p> <p>类型: 以太网适配器 设备: eth1 已连接: 是 MAC: 28:2C:B2:3F:8B:DE 接收: 3.76 GB (32704607 数据包) 发送: 1.05 GB (20316610 数据包)</p> <p>eth1 协议: DHCP 客户端 运行时间: 2d 23h 55m 44s MAC: 28:2C:B2:3F:8B:DE 接收: 3.76 GB (32704607 数据包) 发送: 1.05 GB (20316610 数据包) IPv4: 10.151.24.27/23 重新启动 停止 编辑 删除 WAN6</p> <p>类型: 以太网适配器 设备: eth1 已连接: 是 MAC: 28:2C:B2:3F:8B:DE 接收: 3.76 GB (32704607 数据包) 发送: 1.05 GB (20316610 数据包)</p> <p>eth1 协议: DHCPv6 客户端 MAC: 28:2C:B2:3F:8B:DE 接收: 3.76 GB (32704607 数据包) 发送: 1.05 GB (20316610 数据包) 重新启动 停止 编辑 删除 添加新接口… 保存并应用 ▾ 保存 复位 Powered by LuCI openwrt-19.07 branch (git-21.044.30835-34e0d65) / OpenWrt 19.07.7 r11306-c4a6851c72</p> <p>ar93 状态 概览 防火墙 路由表 系统日志 内核日志 系统进程 实时信息 系统 系统 管理权 软件包 启动项 计划任务 LED 配置 备份/升级 重启 网络 接口 无线 交换机 DHCP/DNS 主机映射 静态路由 防火墙 网络诊断 退出 刷新 接口 全局网络选项 接口 LAN</p> <p>类型: 桥接 设备: br-lan 已连接: 是 MAC: 28:2C:B2:3F:8B:DB 接收: 5.19 GB (21024151 数据包) 发送: 38.07 GB (32439606 数据包) ( 类型: 软件 VLAN 设备: eth0.1 已连接: 是 MAC: 28:2C:B2:3F:8B:DB 接收: 0 B (0 数据包) 发送: 0 B (0 数据包)</p> <p>类型: 无线适配器 设备: wlan1 已连接: 是 MAC: 28:2C:B2:3F:8B:DD 接收: 5.49 GB (21030315 数据包) 发送: 38.99 GB (32613533 数据包) ) br-lan 协议: 静态地址 运行时间: 2d 23h 56m 30s MAC: 28:2C:B2:3F:8B:DB 接收: 5.19 GB (21024151 数据包) 发送: 38.07 GB (32439606 数据包) IPv4: 192.168.1.1/24 IPv6: fd55:ef68:3c30::1/60 重新启动 停止 编辑 删除 WAN</p> <p>类型: 以太网适配器 设备: eth1 已连接: 是 MAC: 28:2C:B2:3F:8B:DE 接收: 3.76 GB (32705799 数据包) 发送: 1.05 GB (20318190 数据包)</p> <p>eth1 协议: DHCP 客户端 运行时间: 2d 23h 56m 24s MAC: 28:2C:B2:3F:8B:DE 接收: 3.76 GB (32705799 数据包) 发送: 1.05 GB (20318190 数据包) IPv4: 10.151.24.27/23 重新启动 停止 编辑 删除 WAN6</p> <p>类型: 以太网适配器 设备: eth1 已连接: 是 MAC: 28:2C:B2:3F:8B:DE 接收: 3.76 GB (32705799 数据包) 发送: 1.05 GB (20318190 数据包)</p> <p>eth1 协议: DHCPv6 客户端 MAC: 28:2C:B2:3F:8B:DE 接收: 3.76 GB (32705799 数据包) 发送: 1.05 GB (20318190 数据包) 重新启动 停止 编辑 删除 添加新接口… 保存并应用 ▾ 保存 复位 Powered by LuCI openwrt-19.07 branch (git-21.044.30835-34e0d65) / OpenWrt 19.07.7 r11306-c4a6851c72 接口 » LAN 常规设置 高级设置 物理设置 防火墙设置 DHCP 服务器 状态 桥接 设备: br-lan 运行时间: 2d 23h 56m 30s MAC: 28:2C:B2:3F:8B:DB 接收: 5.19 GB (21024151 数据包) 发送: 38.07 GB (32439606 数据包) IPv4: 192.168.1.1/24 IPv6: fd55:ef68:3c30::1/60 协议</p> <p>静态地址 开机自动运行</p> <p>IPv4 地址 192.168.1.1 … IPv4 子网掩码 255.255.255.0 ▾ IPv4 网关 10.151.24.1 (wan) IPv4 广播 192.168.1.255 使用自定义的 DNS 服务器</p> <ul><li></ul> <p>IPv6 分配长度 60 ▾ 将每个公共 IPv6 前缀的给定长度部分分配给此接口 IPv6 分配提示 0 将此十六进制子 ID 前缀分配给此接口。 IPv6 后缀 ::1 可选，允许的值：“eui64”、“random”和其他固定值（例如：“::1”或“::1:2”）。当从授权服务器获取到 IPv6 前缀（如“a:b:c:d::”），使用后缀（如 “::1”）合成 IPv6 地址（“a:b:c:d::1”）分配给此接口。 关闭 保存</p> <p>ar93 状态 概览 防火墙 路由表 系统日志 内核日志 系统进程 实时信息 系统 系统 管理权 软件包 启动项 计划任务 LED 配置 备份/升级 重启 网络 接口 无线 交换机 DHCP/DNS 主机映射 静态路由 防火墙 网络诊断 退出 刷新 接口 全局网络选项 接口 LAN</p> <p>类型: 桥接 设备: br-lan 已连接: 是 MAC: 28:2C:B2:3F:8B:DB 接收: 5.19 GB (21024575 数据包) 发送: 38.07 GB (32439822 数据包) ( 类型: 软件 VLAN 设备: eth0.1 已连接: 是 MAC: 28:2C:B2:3F:8B:DB 接收: 0 B (0 数据包) 发送: 0 B (0 数据包)</p> <p>类型: 无线适配器 设备: wlan1 已连接: 是 MAC: 28:2C:B2:3F:8B:DD 接收: 5.49 GB (21030740 数据包) 发送: 38.99 GB (32613753 数据包) ) br-lan 协议: 静态地址 运行时间: 2d 23h 56m 45s MAC: 28:2C:B2:3F:8B:DB 接收: 5.19 GB (21024575 数据包) 发送: 38.07 GB (32439822 数据包) IPv4: 192.168.1.1/24 IPv6: fd55:ef68:3c30::1/60 重新启动 停止 编辑 删除 WAN</p> <p>类型: 以太网适配器 设备: eth1 已连接: 是 MAC: 28:2C:B2:3F:8B:DE 接收: 3.76 GB (32705987 数据包) 发送: 1.05 GB (20318563 数据包)</p> <p>eth1 协议: DHCP 客户端 运行时间: 2d 23h 56m 39s MAC: 28:2C:B2:3F:8B:DE 接收: 3.76 GB (32705987 数据包) 发送: 1.05 GB (20318563 数据包) IPv4: 10.151.24.27/23 重新启动 停止 编辑 删除 WAN6</p> <p>类型: 以太网适配器 设备: eth1 已连接: 是 MAC: 28:2C:B2:3F:8B:DE 接收: 3.76 GB (32705987 数据包) 发送: 1.05 GB (20318563 数据包)</p> <p>eth1 协议: DHCPv6 客户端 MAC: 28:2C:B2:3F:8B:DE 接收: 3.76 GB (32705987 数据包) 发送: 1.05 GB (20318563 数据包) 重新启动 停止 编辑 删除 添加新接口… 保存并应用 ▾ 保存 复位 Powered by LuCI openwrt-19.07 branch (git-21.044.30835-34e0d65) / OpenWrt 19.07.7 r11306-c4a6851c72 接口 » LAN 常规设置 高级设置 物理设置 防火墙设置 DHCP 服务器</p> <p>桥接接口</p> <p>为指定接口创建桥接 开启 STP</p> <p>在此桥接上启用生成树协议 启用 IGMP 嗅探</p> <p>在此桥接上启用 IGMP 窥探 接口 交换机 VLAN: "eth0.1" eth0.1 无线网络: Master "pikachu" wlan1 ▾ 关闭 保存 ar93 状态 概览 防火墙 路由表 系统日志 内核日志 系统进程 实时信息 系统 系统 管理权 软件包 启动项 计划任务 LED 配置 备份/升级 重启 网络 接口 无线 交换机 DHCP/DNS 主机映射 静态路由 防火墙 网络诊断 退出 刷新 接口 全局网络选项 接口 LAN</p> <p>类型: 桥接 设备: br-lan 已连接: 是 MAC: 28:2C:B2:3F:8B:DB 接收: 5.19 GB (21024932 数据包) 发送: 38.07 GB (32439996 数据包) ( 类型: 软件 VLAN 设备: eth0.1 已连接: 是 MAC: 28:2C:B2:3F:8B:DB 接收: 0 B (0 数据包) 发送: 0 B (0 数据包)</p> <p>类型: 无线适配器 设备: wlan1 已连接: 是 MAC: 28:2C:B2:3F:8B:DD 接收: 5.49 GB (21031096 数据包) 发送: 38.99 GB (32613927 数据包) ) br-lan 协议: 静态地址 运行时间: 2d 23h 57m 0s MAC: 28:2C:B2:3F:8B:DB 接收: 5.19 GB (21024932 数据包) 发送: 38.07 GB (32439996 数据包) IPv4: 192.168.1.1/24 IPv6: fd55:ef68:3c30::1/60 重新启动 停止 编辑 删除 WAN</p> <p>类型: 以太网适配器 设备: eth1 已连接: 是 MAC: 28:2C:B2:3F:8B:DE 接收: 3.76 GB (32706129 数据包) 发送: 1.05 GB (20318877 数据包)</p> <p>eth1 协议: DHCP 客户端 运行时间: 2d 23h 56m 54s MAC: 28:2C:B2:3F:8B:DE 接收: 3.76 GB (32706129 数据包) 发送: 1.05 GB (20318877 数据包) IPv4: 10.151.24.27/23 重新启动 停止 编辑 删除 WAN6</p> <p>类型: 以太网适配器 设备: eth1 已连接: 是 MAC: 28:2C:B2:3F:8B:DE 接收: 3.76 GB (32706129 数据包) 发送: 1.05 GB (20318877 数据包)</p> <p>eth1 协议: DHCPv6 客户端 MAC: 28:2C:B2:3F:8B:DE 接收: 3.76 GB (32706129 数据包) 发送: 1.05 GB (20318877 数据包) 重新启动 停止 编辑 删除 添加新接口… 保存并应用 ▾ 保存 复位 Powered by LuCI openwrt-19.07 branch (git-21.044.30835-34e0d65) / OpenWrt 19.07.7 r11306-c4a6851c72 接口 » LAN 常规设置 高级设置 物理设置 防火墙设置 DHCP 服务器</p> <p>基本设置 高级设置 IPv6 设置 忽略此接口</p> <p>不在此接口提供 DHCP 服务。 启动 100 网络地址的起始分配基址。 客户数 150 最大地址分配数量。 租期 12h 租用地址的到期时间，最短 2 分钟（2m）。 关闭 保存</p> <p>ar93 状态 概览 防火墙 路由表 系统日志 内核日志 系统进程 实时信息 系统 系统 管理权 软件包 启动项 计划任务 LED 配置 备份/升级 重启 网络 接口 无线 交换机 DHCP/DNS 主机映射 静态路由 防火墙 网络诊断 退出 刷新 接口 全局网络选项 接口 LAN</p> <p>类型: 桥接 设备: br-lan 已连接: 是 MAC: 28:2C:B2:3F:8B:DB 接收: 5.19 GB (21025455 数据包) 发送: 38.07 GB (32440313 数据包) ( 类型: 软件 VLAN 设备: eth0.1 已连接: 是 MAC: 28:2C:B2:3F:8B:DB 接收: 0 B (0 数据包) 发送: 0 B (0 数据包)</p> <p>类型: 无线适配器 设备: wlan1 已连接: 是 MAC: 28:2C:B2:3F:8B:DD 接收: 5.49 GB (21031619 数据包) 发送: 38.99 GB (32614263 数据包) ) br-lan 协议: 静态地址 运行时间: 2d 23h 57m 15s MAC: 28:2C:B2:3F:8B:DB 接收: 5.19 GB (21025455 数据包) 发送: 38.07 GB (32440313 数据包) IPv4: 192.168.1.1/24 IPv6: fd55:ef68:3c30::1/60 重新启动 停止 编辑 删除 WAN</p> <p>类型: 以太网适配器 设备: eth1 已连接: 是 MAC: 28:2C:B2:3F:8B:DE 接收: 3.76 GB (32706417 数据包) 发送: 1.05 GB (20319343 数据包)</p> <p>eth1 协议: DHCP 客户端 运行时间: 2d 23h 57m 9s MAC: 28:2C:B2:3F:8B:DE 接收: 3.76 GB (32706417 数据包) 发送: 1.05 GB (20319343 数据包) IPv4: 10.151.24.27/23 重新启动 停止 编辑 删除 WAN6</p> <p>类型: 以太网适配器 设备: eth1 已连接: 是 MAC: 28:2C:B2:3F:8B:DE 接收: 3.76 GB (32706417 数据包) 发送: 1.05 GB (20319343 数据包)</p> <p>eth1 协议: DHCPv6 客户端 MAC: 28:2C:B2:3F:8B:DE 接收: 3.76 GB (32706417 数据包) 发送: 1.05 GB (20319343 数据包) 重新启动 停止 编辑 删除 添加新接口… 保存并应用 ▾ 保存 复位 Powered by LuCI openwrt-19.07 branch (git-21.044.30835-34e0d65) / OpenWrt 19.07.7 r11306-c4a6851c72 接口 » LAN 常规设置 高级设置 物理设置 防火墙设置 DHCP 服务器</p> <p>基本设置 高级设置 IPv6 设置 动态 DHCP</p> <p>为所有客户端提供 DHCP 服务。如果禁用，将只对具有静态租约的客户提供服务。 强制</p> <p>即使检测到另一台服务器，也要强制使用此网络上的 DHCP。 IPv4 子网掩码 255.255.255.0 重设发送到客户端的子网掩码。 DHCP 选项</p> <ul><li></ul> <p>设置 DHCP 的附加选项，例如设定 "6,192.168.2.1,192.168.2.2" 表示通告不同的 DNS 服务器给客户端。 关闭 保存</p> <p>$ ssh -V OpenSSH_9.2p1 Debian-2, OpenSSL 3.0.8 7 Feb 2023</p> <p>$ ssh -oHostKeyAlgorithms=+ssh-rsa -oPubkeyAcceptedAlgorithms=+ssh-rsa -i ~/.ssh/aur root@192.168.1.1 The authenticity of host '192.168.1.1 (192.168.1.1)' can't be established. RSA key fingerprint is SHA256:OtYkuRC8nFC3+3RWqmkTWEtyMy5OblbSguhw7WpUdPk. This key is not known by any other names. Are you sure you want to continue connecting (yes/no/[fingerprint])? yes Warning: Permanently added '192.168.1.1' (RSA) to the list of known hosts. sh: /usr/bin/xauth: not found</p> <p>BusyBox v1.30.1 () built-in shell (ash)</p> <hr> <h2 id=w-i-r-e-l-e-s-s-f-r-e-e-d-o-m>| |.-----.-----.-----.| | | |.----.| |_ | - || _ | -<strong>| || | | || <em>|| <em>| |</em></em></strong><em><strong>|| <strong>|</strong></strong></em>|<strong>|</strong>||<strong><strong><strong><strong>||</strong>| |</strong></strong>| |</strong>| W I R E L E S S F R E E D O M</h2> <h2 id=openwrt-19-07-7-r11306-c4a6851c72>OpenWrt 19.07.7, r11306-c4a6851c72</h2> <p>root@ar93:<del># ssh -V Dropbear v2019.78 root@ar93:</del>#</p> <p>修改文件里面的1:6为1:10，保存文件，重启rsyslog服务</p> <p>/etc/rsyslog.conf<br> $template mytemplate, "%timegenerated:1:6%</p> <p>$ sudo systemctl restart rsyslog</p> <p>no matching host key type found. Their offer: ssh-rsa,ssh-dss when I tried to connect to a domain. Adding Quote: HostKeyAlgorithms +ssh-rsa,ssh-dss to /etc/ssh_config cleared the error</p> <p>Note that the method described above is not a fix but an unsafe work-around to buy you enough time to log in and really fix the problem correctly.</p> <p>The correct solution is to upgrade OpenSSH on the server, using backports if necessary. Those old algorithms have been removed with plenty of advanced warning so that should have been done long ago. They have been considered unsafe for a long time.</p> <p>after adding ssh-rsa to my .ssh/config file, I got Quote: user@x.x.x.x: Permission denied (publickey). Fixed by adding PubkeyAcceptedKeyTypes to my .ssh/config Quote: HostKeyAlgorithms ssh-rsa PubkeyAcceptedKeyTypes ssh-rsa At least I regain access to change to a more secure algorithm.</p> <p>ssh -v -oHostKeyAlgorithms=+ssh-rsa username@ipaddress</p> <p>I had to create ~/.ssh/config and add these lines to it.</p> <p>Host 123.123.123.123 KexAlgorithms=+diffie-hellman-group-exchange-sha1 Host 123.123.123.123 HostKeyAlgorithms=+ssh-rsa</p> <p>Host oldserver</p> <h1 id=solve-the-host-key-error-on-ancient-server>solve the "host key" error on ancient server</h1> <p>HostKeyAlgorithms=+ssh-rsa,ssh-dss</p> <h1 id=use-key-and-eliminate-password-prompt-on-ancient-server>use key and eliminate password prompt on ancient server</h1> <p>PubkeyAcceptedAlgorithms=+ssh-rsa,ssh-dss</p> <p>With SSH, there are several different types of keys and RSA keys (the ssh-rsa) kind can support multiple kinds of signatures. The signature type ssh-rsa refers to RSA with SHA-1, whereas the signature type rsa-sha2-256 is RSA with SHA-256 and rsa-sha2-512 is RSA with SHA-512.</p> <p>In the case of Azure DevOps, it only supports the kind of RSA with SHA-1, and SHA-1 is considered very weak. This essentially means that there are no secure ways to connect to it over SSH, and until they fix that, you're better off using HTTPS or a different hosting service. GitHub, GitLab, and Bitbucket all support secure methods of authentication.</p> <p>If you really need to use SSH with Azure DevOps at the moment, you can add an entry to your ~/.ssh/config file to work around this:</p> <p>Host ssh.dev.azure.com User git PubkeyAcceptedAlgorithms +ssh-rsa HostkeyAlgorithms +ssh-rsa However, be aware that this is a workaround and it's known to be insecure, so you should contact Azure DevOps about this problem and switch to HTTPS until they do, or move elsewhe</p> <p>64 bytes from 192.168.1.152: icmp_seq=7 ttl=64 time=1.86 ms<br> From 169.254.243.97: icmp_seq=15 Redirect Host(New nexthop: 192.168.1.152)<br> 64 bytes from 192.168.1.152: icmp_seq=16 ttl=64 time=98.8 ms</p> <p>-$template mytemplate, "%timegenerated:1:6% %$year% %timegenerated:8:15% %$myhostname% %programname% %syslogfacility-text%.%syslogpriority-text% :%msg%\n" -$template servertemplate, "<%PRI%>%timegenerated:1:6% %timegenerated:8:15% %$myhostname% :%msg%" +$template mytemplate, "%timegenerated:1:10:date-rfc3339% %timegenerated:12:23:date-rfc3339% %HOSTNAME% %syslogfacility-text%.%syslogpriority-text% :%msg%\n" +$template servertemplate, "<%PRI%>%HOSTNAME% %timegenerated:1:10:date-rfc3339% %timegenerated:12:23:date-rfc3339% %syslogfacility-text%.%syslogpriority-text% :%msg%"</p> <p>12345678</p> <p>sendto in send_ip_packet_sd: sendto(4, packet, 44, 0, 10.151.0.0, 16) => Network is unreachable<br> Offending packet: TCP 10.151.54.101:52530 > 10.151.0.0:6543 S ttl=41 id=42932 iplen=44 seq=2466713721 win=1024 &LTmss 1460><br> sendto in send_ip_packet_sd: sendto(4, packet, 44, 0, 10.151.0.3, 16) => Network is unreachable<br> Offending packet: TCP 10.151.54.101:52530 > 10.151.0.3:10621 S ttl=50 id=21350 iplen=44 seq=2466713721 win=1024 &LTmss 1460><br> sendto in send_ip_packet_sd: sendto(4, packet, 44, 0, 10.151.0.6, 16) => Network is unreachable<br> Offending packet: TCP 10.151.54.101:52530 > 10.151.0.6:617 S ttl=46 id=5440 iplen=44 seq=2466713721 win=1024 &LTmss 1460><br> sendto in send_ip_packet_sd: sendto(4, packet, 44, 0, 10.151.0.9, 16) => Network is unreachable<br> Offending packet: TCP 10.151.54.101:52530 > 10.151.0.9:3920 S ttl=46 id=54123 iplen=44 seq=2466713721 win=1024 &LTmss 1460><br> sendto in send_ip_packet_sd: sendto(4, packet, 44, 0, 10.151.0.12, 16) => Network is unreachable<br> Offending packet: TCP 10.151.54.101:52530 > 10.151.0.12:1069 S ttl=46 id=32418 iplen=44 seq=2466713721 win=1024 &LTmss 1460><br> Omitting future Sendto error messages now that 10 have been shown. Use -d2 if you really want to see them.<br> Stats: 2:12:58 elapsed; 0 hosts completed (64 up), 64 undergoing SYN Stealth Scan<br> SYN Stealth Scan Timing: About 54.42% done; ETC: 18:49 (1:51:17 remaining)</p> <p>GPON</p> <p>EPON</p> <p>TDMA</p> <p>125us frame length</p> <p>PLC</p> <p>PON是Passive Optical Network 无源光网络，一种点对多点网络结构，是实现FTTB／FTTH的主要技术。无源光网络中指ODN（光配线网）仅使用光纤和无源组件，只需要在信号源和信号接收端使用带电的设备。在典型的PON系统中，分光器是核心，利用分光器来分离和收集通过网络传输的光信号。</p> <p>PON的分路器是双向的</p> <ul><li>在下行方向，IP数据、语音、视频等多种业务由位于中心局的OLT，采用广播方式，通过ODN中的1：N无源光分配器分配到PON上的所有ONU单元<li>在上行方向，来自各个ONU的多种业务信息互不干扰地通过ODN中的1：N无源光合路器耦合到同一根光纤，最终送到位于局端OLT接收端。</ul> <p>PON是一种采用点到多点（P2MP）结构的单纤双向光接入网络。PON系统由局端的光线路终端（OLT）、光分配网络（ODN）和用户侧的光网络单元（ONU）组成，为单纤双向系统。在下行方向（OLT到ONU），OLT发送的信号通过ODN到达各个ONU。在上行方向（ONU到OLT），ONU发送的信号只会到达OLT，而不会到达其他ONU。为了避免数据冲突并提高网络效率，上行方向采用TDMA多址接入方式，并对各ONU的数据发送进行管理。ODN在OLT和ONU间提供光通道。</p> <ol start=2><li>方案价值</ol> <ul><li>高可靠性，设备支持双主控、双电源冗余备份，多重上行链路保护，提供安全可靠的运行环境。<li>智能部署运维，支持OMCI配置远程下发，业务部署和运维一站式集成，快速完成业务开通、诊断和验收。<li>面向未来的极致体验，满足千兆接入能力，保证4K视频等高带宽业务无卡顿。<li>光纤替代铜缆、无源替代有源；降低设备能耗，减少运维成本，节省布线空间。<li>技术和带宽的平滑演进，保护用户投资。<li>网络设备支持多种安全协议，保障网络免受异常攻击的影响。</ul> <ol start=3><li>PON网络优势 [Image] 优势：高带宽 低成本 抗干扰 易运维 易铺设 易升级 [Image]</ol> <ul><li>点到点网络(P2P)：网络传输成本高、浪费光纤资源<li>路边交换网络：光纤到路边交换机，降低了传输成本，但在接入侧增加了带电设备，增加了故障点，也相应的增加了维护成本<li>无源光网络(PON)：采用点到多点的组网方式，不仅降低了传输成本，也避免了接入侧故障点的增加</ul> <p>Methods of emulation Network emulation is the act of testing the behavior of a network (5G, wireless, MANETs, etc) in a lab. A personal computer or virtual machine runs software to perform the network emulation; a dedicated emulation device is sometimes used for link emulation.</p> <p>Networks introduce delay, errors, and drop packets. The primary goal of network emulation is to create an environment whereby users can connect the devices, applications, products, and/or services being tested to validate their performance, stability, or functionality against real-world network scenarios. Once tested in a controlled environment against actual network conditions, users can have confidence that the item being tested will perform as expected.</p> <p>Emulation, simulation, and traffic generation Emulation differs from simulation in that a network emulator appears to be a network; end-systems such as computers can be attached to the emulator and will behave as if they are attached to a network. A network emulator mirrors the network which connects end-systems, not the end-systems themselves.</p> <p>Network simulators are typically programs that run on a single computer, take an abstract description of the network traffic such as a flow arrival process, and yield performance statistics such as throughput, delay, loss etc.</p> <p>These products are typically found in the Development and QA environments of Service Providers, Network Equipment Manufacturers, and Enterprises.</p> <p>Network emulation software Software developers typically want to analyze the response time and sensitivity to packet loss of client-server applications and emulate specific network effects (of 5G, Smart homes, industrial IOT, military networks, etc.,) with different round-trip-times, throughputs, bit error rates, and packet drops.</p> <p>Two open-source network emulators are Common Open Research Emulator (CORE) and Extendable Mobile Ad hoc Network Emulator (EMANE). They both support operation as network black boxes, i.e. external machines/devices can be hooked up to the emulated network with no knowledge of emulation. They also support both wired and wireless network emulation with various degrees of fidelity. A CORE is more useful for quick network layouts (layer 3 and above) and single-machine emulation. EMANE is better suited for distributed high-fidelity large-scale network emulation (layers 1/2).</p> <p>The most popular network simulation software packages, OPNET and Tetcos NetSim, also have emulation modules for real-time device connectivity. In general simulation tools with emulation capabilities provide more sophistication than emulation devices. Emulation devices only provide for emulation of the physical link and do not factor in the effects of the higher layers (MAC, network, transport, etc.). Simulation tools however model effects from different layers of the network stack when running in emulation mode. They would allow for connecting multiple sources/destinations, routers, base stations, MANET protocols, etc.</p> <p>Traffic generation software The network performance under maximum throughput conditions can be analyzed by network traffic measurement in a testbed network, using a network traffic generator such as iperf. The traffic generator sends dummy packets, often with a unique packet identifier, making it possible to keep track of the packet delivery in the network using a network analyzer.</p> <p>riting Bash scripts, it's important to handle options and arguments effectively to make your scripts user-friendly and versatile. There are several ways to do this, but the most common methods include using getopts, getopt, or manually parsing arguments. Here's a brief overview of these options:</p> <p>getopts: getopts is a built-in Bash command for parsing command-line options. It's simple and lightweight, but it may not support complex option configurations.</p> <p>bash Copy code while getopts ":a:b:c" opt; do case $opt in a) arg_a="$OPTARG" ;; b) arg_b="$OPTARG" ;; c) arg_c=true ;; ?) echo "Invalid option: -$OPTARG" >&2 exit 1 ;; esac done With getopts, you specify which options your script should accept and whether they require arguments.</p> <p>getopt: getopt is a more flexible option that can handle complex options and long-form flags. It's not built into Bash, so you'll need to use an external command. The syntax can be a bit more complex.</p> <p>bash Copy code args=$(getopt -o a:b:c --long arg-a:,arg-b:,arg-c -- "$@") eval set -- "$args" while true; do case "$1" in -a|--arg-a) arg_a="$2" shift 2 ;; -b|--arg-b) arg_b="$2" shift 2 ;; -c|--arg-c) arg_c=true shift ;; --) shift break ;; esac done getopt is more powerful and flexible but requires more code.</p> <p>Manual Argument Parsing: If you have very specific or custom argument parsing requirements, you can manually parse command-line arguments using loops and conditionals. This method provides the most control but requires more effort.</p> <p>bash Copy code while [[ $# -gt 0 ]]; do case "$1" in -a) arg_a="$2" shift 2 ;; -b) arg_b="$2" shift 2 ;; -c) arg_c=true shift ;; *) echo "Invalid option: $1" >&2 exit 1 ;; esac done The choice of which method to use depends on the complexity of your script and your preference. For simple scripts, getopts is often sufficient. For more complex cases, getopt or manual parsing might be more suitable. Additionally, consider providing clear usage instructions for your script using the --help option to make it user-friendly.</p> <h2 id=embed-jekyll-seo-tags-into-templates>embed jekyll seo tags into templates</h2> <h2 id=debug>debug</h2> <p>hijacking into anti-zha site</p> <h2 id=ssl-vpn-l2tp-vpn>ssl vpn, l2tp vpn</h2> <p>南京这边是电信专线20M，送了一个千兆民用宽带</p> <p>北京是第三方的，电信的网，50M</p> <p>https://mah2eds8ab.feishu.cn/sheets/WcMJs6YfxhAIcLtz7IucsDxHnqg?sheet=MgLhF9</p> <p>https://mah2eds8ab.feishu.cn/sheets/WcMJs6YfxhAIcLtz7IucsDxHnqg</p> <p>OA https://mah2eds8ab.feishu.cn/docx/N8OydmjrfoEuI1xhaR2czYQ0nCd?from=from_copylink</p> <p>电视 主机 摄像头 麦克风 无线键鼠 排插 电视支架</p> <p>可以换新的？ 北京南京导入资产明细</p> <p>https://mah2eds8ab.feishu.cn/sheets/JUSzsX5VqhBYsFtzSToc8ny0nBb?sheet=y9UGLX</p> <p>bj这边网络设备， 1 Hillstone SG 6000 m6010，设备陈旧，ssl/ssh 协议都不再有支持，这两年都无法连接配置，申请替换。 1 H3C AP 2 tp-link AP 1 Dell N3224 交换机 现在出口应该是一个批发转售的电信通，速率差，申请出口100Mbps起。</p> <p>管理网页的HTTPS是SSL 1.0的，现在主流浏览器默认的安全规则不允许打开</p> <p>ipsecvpn</p> <p>要打通南京和北京的内网吗？ 2 replies 11:34 这样的话sslvpn没有ipsecvpn使用方便</p> <p>北京：36个固定工位+共享办公区6-8人 南京：22个固定工位</p> <p>北京南京在开启研发人员招聘，多语言销售人员招聘，可能也会开启多语言业务市场人员招聘，那么北京和南京的办公网络需要按照办公室的工位数量去配嘞：</p> 