<!doctype html><html class="dark light"><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><title>
         This month in my Rust projects
        
    </title><meta content="This month in my Rust projects" property=og:title><meta content="Progress of my Rust projects in April 2017" property=og:description><meta content="Progress of my Rust projects in April 2017" name=description><link href=/icon/favicon.png rel=icon type=image/png><link href=https://ashang.github.io/zz/fonts.css rel=stylesheet><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]}}</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link href=https://ashang.github.io/zz/atom.xml rel=alternate title=atbb type=application/atom+xml><link href=https://ashang.github.io/zz/theme/light.css rel=stylesheet><link href=https://ashang.github.io/zz/theme/dark.css id=darkModeStyle rel=stylesheet><link href=https://ashang.github.io/zz/main.css media=screen rel=stylesheet><body><div class=content><header><div class=main><a href=https://ashang.github.io/zz/>atbb</a><div class=socials><a class=social href=https://github.com/ashang/ rel=me> <img alt=github src=/social_icons/github.svg> </a></div></div><nav><a href=$BASE_URL/search/ style=margin-left:.7em>Search</a><a href=/notes style=margin-left:.7em>/notes</a><a href=/posts style=margin-left:.7em>/posts</a><a href=/gallery style=margin-left:.7em>/gallery</a><a href=/tags style=margin-left:.7em>/tags</a><a href=/projects style=margin-left:.7em>/projects</a> | <a href=javascript:void(0) id=dark-mode-toggle onclick=toggleTheme()> <img id=sun-icon src=/feather/sun.svg style=filter:invert(1)> <img id=moon-icon src=/feather/moon.svg> </a><script src=https://ashang.github.io/zz/js/themetoggle.js></script></nav></header><main><article><div class=title><div class=page-header>This month in my Rust projects<span class=primary-color style=font-size:1.6em>.</span></div><div class=meta>Posted on <time>2017-04-23</time></div></div><h1>Table of Contents</h1><ul><li><a href=https://ashang.github.io/zz/posts/working-on-rust-projects-in-april-2017/#jsonwebtoken>jsonwebtoken</a><li><a href=https://ashang.github.io/zz/posts/working-on-rust-projects-in-april-2017/#tera>Tera</a><li><a href=https://ashang.github.io/zz/posts/working-on-rust-projects-in-april-2017/#gutenberg>Gutenberg</a></ul><section class=body><p>I have just released v2 of <a href=https://github.com/Keats/jsonwebtoken>jsonwebtoken</a> and thought a blog post would be a good way to talk about the progress of jsonwebtoken, Tera and Gutenberg this month.<h2 id=jsonwebtoken>jsonwebtoken</h2><p>Version 2 is almost a full rewrite, but trying to keep the UX as good as possible.<p>The following improvements have been made:<ul><li>use <code>serde</code> instead of <code>rustc_serialize</code>: no brainer as <code>serde</code> is now usable on stable and reached 1.0.0<li>RSA signing and verification<li>Validation</ul><p>Validation is the main thing that was missing from version 1 and brings <code>jsonwebtoken</code> to almost parity with libraries in other languages. It is detailed <a href=https://github.com/Keats/jsonwebtoken#validation>in the README</a>.<p>As an aside, the signature of <code>decode</code> is an example of why I would like to have default arguments in functions. The signature is:<pre class=language-rust data-lang=rust style=background:#0f1419;color:#bfbab0><code class=language-rust data-lang=rust><span style=color:#ff7733>pub fn </span><span style=color:#ffb454>decode</span><span>&LTT</span><span style=color:#bfbab0cc>:</span><span> DeserializeOwned>(
</span><span>    </span><span style=color:#f29718>token</span><span style=color:#bfbab0cc>: </span><span style=color:#f29668>&</span><span style=color:#ff7733>str</span><span>,
</span><span>    </span><span style=color:#f29718>key</span><span style=color:#bfbab0cc>: </span><span style=color:#f29668>&</span><span>[</span><span style=color:#ff7733>u8</span><span>],
</span><span>    </span><span style=color:#f29718>validation</span><span style=color:#bfbab0cc>: </span><span style=color:#f29668>&</span><span>Validation
</span><span>) </span><span style=color:#bfbab0cc>-> </span><span style=font-style:italic;color:#39bae6>Result</span><span>&LTTokenData&LTT>>
</span></code></pre><p>But I expect <code>Validation</code> to be the default most of the time so the ideal signature would be something like:<pre class=language-rust data-lang=rust style=background:#0f1419;color:#bfbab0><code class=language-rust data-lang=rust><span style=color:#ff7733>pub fn </span><span style=color:#ffb454>decode</span><span>&LTT</span><span style=color:#bfbab0cc>:</span><span> DeserializeOwned>(
</span><span>    </span><span style=color:#f29718>token</span><span style=color:#bfbab0cc>: </span><span style=color:#f29668>&</span><span style=color:#ff7733>str</span><span>,
</span><span>    </span><span style=color:#f29718>key</span><span style=color:#bfbab0cc>: </span><span style=color:#f29668>&</span><span>[</span><span style=color:#ff7733>u8</span><span>],
</span><span>    validation = </span><span style=color:#f29668>&</span><span style=color:#ff7733>Validation</span><span style=color:#f29668>::</span><span>default() </span><span style=font-style:italic;color:#5c6773>// or whatever the syntax would be
</span><span>) </span><span style=color:#bfbab0cc>-> </span><span style=font-style:italic;color:#39bae6>Result</span><span>&LTTokenData&LTT>>
</span></code></pre><p>And using <code>decode</code> would be cleaner (at least for me):<pre class=language-rust data-lang=rust style=background:#0f1419;color:#bfbab0><code class=language-rust data-lang=rust><span style=color:#f07178>decode</span><span>(</span><span style=color:#f29668>&</span><span>token</span><span style=color:#bfbab0cc>, </span><span style=color:#c2d94c>"key"</span><span style=color:#bfbab0cc>, </span><span style=color:#f29668>&</span><span>Validation</span><span style=color:#f29668>::</span><span>default())</span><span style=color:#bfbab0cc>;
</span><span style=font-style:italic;color:#5c6773>// VS
</span><span style=color:#f07178>decode</span><span>(</span><span style=color:#f29668>&</span><span>token</span><span style=color:#bfbab0cc>, </span><span style=color:#c2d94c>"key"</span><span>)</span><span style=color:#bfbab0cc>;
</span></code></pre><p>There is a <a href=https://internals.rust-lang.org/t/pre-rfc-named-arguments/3831/234>pre RFC</a> but not much progress has been made recently.<p>Thanks a lot to <a href=https://github.com/mike-engel>Mike Engel</a> for all the feedback!<h2 id=tera>Tera</h2><blockquote><p><a href=https://github.com/Keats/tera>Tera</a> is a template engine based on Jinja2/Django templates</blockquote><p>Tera has gone through 2 versions in April: 0.9.0 and now 0.10.<p>0.9 fixed a major bug on Windows and 0.10 updated <code>serde</code> to 1.0, no major changes otherwise: Tera is pretty stable now.<h2 id=gutenberg>Gutenberg</h2><blockquote><p><a href=https://github.com/Keats/gutenberg>Gutenberg</a> is a static site engine</blockquote><p>Lots of progress this month on Gutenberg!<p>A short list of the biggest new features:<ul><li>Shortcodes inspired by <a href=https://gohugo.io/extras/shortcodes/>Hugo</a><li>Relative links to your own content: <code>[my last article](./posts/an-article.md)</code><li>Anchors for titles with an option to insert some HTML to allow behaviour similar to the Github READMEs<li>Works on Windows!</ul><p>Next up is <a href=https://github.com/Keats/gutenberg/issues/14>sorting by weight/order</a> and finishing up <a href=https://github.com/Keats/gutenberg/issues/7>pagination</a>.<p>Once those features are in, I will probably spend some time making an actual documentation site to ensure it works for sites more complex than this blog.<p>If anyone is knowledgeable about <a href=http://livereload.com/>Live Reload</a>, I'd like some help tracking down <a href=https://github.com/Keats/gutenberg/issues/10>this issue</a>.<p>Solving <a href=https://github.com/trishume/syntect/issues/20>this issue in Syntect</a> would also help but I don't have time/motivation for it myself right now.<p>Otherwise, Gutenberg mostly needs feedback and even feature request for things I didn't consider yet.</section></article></main></div>