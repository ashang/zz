<!doctype html><html class="dark light"><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><title>
         Class-based views VS function-based views
        
    </title><meta content="Class-based views VS function-based views" property=og:title><meta content="What are the pros/cons of CBV and FBV in Django" property=og:description><meta content="What are the pros/cons of CBV and FBV in Django" name=description><link href=/icon/favicon.png rel=icon type=image/png><link href=https://ashang.github.io/zz/fonts.css rel=stylesheet><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]}}</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link href=https://ashang.github.io/zz/atom.xml rel=alternate title=atbb type=application/atom+xml><link href=https://ashang.github.io/zz/theme/light.css rel=stylesheet><link href=https://ashang.github.io/zz/theme/dark.css id=darkModeStyle rel=stylesheet><link href=https://ashang.github.io/zz/main.css media=screen rel=stylesheet><body><div class=content><header><div class=main><a href=https://ashang.github.io/zz/>atbb</a><div class=socials><a class=social href=https://github.com/ashang/ rel=me> <img alt=github src=/social_icons/github.svg> </a></div></div><nav><a href=$BASE_URL/search/ style=margin-left:.7em>Search</a><a href=/notes style=margin-left:.7em>/notes</a><a href=/posts style=margin-left:.7em>/posts</a><a href=/gallery style=margin-left:.7em>/gallery</a><a href=/tags style=margin-left:.7em>/tags</a><a href=/projects style=margin-left:.7em>/projects</a> | <a href=javascript:void(0) id=dark-mode-toggle onclick=toggleTheme()> <img id=sun-icon src=/feather/sun.svg style=filter:invert(1)> <img id=moon-icon src=/feather/moon.svg> </a><script src=https://ashang.github.io/zz/js/themetoggle.js></script></nav></header><main><article><div class=title><div class=page-header>Class-based views VS function-based views<span class=primary-color style=font-size:1.6em>.</span></div><div class=meta>Posted on <time>2013-10-02</time></div></div><h1>Table of Contents</h1><ul><li><a href=https://ashang.github.io/zz/posts/using-class-based-views/#presentation-of-cbv>Presentation of CBV</a><li><a href=https://ashang.github.io/zz/posts/using-class-based-views/#go-cbv>Go CBV !</a><li><a href=https://ashang.github.io/zz/posts/using-class-based-views/#fbv-is-not-dead>FBV is not dead !</a><li><a href=https://ashang.github.io/zz/posts/using-class-based-views/#conclusion>Conclusion</a></ul><section class=body><p>The URL gives me away. I do prefer class-based views (CBV) over function-based views (FBV) and will try to explain why in this article.<h2 id=presentation-of-cbv>Presentation of CBV</h2><p>First thing, a quick introduction of CBV. The 'old' way of doings views in django is something like the following:<pre class=language-python data-lang=python style=background:#0f1419;color:#bfbab0><code class=language-python data-lang=python><span style=color:#ff7733>def </span><span style=color:#ffb454>myview</span><span>(</span><span style=color:#f29718>request</span><span>):
</span><span>  </span><span style=color:#ff7733>if </span><span>request</span><span style=color:#f29668>.</span><span>POST:
</span><span>    </span><span style=font-style:italic;color:#5c6773># do my POST action (form, saving)
</span><span>  </span><span style=color:#ff7733>else</span><span>:
</span><span>    </span><span style=font-style:italic;color:#5c6773># do my GET action
</span><span>
</span><span>  </span><span style=color:#ff7733>return </span><span style=color:#ffb454>render</span><span>(</span><span style=color:#f29718>...</span><span>)
</span></code></pre><p>An identical version using CBV would be:<pre class=language-python data-lang=python style=background:#0f1419;color:#bfbab0><code class=language-python data-lang=python><span style=color:#ff7733>class </span><span style=color:#59c2ff>MyView</span><span>(</span><span style=text-decoration:underline;color:#59c2ff>View</span><span>):
</span><span>  </span><span style=color:#ff7733>def </span><span style=color:#ffb454>get</span><span>(</span><span style=color:#f29718>self</span><span style=color:#bfbab0cc>, </span><span style=color:#f29718>request</span><span style=color:#bfbab0cc>, </span><span style=color:#f29668>*</span><span style=color:#f29718>args</span><span style=color:#bfbab0cc>, </span><span style=color:#f29668>**</span><span style=color:#f29718>kwargs</span><span>):
</span><span>    </span><span style=font-style:italic;color:#5c6773># do my get action
</span><span>  </span><span style=color:#ff7733>def </span><span style=color:#ffb454>post</span><span>(</span><span style=color:#f29718>self</span><span style=color:#bfbab0cc>, </span><span style=color:#f29718>request</span><span style=color:#bfbab0cc>, </span><span style=color:#f29668>*</span><span style=color:#f29718>args</span><span style=color:#bfbab0cc>, </span><span style=color:#f29668>**</span><span style=color:#f29718>kwargs</span><span>):
</span><span>    </span><span style=font-style:italic;color:#5c6773># do my post action
</span></code></pre><p>The main advantage of using CBV lies in being able to inherit from mixins and making the code much more compact and readable ( this is obviously from my point of view, some people won't like the fact that they don't see exactly what's happening). For example, let's say you want to process a form (very basic one, on GET returns the form, on POST check for errors and show them if necessary or do something and redirect to another URL in case of success).<p>In a FBV, processing such a form looks like that:<pre class=language-python data-lang=python style=background:#0f1419;color:#bfbab0><code class=language-python data-lang=python><span style=color:#ff7733>def </span><span style=color:#ffb454>myview</span><span>(</span><span style=color:#f29718>request</span><span>):
</span><span>    </span><span style=color:#ff7733>if </span><span>request</span><span style=color:#f29668>.</span><span>method </span><span style=color:#f29668>== </span><span style=color:#c2d94c>'POST'</span><span>:
</span><span>        form </span><span style=color:#f29668>= </span><span style=color:#ffb454>MyForm</span><span>(request</span><span style=color:#f29668>.</span><span>POST)
</span><span>        </span><span style=color:#ff7733>if </span><span>form</span><span style=color:#f29668>.</span><span style=color:#ffb454>is_valid</span><span>():
</span><span>            </span><span style=color:#ffb454>do_something</span><span>(form)
</span><span>            </span><span style=color:#ff7733>return </span><span style=color:#ffb454>HttpResponseRedirect</span><span>(</span><span style=color:#ffb454>reverse</span><span>(</span><span style=color:#c2d94c>'success'</span><span>))
</span><span>    </span><span style=color:#ff7733>else</span><span>:
</span><span>        form </span><span style=color:#f29668>= </span><span style=color:#ffb454>MyForm</span><span>()
</span><span>
</span><span>    </span><span style=color:#ff7733>return </span><span style=color:#ffb454>render</span><span>(request</span><span style=color:#bfbab0cc>, </span><span style=color:#c2d94c>'template.html'</span><span style=color:#bfbab0cc>, </span><span>{</span><span style=color:#c2d94c>'form'</span><span style=color:#bfbab0cc>: </span><span>form})
</span></code></pre><p>And in a CBV<pre class=language-python data-lang=python style=background:#0f1419;color:#bfbab0><code class=language-python data-lang=python><span style=color:#ff7733>class </span><span style=color:#59c2ff>MyView</span><span>(</span><span style=text-decoration:underline;color:#59c2ff>FormView</span><span>):
</span><span>  form_class </span><span style=color:#f29668>= </span><span>MyForm
</span><span>  success_url </span><span style=color:#f29668>= </span><span style=color:#ffb454>reverse_lazy</span><span>(</span><span style=color:#c2d94c>'success'</span><span>)
</span><span>  template_name </span><span style=color:#f29668>= </span><span style=color:#c2d94c>'template.html'
</span><span>
</span><span>  </span><span style=color:#ff7733>def </span><span style=color:#ffb454>form_valid</span><span>(</span><span style=color:#f29718>self</span><span style=color:#bfbab0cc>, </span><span style=color:#f29718>form</span><span>):
</span><span>    </span><span style=color:#ffb454>do_something</span><span>(form)
</span><span>    </span><span style=color:#ff7733>return </span><span style=color:#f07178>super</span><span>(MyView</span><span style=color:#bfbab0cc>, </span><span style=font-style:italic;color:#39bae6>self</span><span>)</span><span style=color:#f29668>.</span><span style=color:#ffb454>form_valid</span><span>(form)
</span></code></pre><p>This is so much neater imo.<h2 id=go-cbv>Go CBV !</h2><p>There are generic classes for every CRUD action and it's easy to create your own mixins on top of it. The most common would be a LoginRequired one, working like the login_required decorator. A JsonResponse one is also a good example of a useful CBV mixin (for more, look at <a href=https://github.com/brack3t/django-braces title=django-braces>django-braces</a>).<p>One pattern that we use all the time in Hizard (and most web app need the same kind of features) is checking that the user is allowed to see/do certains actions. In this case, we have mixins like RestrictedDetailView, RestrictedListView, etc that does the check automatically for us, the only thing we have to do is inheriting from them. How cool is that ? Instead of having huge FBV unorganized (I've seen in the hundreds of line unfortunately), you can divide everything into methods neatly and have much cleaner and easier to read code.<h2 id=fbv-is-not-dead>FBV is not dead !</h2><p>FBV is the traditional way to represent requests handling in lots of frameworks/languages, making it <em>much</em> easier for a new django dev to understand what's going on. On some cases, it even makes more sense to use them rather than FBV (I'm thinking about views with several forms for example). You also need to take into account that most current codebase use FBV and lots of developers don't know how/don't want to use CBV.<h2 id=conclusion>Conclusion</h2><p>Seeing the number of people not liking CBV, I assume I'm in the minority of people that thinks they are a fantastic tool to make your code cleaner, reusable and easier to maintain (you want to add another check on your LoginRequired ? much more annoying to do with decorators and FBV). Even if you're not using generic CBV, just using a CBV inheriting from View will cleanly separate GET and POST. The main problem with CBV is the documentation I think but once you get the hang of it, it's awesome. In the end it's a matter of preference and what the team decides : I use CBV on my own projects and FBV at work.</section></article></main></div>