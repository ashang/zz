<!doctype html><html class="dark light"><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><title>
         使用 Vim 搭建 TypeScript 开发环境
        
    </title><meta content="使用 Vim 搭建 TypeScript 开发环境" property=og:title><meta content="SpaceVim 搭建 TypeScript 的开发环境，简介 lang#typescript 模块所支持的功能特性以及使用技巧" property=og:description><meta content="SpaceVim 搭建 TypeScript 的开发环境，简介 lang#typescript 模块所支持的功能特性以及使用技巧" name=description><link href=/icon/favicon.png rel=icon type=image/png><link href=https://ashang.github.io/zz/fonts.css rel=stylesheet><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]}}</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link href=https://ashang.github.io/zz/atom.xml rel=alternate title=atbb type=application/atom+xml><link href=https://ashang.github.io/zz/theme/light.css rel=stylesheet><link href=https://ashang.github.io/zz/theme/dark.css id=darkModeStyle rel=stylesheet><link href=https://ashang.github.io/zz/main.css media=screen rel=stylesheet><body><div class=content><header><div class=main><a href=https://ashang.github.io/zz/>atbb</a><div class=socials><a class=social href=https://github.com/ashang/ rel=me> <img alt=github src=/social_icons/github.svg> </a></div></div><nav><a href=$BASE_URL/search/ style=margin-left:.7em>Search</a><a href=/notes style=margin-left:.7em>/notes</a><a href=/posts style=margin-left:.7em>/posts</a><a href=/gallery style=margin-left:.7em>/gallery</a><a href=/tags style=margin-left:.7em>/tags</a><a href=/projects style=margin-left:.7em>/projects</a> | <a href=javascript:void(0) id=dark-mode-toggle onclick=toggleTheme()> <img id=sun-icon src=/feather/sun.svg style=filter:invert(1)> <img id=moon-icon src=/feather/moon.svg> </a><script src=https://ashang.github.io/zz/js/themetoggle.js></script></nav></header><main><article><div class=title><div class=page-header>使用 Vim 搭建 TypeScript 开发环境<span class=primary-color style=font-size:1.6em>.</span></div><div class=meta>Posted on <time>2020-04-11</time></div></div><h1>Table of Contents</h1><ul><li><a href=https://ashang.github.io/zz/posts/use-vim-as-a-typescript-ide/#an-zhuang-mo-kuai>安装模块</a><li><a href=https://ashang.github.io/zz/posts/use-vim-as-a-typescript-ide/#dai-ma-zi-dong-bu-quan>代码自动补全</a><li><a href=https://ashang.github.io/zz/posts/use-vim-as-a-typescript-ide/#yu-fa-jian-cha>语法检查</a><li><a href=https://ashang.github.io/zz/posts/use-vim-as-a-typescript-ide/#gong-cheng-wen-jian-tiao-zhuan>工程文件跳转</a><li><a href=https://ashang.github.io/zz/posts/use-vim-as-a-typescript-ide/#kuai-su-yun-xing>快速运行</a><li><a href=https://ashang.github.io/zz/posts/use-vim-as-a-typescript-ide/#dai-ma-ge-shi-hua>代码格式化</a><li><a href=https://ashang.github.io/zz/posts/use-vim-as-a-typescript-ide/#jiao-hu-shi-bian-cheng>交互式编程</a></ul><section class=body><p>https://ka.ci/2wiciy<h3 id=an-zhuang-mo-kuai>安装模块</h3><p>SpaceVim 初次安装时默认并未启用 TypeScript 相关语言模块。首先需要启用 <code>lang#typescript</code> 模块, 通过快捷键 <code>SPC f v d</code> 打开配置文件，添加：<pre class=language-toml data-lang=toml style=background:#0f1419;color:#bfbab0><code class=language-toml data-lang=toml><span>[[</span><span style=color:#59c2ff>layers</span><span>]]
</span><span>  </span><span style=color:#59c2ff>name </span><span>= </span><span style=color:#c2d94c>"lang#typescript"
</span></code></pre><p>启用 <code>lang#typescript</code> 模块后，在打开 TypeScript 文件时，就可以使用语言专属快捷键，这些快捷键都是以 <code>SPC l</code> 为前缀的。<h3 id=dai-ma-zi-dong-bu-quan>代码自动补全</h3><p>代码自动补全依赖 <code>autocomplete</code> 模块，该模块默认已经启动了，为 SpaceVim 提供了自动补全功能。 该模块会根据当前环境自动在多种补全引擎之间选择合适的， 默认的补全引擎有：deoplete、neocomplete、ycm、asyncomplete 以及 neocomplcache。 几种自动补全引擎当中，要数 deoplete 的体验效果最好。<p><img alt=ts src=https://user-images.githubusercontent.com/13142418/79134364-2bd8db80-7de0-11ea-848e-71d3f07cb79d.png><h3 id=yu-fa-jian-cha>语法检查</h3><p><code>checkers</code> 模块为 SpaceVim 提供了语法检查的功能，该模块默认已经载入。该模块默认使用 <a href=https://github.com/neomake/neomake>neomake</a> 这一异步语法检查工具。对于 TypeScript 的支持是通过异步调用 <a href=https://www.npmjs.com/package/tslint>tslint</a> 命令来完成的。<p>可通过以下命令安装：<pre class=language-sh data-lang=sh style=background:#0f1419;color:#bfbab0><code class=language-sh data-lang=sh><span style=color:#ffb454>npm</span><span> install</span><span style=color:#f29718> -g</span><span> tslint
</span></code></pre><h3 id=gong-cheng-wen-jian-tiao-zhuan>工程文件跳转</h3><p>SpaceVim 自带工程管理插件，可以识别项目根目录，自动跳转alternate文件。 可以在工程根目录添加 <code>.project_alt.json</code> 文件，并加入以下内容：<pre class=language-json data-lang=json style=background:#0f1419;color:#bfbab0><code class=language-json data-lang=json><span>{
</span><span>  </span><span style=color:#c2d94c>"src/*.ts"</span><span style=color:#bfbab0cc>: </span><span>{</span><span style=color:#c2d94c>"alternate"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"test/{}.ts"</span><span>}</span><span style=color:#bfbab0cc>,
</span><span>  </span><span style=color:#c2d94c>"test/*.ts"</span><span style=color:#bfbab0cc>: </span><span>{</span><span style=color:#c2d94c>"alternate"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"src/{}.ts"</span><span>}
</span><span>}
</span></code></pre><p>通过以上的配置，就可以使用命令 <code>:A</code> 在源文件和测试文件之间进行跳转。<h3 id=kuai-su-yun-xing>快速运行</h3><p>在编辑 TypeScript 文件时，可以快速运行当前文件，这个功能有点类似于 vscode 的 code runner 插件，默认的快捷键是 <code>SPC l r</code>。按下后， 会在屏幕下方打开一个插件窗口，运行的结果会被展示在窗口内。于此同时，光标并不会跳到该插件窗口，避免影响编辑。在这里需要说明下， 这一功能是根据当前缓存器调用相对应的 <code>node</code> 命令，无需保存文件。<p><img alt=tsrunner src=https://user-images.githubusercontent.com/13142418/79641052-b4cc8a00-81c7-11ea-8e95-35bc816b17d9.png><h3 id=dai-ma-ge-shi-hua>代码格式化</h3><p>TypeScript 代码格式化，主要依赖 <code>format</code> 模块，同时需要安装相关的后台命令 <a href=https://www.npmjs.com/package/typescript-formatter><code>tsfmt</code></a>：<pre class=language-toml data-lang=toml style=background:#0f1419;color:#bfbab0><code class=language-toml data-lang=toml><span>[[</span><span style=color:#59c2ff>layers</span><span>]]
</span><span>  </span><span style=color:#59c2ff>name </span><span>= </span><span style=color:#c2d94c>"format"
</span></code></pre><p>安装 <code>tsfmt</code> 命令：<pre class=language-sh data-lang=sh style=background:#0f1419;color:#bfbab0><code class=language-sh data-lang=sh><span style=color:#ffb454>npm</span><span> install</span><span style=color:#f29718> -g</span><span> typescript-formatter
</span></code></pre><h3 id=jiao-hu-shi-bian-cheng>交互式编程</h3><p>在编辑 TypeScript 文件时，可通过快捷键 <code>SPC l s i</code> 启动 <code>ts-node -i</code> 交互窗口，之后使用快捷键将代码发送至解释器。默认快捷键都以 <code>SPC l s</code> 为前缀。<p>目前 TypeScript 交互式编程还未完全实现，主要是因为 <code>ts-node -i</code> 执行是并不刷新buffer，可查看<a href=https://github.com/TypeStrong/ts-node/issues/1013>ts-node #1013</a>。</section></article></main></div>