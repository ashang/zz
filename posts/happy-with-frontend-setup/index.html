<!doctype html><html class="dark light"><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><title>
         My current frontend setup is pretty neat
        
    </title><meta content="My current frontend setup is pretty neat" property=og:title><meta content="Showing my current frontend setup" property=og:description><meta content="Showing my current frontend setup" name=description><link href=/icon/favicon.png rel=icon type=image/png><link href=https://ashang.github.io/zz/fonts.css rel=stylesheet><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]}}</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link href=https://ashang.github.io/zz/atom.xml rel=alternate title=atbb type=application/atom+xml><link href=https://ashang.github.io/zz/theme/light.css rel=stylesheet><link href=https://ashang.github.io/zz/theme/dark.css id=darkModeStyle rel=stylesheet><link href=https://ashang.github.io/zz/main.css media=screen rel=stylesheet><body><div class=content><header><div class=main><a href=https://ashang.github.io/zz/>atbb</a><div class=socials><a class=social href=https://github.com/ashang/ rel=me> <img alt=github src=/social_icons/github.svg> </a></div></div><nav><a href=$BASE_URL/search/ style=margin-left:.7em>Search</a><a href=/notes style=margin-left:.7em>/notes</a><a href=/posts style=margin-left:.7em>/posts</a><a href=/gallery style=margin-left:.7em>/gallery</a><a href=/tags style=margin-left:.7em>/tags</a><a href=/projects style=margin-left:.7em>/projects</a> | <a href=javascript:void(0) id=dark-mode-toggle onclick=toggleTheme()> <img id=sun-icon src=/feather/sun.svg style=filter:invert(1)> <img id=moon-icon src=/feather/moon.svg> </a><script src=https://ashang.github.io/zz/js/themetoggle.js></script></nav></header><main><article><div class=title><div class=page-header>My current frontend setup is pretty neat<span class=primary-color style=font-size:1.6em>.</span></div><div class=meta>Posted on <time>2017-01-28</time></div></div><h1>Table of Contents</h1><ul><li><a href=https://ashang.github.io/zz/posts/happy-with-frontend-setup/#package-manager>Package manager</a><li><a href=https://ashang.github.io/zz/posts/happy-with-frontend-setup/#module-bundler>Module bundler</a><li><a href=https://ashang.github.io/zz/posts/happy-with-frontend-setup/#language>Language</a><li><a href=https://ashang.github.io/zz/posts/happy-with-frontend-setup/#view>View</a><li><a href=https://ashang.github.io/zz/posts/happy-with-frontend-setup/#state-management>State management</a><li><a href=https://ashang.github.io/zz/posts/happy-with-frontend-setup/#testing>Testing</a><li><a href=https://ashang.github.io/zz/posts/happy-with-frontend-setup/#css>CSS</a><li><a href=https://ashang.github.io/zz/posts/happy-with-frontend-setup/#prototyping>Prototyping</a><li><a href=https://ashang.github.io/zz/posts/happy-with-frontend-setup/#what-am-i-missing>What am I missing</a> <ul><li><a href=https://ashang.github.io/zz/posts/happy-with-frontend-setup/#compile-time-styling>Compile-time styling</a><li><a href=https://ashang.github.io/zz/posts/happy-with-frontend-setup/#animations>Animations</a></ul><li><a href=https://ashang.github.io/zz/posts/happy-with-frontend-setup/#tl-dr>TL;DR</a></ul><section class=body><p>From time to time, I see someone on Github forking or starring the Angular boilerplate I made and was using 2 years ago. As everyone knows, time in JavaScript-land tends to operate in a different scale: something done 2 years ago is prehistoric and a generation or two of frameworks went by.<p>I have been using <a href=https://facebook.github.io/react/>React</a> for about a year now, mainly for the frontend of Proppy and some experiments on the side. While the churn for the libraries during that year reached a level I had never seen before, it seems to have stabilised a bit. That or I stopped trying to follow JS news, who knows.<p>Since many people might suffer from <a href=https://en.wikipedia.org/wiki/Analysis_paralysis>analysis paralysis</a>, I decided to document my own choices to help. It will also provide a good laugh for people find that article in a few months/years, missing the date and thinking "people are STILL using X?".<h2 id=package-manager>Package manager</h2><p>Yes, you can even choose your package manager in JavaScript!<p><code>npm</code> is fine as long as you remember to <a href=https://docs.npmjs.com/cli/shrinkwrap>shrinkwrap</a> and don't mind slow installs.<p>I settled on <a href=https://yarnpkg.com/>yarn</a>, which does the right thing by default: a lock file and deterministic installs. Installing packages is also faster than <code>npm</code>, which is a nice bonus. Despite how recent it is, I haven't run into bugs yet.<h2 id=module-bundler>Module bundler</h2><p>I use <a href=https://webpack.github.io/>Webpack</a>. Not much to say here, once you understand how to configure it - and it might take a while - it is easy to get going (AKA <code>cp ../previous_project/webpack.config.js .</code>).<p>I also like to use <a href=https://github.com/ampedandwired/html-webpack-plugin>html-webpack-plugin</a>.<h2 id=language>Language</h2><p>I use <a href=http://www.typescriptlang.org/>TypeScript</a>. If you are using plain Javascript or just Babel, I strongly encourage you to try something that adds types, be it <a href=http://elm-lang.org/>Elm</a>, <a href=https://flowtype.org/>Flow</a>, TypeScript or something else like ScalaJS.<p>Some people view types as hindrance but they make me so much more productive:<ul><li>Object shapes and function arguments are documented and is enforced by the compiler<li>I can do sweeping changes in a codebase without any trouble<li>Fewer errors: trying to call a function that only takes a <code>string</code> with a potentially <code>undefined</code> argument? Nope</ul><p>Elm catch phrase is "no runtime exceptions" but I'd argue it is also valid for anything sufficiently typed.<p>The big advantage TypeScript has over the alternatives mentioned is the huge community and type definitions are available for tons of libraries.<p>If you are planning to use TypeScript, make sure you start your project with a very strict config. I use the following for new projects:<pre class=language-json data-lang=json style=background:#0f1419;color:#bfbab0><code class=language-json data-lang=json><span>{
</span><span>  </span><span style=color:#c2d94c>"compilerOptions"</span><span style=color:#bfbab0cc>: </span><span>{
</span><span>    </span><span style=color:#c2d94c>"target"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"es5"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"module"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"commonjs"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"jsx"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"react"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"experimentalDecorators"</span><span style=color:#bfbab0cc>: </span><span style=color:#f29718>true</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"noImplicitAny"</span><span style=color:#bfbab0cc>: </span><span style=color:#f29718>true</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"strictNullChecks"</span><span style=color:#bfbab0cc>: </span><span style=color:#f29718>true</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"noUnusedParameters"</span><span style=color:#bfbab0cc>: </span><span style=color:#f29718>true</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"noUnusedLocals"</span><span style=color:#bfbab0cc>: </span><span style=color:#f29718>true</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"sourceMap"</span><span style=color:#bfbab0cc>: </span><span style=color:#f29718>true
</span><span>  }</span><span style=color:#bfbab0cc>,
</span><span>  </span><span style=color:#c2d94c>"exclude"</span><span style=color:#bfbab0cc>: </span><span>[
</span><span>    </span><span style=color:#c2d94c>"node_modules"
</span><span>  ]
</span><span>}
</span></code></pre><p>If you are converting a large app to TS, <code>noImplicitAny</code> might be a pain so only set it to <code>true</code> when done.<p>I also use <a href=https://github.com/palantir/tslint>tslint</a> for linting, which comes with a default good config.<h2 id=view>View</h2><p>As mentioned in the introduction, I use React. I've also been following/contributing a bit to <a href=https://infernojs.org/>Inferno</a> as an alternative but it doesn't have great type definitions, which is a deal breaker for me.<p>I would also recommend to mostly write your own components if design is an important factor and you have time for it instead of using third-party components. Unless it's something like an admin or a private site, then go ahead and use a material library or any UI library.<h2 id=state-management>State management</h2><p>I've settled on <a href=https://github.com/mobxjs/mobx>MobX</a> and am pretty happy about it. I wrote about <a href=https://ashang.github.io/zz/posts/happy-with-frontend-setup/2016-11-01_a-mobx-introduction/index.md>MobX and going from Redux</a> before so I'm not going to repeat myself here.<p>In short: very simple to use, fully typed and not verbose at all. A pleasure after using <a href=https://github.com/reactjs/redux>Redux</a>.<h2 id=testing>Testing</h2><p>I'm currently using Mocha/Chai with <a href=https://karma-runner.github.io/>Karma</a> in Proppy and it's working well. I have heard good things about recent versions of <a href=https://facebook.github.io/jest/>Jest</a> but haven't had the time to look at it yet, it is the next item on the TO TRY list.<h2 id=css>CSS</h2><p>I am using <a href=http://sass-lang.com/>Sass</a> with some postcss plugins like <a href=http://postcss.org/>Lost</a> or <a href=https://github.com/postcss/autoprefixer>Autoprefixer</a>. If you are targeting evergreen browsers, <code>autoprefixer</code> won't be needed.<p>I haven't seen a single CSS-in-JS library that convinced me. The closest was <a href=https://github.com/typestyle/typestyle>TypeStyle</a> but is ultimately failing because it has a runtime overhead. I'll address that in the "What am I missing" section later on.<h2 id=prototyping>Prototyping</h2><p>I recently discovered <a href=https://storybook.js.org/>storybook</a>. If you are using React and didn't hear about it or tried it, stop reading this article and go play with it. It's that glorious.<p>Rather than explaining how it works, have a look at <a href=http://airbnb.io/react-dates/>Airbnb date picker storybook</a>.<p>Storybook allows you to easily develop components and see all their potential usages in one place, as well as showing an always up-to-date style guide.<h2 id=what-am-i-missing>What am I missing</h2><p>I'm still missing a few things and welcome any input.<h3 id=compile-time-styling>Compile-time styling</h3><p>As mentioned before, TypeStyle is really close to a good solution for styling but for me, a styling tool should have no runtime cost. CSS is working well and having JavaScript do its job doesn't really make sense.<p>I raised an <a href=https://github.com/typestyle/typestyle/issues/86>issue</a> for that but it seems rewriting AST is not available in TypeScript yet so a TS plugin that extracts those call is not doable for now.<h3 id=animations>Animations</h3><p>I'm still unsure how to <em>easily</em> add animations. <a href=https://github.com/react-component/animate>animate</a> looks like a good candidate though.<h2 id=tl-dr>TL;DR</h2><p>My starter <code>package.json</code>:<pre class=language-json data-lang=json style=background:#0f1419;color:#bfbab0><code class=language-json data-lang=json><span>{
</span><span>  </span><span style=color:#c2d94c>"name"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"frontend"</span><span style=color:#bfbab0cc>,
</span><span>  </span><span style=color:#c2d94c>"version"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"1.0.0"</span><span style=color:#bfbab0cc>,
</span><span>  </span><span style=color:#c2d94c>"main"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"index.js"</span><span style=color:#bfbab0cc>,
</span><span>  </span><span style=color:#c2d94c>"scripts"</span><span style=color:#bfbab0cc>: </span><span>{
</span><span>    </span><span style=color:#c2d94c>"clean"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"rimraf -- dist"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"dev"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"webpack-dev-server"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"build"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"webpack"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"storybook"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"start-storybook -p 6006"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"build-storybook"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"build-storybook"
</span><span>  }</span><span style=color:#bfbab0cc>,
</span><span>  </span><span style=color:#c2d94c>"devDependencies"</span><span style=color:#bfbab0cc>: </span><span>{
</span><span>    </span><span style=color:#c2d94c>"@kadira/react-storybook-decorator-centered"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"^1.0.0"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"@kadira/storybook"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"^2.21.0"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"@types/classnames"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"^0.0.32"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"@types/react"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"^15.0.0"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"@types/react-dom"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"^0.14.20"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"autoprefixer"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"^6.6.0"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"css-loader"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"^0.26.1"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"html-webpack-plugin"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"^2.24.1"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"node-sass"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"^4.1.1"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"rimraf"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"^2.5.4"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"sass-loader"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"^4.1.1"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"ts-loader"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"^2.0.0"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"tslint"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"^4.2.0"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"tslint-loader"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"^3.3.0"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"typescript"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"^2.1.4"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"webpack"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"2.2.0-rc.4"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"webpack-dev-server"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"2.2.0-rc.0"
</span><span>  }</span><span style=color:#bfbab0cc>,
</span><span>  </span><span style=color:#c2d94c>"dependencies"</span><span style=color:#bfbab0cc>: </span><span>{
</span><span>    </span><span style=color:#c2d94c>"classnames"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"^2.2.5"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"mobx"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"^3.0.0"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"mobx-react"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"^4.1.0"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"react"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"^15.4.1"</span><span style=color:#bfbab0cc>,
</span><span>    </span><span style=color:#c2d94c>"react-dom"</span><span style=color:#bfbab0cc>: </span><span style=color:#c2d94c>"^15.4.1"
</span><span>  }
</span><span>}
</span></code></pre></section></article></main></div>