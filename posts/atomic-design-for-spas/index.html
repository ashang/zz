<!doctype html><html class="dark light"><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><title>
         Atomic Design in Single Page Applications
        
    </title><meta content="Atomic Design in Single Page Applications" property=og:title><meta content="How I use Atomic Design to architect my SPAs in React" property=og:description><meta content="How I use Atomic Design to architect my SPAs in React" name=description><link href=/icon/favicon.png rel=icon type=image/png><link href=https://ashang.github.io/zz/fonts.css rel=stylesheet><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]}}</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link href=https://ashang.github.io/zz/atom.xml rel=alternate title=atbb type=application/atom+xml><link href=https://ashang.github.io/zz/theme/light.css rel=stylesheet><link href=https://ashang.github.io/zz/theme/dark.css id=darkModeStyle rel=stylesheet><link href=https://ashang.github.io/zz/main.css media=screen rel=stylesheet><body><div class=content><header><div class=main><a href=https://ashang.github.io/zz/>atbb</a><div class=socials><a class=social href=https://github.com/ashang/ rel=me> <img alt=github src=/social_icons/github.svg> </a></div></div><nav><a href=$BASE_URL/search/ style=margin-left:.7em>Search</a><a href=/notes style=margin-left:.7em>/notes</a><a href=/posts style=margin-left:.7em>/posts</a><a href=/gallery style=margin-left:.7em>/gallery</a><a href=/tags style=margin-left:.7em>/tags</a><a href=/projects style=margin-left:.7em>/projects</a> | <a href=javascript:void(0) id=dark-mode-toggle onclick=toggleTheme()> <img id=sun-icon src=/feather/sun.svg style=filter:invert(1)> <img id=moon-icon src=/feather/moon.svg> </a><script src=https://ashang.github.io/zz/js/themetoggle.js></script></nav></header><main><article><div class=title><div class=page-header>Atomic Design in Single Page Applications<span class=primary-color style=font-size:1.6em>.</span></div><div class=meta>Posted on <time>2018-10-26</time></div></div><h1>Table of Contents</h1><ul><li><a href=https://ashang.github.io/zz/posts/atomic-design-for-spas/#self-contained-components>Self-contained components</a><li><a href=https://ashang.github.io/zz/posts/atomic-design-for-spas/#atomic-design>Atomic Design</a> <ul><li><a href=https://ashang.github.io/zz/posts/atomic-design-for-spas/#atoms>Atoms</a><li><a href=https://ashang.github.io/zz/posts/atomic-design-for-spas/#molecules>Molecules</a><li><a href=https://ashang.github.io/zz/posts/atomic-design-for-spas/#organisms>Organisms</a><li><a href=https://ashang.github.io/zz/posts/atomic-design-for-spas/#templates>Templates</a><li><a href=https://ashang.github.io/zz/posts/atomic-design-for-spas/#pages>Pages</a></ul><li><a href=https://ashang.github.io/zz/posts/atomic-design-for-spas/#conclusion>Conclusion</a></ul><section class=body><p>This post will outline how I architect visual part of the SPAs I work on. But first, let me explain the issues I faced that led me there. I used to put every components in a <code>components</code> folder, which obviously doesn't scale and make it hard finding a specific component. After that, I grouped at least the top level routing components which made things a bit tidier but was still very unsatisfying. Looking around for various ways to organise design elements, I found <a href=http://bradfrost.com/blog/post/atomic-web-design/>Atomic Design</a>. I am not going to dive deep into explaning what is Atomatic Design as the linked article does a very good job so I would recommend taking 2 minutes to read it beforehand.<p>You can find a basic clone of <a href=https://news.ycombinator.com/>HackerNews</a> on GitHub: <a href=https://github.com/Keats/hn-react>https://github.com/Keats/hn-react</a> made using the principles described in this post to illustrate this article.<p>Lastly, while the title doesn't mention a specific framework, all the samples will use React. The ideas presented in this post will work equally well in Vue.js or any other component-based framework.<h2 id=self-contained-components>Self-contained components</h2><p>That is something Vue.js users can get behind! Each component has now its own folder containing everything it needs to be used, apart from the other components it is using as we will see in a bit.<p>What this means is that every component folder looks very similar to something like:<pre class=language-bash data-lang=bash style=background:#0f1419;color:#bfbab0><code class=language-bash data-lang=bash><span style=color:#ffb454>input
</span><span style=color:#ffb454>├──</span><span> index.tsx
</span><span style=color:#ffb454>└──</span><span> _style.scss
</span></code></pre><p>You can replace <code>tsx</code> by <code>js</code> if you are not using <a href=https://www.typescriptlang.org/>TypeScript</a>.<p>As you can see, the folder also contains a <code>_style.scss</code>. I prefer to keep my CSS out of JS and since I use <a href=https://sass-lang.com/>Sass</a> for other projects without JavaScript, it makes sense to use it. You can use whatever floats your boat though. Those Sass files are only targeting specific CSS classes of that component, which solves potentially overlapping styling:<pre class=language-css data-lang=css style=background:#0f1419;color:#bfbab0><code class=language-css data-lang=css><span style=color:#ffb454>.input </span><span>{
</span><span>  // the CSS of the component
</span><span>}
</span></code></pre><p>The main Sass file will import each component individual style after setting up some base rules like fonts or vertical rhythm as can be seen in <a href=https://github.com/Keats/hn-react/blob/91bb067276006b0ea9d191f753112a5688b7c518/src/style/app.scss>app.scss</a>.<p>Since each component has its own folder, it is a good place to keep related code. For example, if I am using <a href=https://graphql.org/>GraphQL</a> with <a href=https://www.apollographql.com/>Apollo</a>, I will also have a <code>queries.tsx</code> in there with the queries used by the component as well as the types:<pre class=language-tsx data-lang=tsx style=background:#0f1419;color:#bfbab0><code class=language-tsx data-lang=tsx><span style=color:#ff7733>import </span><span>gql </span><span style=color:#ff7733>from </span><span style=color:#c2d94c>"graphql-tag"</span><span style=color:#bfbab0cc>;
</span><span style=color:#ff7733>import </span><span>{Query} </span><span style=color:#ff7733>from </span><span style=color:#c2d94c>"react-apollo"</span><span style=color:#bfbab0cc>;
</span><span>
</span><span style=color:#ff7733>import </span><span>{IOrganization} </span><span style=color:#ff7733>from </span><span style=color:#c2d94c>"../../../types"</span><span style=color:#bfbab0cc>;
</span><span>
</span><span style=color:#ff7733>export const </span><span>ALL_ORGS_QUERY </span><span style=color:#f29668>= </span><span style=color:#ffb454>gql</span><span style=color:#c2d94c>`
</span><span style=color:#c2d94c>  query allOrgs {
</span><span style=color:#c2d94c>    organizations {
</span><span style=color:#c2d94c>      id
</span><span style=color:#c2d94c>      name
</span><span style=color:#c2d94c>      slug
</span><span style=color:#c2d94c>
</span><span style=color:#c2d94c>      members {
</span><span style=color:#c2d94c>        id
</span><span style=color:#c2d94c>        role
</span><span style=color:#c2d94c>
</span><span style=color:#c2d94c>        user {
</span><span style=color:#c2d94c>          id
</span><span style=color:#c2d94c>          name
</span><span style=color:#c2d94c>          timezone
</span><span style=color:#c2d94c>        }
</span><span style=color:#c2d94c>      }
</span><span style=color:#c2d94c>    }
</span><span style=color:#c2d94c>  }
</span><span style=color:#c2d94c>`</span><span style=color:#bfbab0cc>;
</span><span>
</span><span style=color:#ff7733>export interface </span><span style=color:#59c2ff>IData </span><span>{
</span><span>  organizations</span><span style=color:#f29668>: </span><span style=color:#59c2ff>Array</span><span><</span><span style=color:#59c2ff>IOrganization</span><span>></span><span style=color:#bfbab0cc>;
</span><span>}
</span><span>
</span><span style=color:#ff7733>export class </span><span style=color:#59c2ff>AllOrgsQuery </span><span style=color:#ff7733>extends </span><span style=text-decoration:underline;color:#59c2ff>Query</span><span><</span><span style=color:#59c2ff>IData</span><span>> {}
</span></code></pre><p>Now that we have seen how I organise each individual component, let's dive in the Atomic Design part.<h2 id=atomic-design>Atomic Design</h2><p>If you have read the article introducing Atomic Design, you can probably guess that your <code>components</code> folder is going to look like that:<pre class=language-bash data-lang=bash style=background:#0f1419;color:#bfbab0><code class=language-bash data-lang=bash><span style=color:#f07178>.
</span><span style=color:#ffb454>├──</span><span> atoms
</span><span style=color:#ffb454>├──</span><span> molecules
</span><span style=color:#ffb454>├──</span><span> organisms
</span><span style=color:#ffb454>├──</span><span> templates
</span><span style=color:#ffb454>└──</span><span> pages
</span></code></pre><p>Let's look at them in the same order.<h3 id=atoms>Atoms</h3><p>Atoms are independent components that do not have any dependencies on other components and that exist in isolation: they probably don't do anything on their own, are mostly composed of <code>props</code> and any action they do is coming from <code>props</code>. In terms of Redux/MobX, all of those components should be dumb/pure/presentational components.<p>Looking at one private project atoms, I have:<ul><li><code>button</code><li><code>input</code><li><code>link</code><li><code>tag</code><li><code>toast</code><li><code>portal</code><li><code>icon</code></ul><p>There are obviously many more but this should be enough to give you an idea: they are the building blocks of your site.<p>Try to have as many of your components in that folder, you will have a much easier time composing interfaces later on.<p>While atoms can become fairly complex (<code>input</code> for example), they can also be as simple as <a href=https://github.com/Keats/hn-react/blob/master/src/app/components/atoms/spinner/index.tsx>a spinner</a>.<h3 id=molecules>Molecules</h3><p>By themselves, atoms are not very useful and need to be combined to make something useable: <code>input</code> + <code>button</code> giving you a <code>form</code> for example. That is what molecules are: a combination of 2 or more <code>atoms</code> or, in rarer cases, a smart wrapper around an atom. Therefore molecules should be dumb components when possible but it isn't required.<p>Here are some of the molecules from the same project:<ul><li><code>form</code> (<code>input</code> + <code>label</code>): using MobX for state but dumb otherwise<li><code>dialog</code> (<code>overlay</code> + <code>button</code>): dumb<li><code>toast-container</code> (<code>toast</code>): smart component that will display the currents <code>&LTToast></code> components from the store</ul><p>Since the HackerNews repository is a basic example, I didn't create enough atoms to have interesting molecules. However, looking at the <a href=https://github.com/Keats/hn-react/blob/master/src/app/components/molecules/story-item/index.tsx>story-item</a> it is easy to imagine adding an <code>upvote</code> atom in there.<p>If you need to use a molecule in another molecule, it probably means it is an organism folder as we will now see.<h3 id=organisms>Organisms</h3><p>As with molecules, there are two types of organisms I distinguish here:<ul><li>components using one or more molecules<li>business-specific usage of molecule</ul><p>A good definition comes from the original article:<blockquote><p>Organisms are groups of molecules joined together to form a relatively complex, distinct section of an interface.</blockquote><p>As before, here are some examples in my project:<ul><li><code>sidebar</code>: uses only one molecule but is a distinct section of the interface<li><code>login-form</code>: the <code>form</code> molecule set-up with the right fields and the GraphQL login query<li><code>signup-form</code>: the <code>form</code> molecule set-up with the right fields and the GraphQL signup query</ul><p>Each form in the app gets its own component, making testing/storybook very easy. Most of those forms components do not have style of their own as they just rely on the <code>form</code> molecule for that.<p>I do not have any organisms in the HackerNews example.<h3 id=templates>Templates</h3><p>If you look at most SaaS sites, you will notice they use different layouts for different parts of their site: the most common one being one logged out layout for the login/signup forms and the logged in layout with your dashboard and the actual tool.<p>I classify those different layouts as templates and you could have for example:<ul><li><code>logged-in</code>: a <code>sidebar</code> organism on the left and the <code>child</code> on the rest of the page<li><code>logged-out</code>: a different background with centered forms<li><code>settings</code>: some tabs</ul><p>Each of those templates will have their own styling - since that's their main use - but potentially also queries: you probably need to fetch the current user information for a <code>logged-in</code> template so moving that query at the template level will allow each page using it to automatically fetch the data in a uniform way.<p>The HackerNews example has only <a href=https://github.com/Keats/hn-react/blob/master/src/app/components/templates/main/index.tsx>one template</a> as, even when logged in, the interface doesn't change significantly.<h3 id=pages>Pages</h3><p>Those are the components you use in your router, each of them corresponding to a specific URL. They are therefore connected to your data stores and will probably have to fetch some data from your server. Most of the time, these components <code>render</code> method will be wrapped into a template component to ensure consistent styling.<p>Pages tie all of the elements of Atomic Design we just talked about in a small component. There shouldn't be any styling in those components other than the (rare) occasional divergence. I also follow a slightly more lax approach to the "one component = one folder" mantra and group sub-routes in the same folder as the main route for easy discovery.<p>Example of pages components:<ul><li><code>login</code><li><code>home</code><li><code>user-settings</code><li><code>verify-email</code></ul><p>You can view the <a href=https://github.com/Keats/hn-react/blob/master/src/app/components/pages/stories-list/index.tsx>HackerNews homepage</a> for an example.<h2 id=conclusion>Conclusion</h2><p>While some of the rules I introduced seem inflexible, you can bend them so they make sense to you. For example, I put my <code>overlay</code> component in the atoms folder despite it using the <code>portal</code> atom simply because I kept looking for it in the atoms folder since I always forget it actually uses <code>portal</code>.<p>Overall, this structure has been a big improvement for me:<ul><li>super easy to find components (if you don't have a Go To Definition shortcut)<li>trivial to test and make storybook stories<li>self contained enough that I can copy-paste the atoms and molecules folder and have everything working quickly</ul><p>As mentioned in the introduction, I wrote a <a href=https://github.com/Keats/hn-react>HN clone</a> as an example for that article. It is a basic React app following Atomic Design using TypeScript and MobX, as well as the routing method <a href=https://ashang.github.io/zz/posts/atomic-design-for-spas/2017-05-24_testing-a-different-spa-routing-update.md>I wrote about before</a> if you are curious about how it looks in practice. In my own projects, I also use <a href=https://storybook.js.org/>StoryBook</a> to easily have a visual overview of every component but I skipped adding it for this example app.</section></article></main></div>