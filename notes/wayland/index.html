<!doctype html><html class="dark light"><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><title>
         wayland
        
    </title><meta content=wayland property=og:title><meta content="An elegant and understated" property=og:description><meta content="An elegant and understated" name=description><link href=/icon/favicon.png rel=icon type=image/png><link href=https://ashang.github.io/zz/fonts.css rel=stylesheet><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]}}</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link href=https://ashang.github.io/zz/atom.xml rel=alternate title=atbb type=application/atom+xml><link href=https://ashang.github.io/zz/theme/light.css rel=stylesheet><link href=https://ashang.github.io/zz/theme/dark.css id=darkModeStyle rel=stylesheet><link href=https://ashang.github.io/zz/main.css media=screen rel=stylesheet><body><div class=content><header><div class=main><a href=https://ashang.github.io/zz/>atbb</a><div class=socials><a class=social href=https://github.com/ashang/ rel=me> <img alt=github src=/social_icons/github.svg> </a></div></div><nav><a href=$BASE_URL/search/ style=margin-left:.7em>Search</a><a href=/notes style=margin-left:.7em>/notes</a><a href=/posts style=margin-left:.7em>/posts</a><a href=/gallery style=margin-left:.7em>/gallery</a><a href=/tags style=margin-left:.7em>/tags</a><a href=/projects style=margin-left:.7em>/projects</a> | <a href=javascript:void(0) id=dark-mode-toggle onclick=toggleTheme()> <img id=sun-icon src=/feather/sun.svg style=filter:invert(1)> <img id=moon-icon src=/feather/moon.svg> </a><script src=https://ashang.github.io/zz/js/themetoggle.js></script></nav></header><main><article><div class=title><div class=page-header>wayland<span class=primary-color style=font-size:1.6em>.</span></div><div class=meta>Posted on <time>2015-08-12</time></div></div><h1>Table of Contents</h1><ul><li><a href=https://ashang.github.io/zz/notes/wayland/#weston>weston</a></ul><section class=body><p>Wayland运用既有的Linux核心技术，像是Direct Rendering Manager（DRM），Kernel Mode-Setting（KMS）以及Graphics Execution Manager（GEM）以提供一個最小化的显示管理服务。Wayland混合器（compositor）在2010年6月已从桌面常用的OpenGL改为OpenGL ES[12]。這個專案也開發支援Wayland顯示的Qt，而不需要X。大部分應用程式都有望獲得透過函式庫，無需修改程式即可支援Wayland。<p>近些年来，GNU/Linux桌面图形开发者将许多与渲染有关的接口从X server移动到内核中。现在，已经有许多功能被移入内核（内存管理、任务调度、模式设置（KMS）等等）或是程序库（cairo、pixman、freetype、fontconfig、pango等等），所以窗口系统需要做的事情大大减少了。但是X11协议十分巨大、庞杂，并且它包括了许多已经过时的模块。虽然开发者们为了使X server适应现代化的计算机体系结构而开发出了XRandR、XRender、Composite等一些额外扩展，但这终究是治标不治本，同时这也会增加维护的难度。<p>Wayland是一款协议，但与X server不同的是，Wayland只做它必须要做的事情。下面以「鼠标点击按钮引发按钮更新动作」为例来说明一下Wayland和X server的区别：<p>X架构 在X中：<p>内核捕获鼠标点击事件并发送给X server。 X server会计算该把这一事件发送给哪个窗口（事实上，窗口位置是由Compositor控制的，X server并不能够正确的计算Compositor做过特效变化之后的按钮的正确位置）。 应用程序对此事件进行处理（将引发按钮更新动作）。但是，在此之前它得向X server发送绘制请求。 X server接收到这条绘制请求，然后把它发给视频驱动来渲染。X还计算了更新区域，并且这条「垃圾信息」发送给了Compositor。 这时，Compositor知道它必须要重新合成屏幕上的一块区域。当然，这还是要向X server发送绘制请求的。 开始绘制。但是X server还会去做一些不必要的本职工作（窗口重叠计算、窗口剪裁计算等）。<p>Wayland架构 在Wayland中：<p>内核捕获鼠标点击事件并发送给Wayland Compositor。 由于是直接发给Wayland Compositor的，所以Wayland Compositor会正确地计算出按钮的位置。同时它会把这一事件发送给按钮所在的应用程序来处理。 应用程序直接渲染，无需向Wayland Compositor请求。只需在绘制完成之后向Wayland Compositor发送一条信息表明这块区域被更新了。 Wayland Compositor收到这条信息后，立即重新合成整个桌面。 目前，Wayland使用OpenGL ES而不是传统的OpenGL。“从长远来看，我们需要完整的OpenGL支持，但问题是libGL会带来X的依赖性......”[13]另一方面，使用OpenGL ES会使得Wayland更容易支持移动设备[14]<p>If your toolkit/library supports this, you can have your apps run natively (without Xwayland) by setting some environment variables (you can add them to your launcher script or a session file if you're using a display manager).<p>You can disable Xwayland (X clients under Wayland) support by specifying xwayland disable in your Sway config. GTK3<p>Wayland will be selected by default. Do not set GDK_BACKEND, it will break apps (e.g. Chromium and Electron).<p>Experimental Wayland support in Firefox can be enabled with MOZ_ENABLE_WAYLAND=1. Firefox ESR 68 also needs the --no-remote flag because of a bug.<p>LibreOffice should select Wayland by default. (If not, try SAL_USE_VCLPLUGIN=gtk3.) Qt5<p>Wayland is used by default if XDG_SESSION_TYPE=wayland is set (i.e. if you use a display manager). If not:<p>QT_QPA_PLATFORM=wayland-egl<p>To use your monitor's DPI instead of the default of 96 DPI:<p>QT_WAYLAND_FORCE_DPI=physical<p>Older versions of Qt always show window decorations. To hide them:<p>QT_WAYLAND_DISABLE_WINDOWDECORATION=1<p>NOTE: To enable Wayland support, you might need a package, such as qtwayland5 for Ubuntu or qt5-wayland for Arch Linux.<hr><p>Drew DeVault 宣布 Wayland 合成器Sway 1.0 将不支持 Nvidia 的 私有驱动 EGLStreams. Sway 及其他 Wayland 合成器使用 Linux kernel API 如 Kernel Mode Setting(KMS)、Direct Rending Manager(DRM) 和 Generic Buffer Management(GBM) 来支持不同的显卡，但 GPU 提供商中只有 Nvidia 不支 持这些API。<h1 id=weston>weston</h1><p>Description: reference implementation of a wayland compositor Part of the Wayland project is also the Weston reference implementation of a Wayland compositor. Weston can run as an X client or under Linux KMS and ships with a few demo clients. The Weston compositor is a minimal and fast compositor and is suitable for many embedded and mobile use cases.<p>If you want to run weston under KMS (from a console, rather than from within X) as non-root, you should start it via the weston-launch wrapper. For that to work, you either need to have logind running and have a local session registered, or your user needs to be member of the weston-launch group.<p>--- weston-1.12.0.orig/debian/README.source +++ weston-1.12.0/debian/README.source @@ -0,0 +1,58 @@ +This package uses quilt to manage all modifications to the upstream +source. Changes are stored in the source package as diffs in +debian/patches and applied during the build.<ul><li></ul><p>+To configure quilt to use debian/patches instead of patches, you want +either to export QUILT_PATCHES=debian/patches in your environment +or use this snippet in your ~/.quiltrc:<ul><li><li>for where in ./ ../ ../../ ../../../ ../../../../ ../../../../../; do<li><pre style=background:#0f1419;color:#bfbab0><code><span>   if [ -e ${where}debian/rules -a -d ${where}debian/patches ]; then
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span>           export QUILT_PATCHES=debian/patches
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span>           break
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span>   fi
</span></code></pre><li>done<li></ul><p>+To get the fully patched source after unpacking the source package, cd to +the root level of the source package and run:<ul><li><li>quilt push -a<li></ul><p>+The last patch listed in debian/patches/series will become the current +patch.<ul><li></ul><p>+To add a new set of changes, first run quilt push -a, and then run:<ul><li><li>quilt new <patch> <li></li> <p>+where <patch> is a descriptive name for the patch, used as the filename in +debian/patches. Then, for every file that will be modified by this patch, +run: <ul><li><li>quilt add <file> <li></li> <p>+before editing those files. You must tell quilt with quilt add what files +will be part of the patch before making changes or quilt will not work +properly. After editing the files, run:</p> <ul><li><li>quilt refresh<li></ul> <p>+to save the results as a patch.</p> <ul><li></ul> <p>+Alternately, if you already have an external patch and you just want to +add it to the build system, run quilt push -a and then:</p> <ul><li><li>quilt import -P <patch> /path/to/patch <li>quilt push -a</li> <li></li> <p>+(add -p 0 to quilt import if needed). <patch> as above is the filename to +use in debian/patches. The last quilt push -a will apply the patch to +make sure it works properly. <ul><li></ul> <p>+To remove an existing patch from the list of patches that will be applied, +run:</p> <ul><li><li>quilt delete <patch> <li></li> <p>+You may need to run quilt pop -a to unapply patches first before running +this command.</p> <p>--- weston-1.12.0.orig/debian/weston.postinst +++ weston-1.12.0/debian/weston.postinst @@ -0,0 +1,42 @@ +#!/bin/sh +# postinst script for weston +# +# see: dh_installdeb(1)</p> <ul><li></ul> <p>+set -e</p> <ul><li></ul> <p>+# summary of how this script can be called: +# * <postinst> <code>configure' &LTmost-recently-configured-version> +#        * &LTold-postinst> </code>abort-upgrade' <new version> +# * &LTconflictor's-postinst> <code>abort-remove' </code>in-favour' <package> +# <new-version> +# * <postinst> <code>abort-remove' +#        * &LTdeconfigured's-postinst> </code>abort-deconfigure' <code>in-favour' +#          &LTfailed-install-package> &LTversion> </code>removing' +# <conflicting-package> <version> +# for details, see http://www.debian.org/doc/debian-policy/ or +# the debian-policy package <ul><li><li></ul> <p>+case "$1" in</p> <ul><li>configure)<li>if ! getent group weston-launch >/dev/null; then<li><pre style=background:#0f1419;color:#bfbab0><code><span>   addgroup --quiet --system weston-launch
</span></code></pre><li>fi<li>;;<li><li>abort-upgrade|abort-remove|abort-deconfigure)<li>;;<li><li>*)<li><pre style=background:#0f1419;color:#bfbab0><code><span>   echo "postinst called with unknown argument \`$1'" >&2
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span>   exit 1
</span></code></pre><li>;; +esac<li></ul> <p>+# dh_installdeb will replace this with shell code automatically +# generated by other debhelper scripts.</p> <ul><li></ul> <p>+#DEBHELPER#</p> <ul><li></ul> <p>+exit 0</p> <p>--- weston-1.12.0.orig/ivi-shell/README +++ weston-1.12.0/ivi-shell/README @@ -0,0 +1,79 @@</p> <ul><li>In-vehicle infotainment (information and entertainment)<li>graphical environment support modules for Weston<li><li></ul> <p>+IVI-shell is an alternative shell for Weston, a Wayland display server. +Window management and application interaction with the display server +are very different to that of a normal desktop, which is why this is +a separate shell and not an extension to the desktop-shell suite with +xdg_shell. As such, applications need to be specifically written to use +IVI-shell.</p> <ul><li></ul> <p>+IVI-shell contains two main features: +- Common layout library for surface, which allow ivi-shell developer</p> <ul><li>to develop own shell, linking Common layout library.<li>For the time being, the library refers Genivi ilm interface.<li><li>http://projects.genivi.org/wayland-ivi-extension/<li></ul> <p>+- Extension protocol; ivi-application to tie wl_surface and a given ID.</p> <ul><li>With this ID, shell can identify which wl_surface is drawn by which<li>application. In in-vehicle infortainment system, a shell has to update<li>a property of a wl_surface. E.g. there may be a use case when vehicle<li>starts to move, the wl_surface drawn by Car navigation is expected to<li>move top of surfaces.<li></ul> <p>+The actual software components delivered with Weston are:</p> <ul><li></ul> <p>+- ivi-application.xml:</p> <ul><li>Wayland protocol extension for IVI-applications; the public<li>shell protocol (the same concept as xdg_shell).<li>Implemented by ivi-shell.so.<li></ul> <p>+- ivi-shell.so:</p> <ul><li>A Weston shell module that implements ivi-application.xml interfaces.<li>Loads ivi-layout.so.<li></ul> <p>+- ivi-layout.so:</p> <ul><li>Implements the IVI window management concepts: Screen, Layer,<li>Surface, groups of Layers, groups of Surfaces, see:<li>http://projects.genivi.org/ivi-layer-management/node/13<li>Offers a stable API for writing IVI-controller modules like<li>hmi-controller.so against the IVI concepts. In other words,<li>it offers an API to write IVI window manager modules.<li></ul> <p>+- hmi-controller.so:</p> <ul><li>A sample implementation of an IVI-controller module, usually<li>replaced by IVI system vendors.<li>Uses ivi-layout.so to perform essentially window manager tasks.<li>This implementation keeps all window management inside the module,<li>while IVI-systems may use another module that exposes all window<li>management via Wayland or other protocol for an external process<li>to control:<li>http://git.projects.genivi.org/?p=wayland-ivi-extension.git;a=summary<li></ul> <p>+- ivi-hmi-controller.xml:</p> <ul><li>Wayland protocol extension for IVI display control; the private<li>shell protocol for weston-ivi-shell-user-interface client<li>(the same concept as desktop-shell.xml).<li>Implemented by hmi-controller.so, and usually replaced by IVI<li>system vendors.<li></ul> <p>+- weston-ivi-shell-user-interface:</p> <ul><li>A sample implementation of an IVI shell helper client, usually<li>replaced by IVI system vendors.<li>A helper client for basic display content, similar to<li>weston-desktop-shell.<li><li></ul> <p>+How to compile: +same as weston. To disable, use option: --disable-ivi-shell for configure.</p> <ul><li></ul> <p>+How to configure weston.ini: +reference ini file will be generated in &LTbuild_dir>/ivi-shell.</p> <ul><li></ul> <p>+How to run: +same as weston. exec weston.</p> <ul><li></ul> <p>+How to use UI: +http://lists.freedesktop.org/archives/wayland-devel/attachments/20140625/abbfc064/attachment-0001.png</p> <p>--- weston-1.12.0.orig/notes.txt +++ weston-1.12.0/notes.txt @@ -0,0 +1,87 @@ +This file is a collection of informal notes, with references to where +they were originally written. Each note should have a source and date +mentioned. Let's keep these in date order, newest first.</p> <ul><li><li><li></ul> <p>+----------------------------------------------------------------------- +2015-04-14; Pekka Paalanen <a href=mailto:ppaalanen@gmail.com>ppaalanen@gmail.com</a> +http://lists.freedesktop.org/archives/wayland-devel/2015-April/021309.html</p> <ul><li></ul> <p>+Never destroy weston_views or weston_surfaces from animation hooks. +Never destroy weston_views from weston_view signals.</p> <ul><li></ul> <p>+Basically, never manipulate a list while transversing it.</p> <ul><li><li></ul> <p>+----------------------------------------------------------------------- +2012-10-23; Pekka Paalanen <a href=mailto:ppaalanen@gmail.com>ppaalanen@gmail.com</a> +http://lists.freedesktop.org/archives/wayland-devel/2012-October/005969.html</p> <ul><li></ul> <p>+For anyone wanting to port or write their own window manager to Wayland:</p> <ul><li></ul> <p>+Most likely you have a desktop window manager. A quick way to get +started, is to fork Weston's desktop-shell plugin and start hacking it. +Qt could be another good choice, but I am not familiar with it.</p> <ul><li></ul> <p>+You also need to understand some concepts. I'm repeating things I wrote +to the wayland-devel list earlier, a little rephrased.</p> <ul><li></ul> <p>+We need to distinguish three different things here (towards Wayland +clients):</p> <ul><li></ul> <p>+- compositors (servers)</p> <ul><li>All Wayland compositors are indistinguishable by definition,<li>since they are Wayland compositors. They only differ in the<li>global interfaces they advertise, and for general purpose<li>compositors, we should aim to support the same minimum set of<li>globals everywhere. For instance, all desktop compositors<li>should implement wl_shell. In X, this component corresponds to<li>the X server with a built-in compositing manager.<li></ul> <p>+- shells</p> <ul><li>This is a new concept compared to an X stack. A shell defines<li>how a user and applications interact. The most familiar is a<li>desktop (environment). If KDE, Gnome, and XFCE are desktop<li>environments, they all fall under the <em>same</em> shell: the desktop<li>shell. You can have applications in windows, several visible at<li>the same time, you have keyboards and mice, etc.<li><li>An example of something that is not a desktop shell<li>could be a TV user interface. TV is profoundly different:<li>usually no mouse, no keyboard, but you have a remote control<li>with some buttons. Freely floating windows probably do not make<li>sense. You may have picture-in-picture, but usually not several<li>applications showing at once. Most importantly, trying to run<li>desktop applications here does not work due to the<li>incompatible application and user interface paradigms.<li><li>On protocol level, a shell is the public shell interface(s),<li>currently for desktop it is the wl_shell.<li></ul> <p>+- "window managers"</p> <ul><li>The X Window Managers correspond to different wl_shell<li>implementations, not different shells, since they pratically<li>all deal with a desktop environment. You also want all desktop<li>applications to work with all window managers, so you need to<li>implement wl_shell anyway.<li></ul> <p>+I understand there could be special purpose X Window Managers, that +would better correspond to their own shells. These window managers +might not implement e.g. EWMH by the spec.</p> <ul><li></ul> <p>+When you implement your own window manager, you want to keep the public +desktop shell interface (wl_shell). You can offer new public +interfaces, too, but keep in mind, that someone needs to make +applications use them.</p> <ul><li></ul> <p>+In Weston, a shell implementation has two parts: a weston plugin, and a +special client. For desktop shell (wl_shell) these are src/shell.c and +clients/desktop-shell.c. The is also a private protocol extension that +these two can explicitly communicate with.</p> <ul><li></ul> <p>+The plugin does window management, and the client does most of user +interaction: draw backgrounds, panels, buttons, lock screen dialog, +basically everything that is on screen.</p> <ul><li></ul> <p>+----------------------------------------------------------------------- --- weston-1.12.0.orig/releasing.txt +++ weston-1.12.0/releasing.txt @@ -0,0 +1,113 @@ +To make a release of Weston and/or Wayland, follow these steps.</p> <ul><li><li><ol start=0><li>Verify the test suites and codebase checks pass. All of the</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> tests pass should either pass or skip.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ make check
</span></code></pre><li><li><ol><li>For Weston, verify that the wayland and wayland-protocols version</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> dependencies are correct, and that wayland-protocols has had a
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> release with any needed protocol updates.
</span></code></pre><li><li><ol start=2><li>Update the first stanza of configure.ac to the intended versions</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> for weston and libweston.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> For Weston's x.y.0 releases, if libweston_major_version is greater than
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> weston_major_version, bump the Weston version numbers (major, minor,
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> micro) to match the libweston version numbers (major, minor, patch).
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> Additionally for all Weston releases, if libweston version
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> major.minor.patch is less than Weston version major.minor.micro, bump
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> libweston version numbers to match the Weston version numbers.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> Weston releases are made with the Weston version number, not with the
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> libweston version number.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> Then commit your changes:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ export RELEASE_NUMBER="x.y.z"
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ export RELEASE_NAME="[alpha|beta|RC1|RC2|official|point]"
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ git status
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ git commit configure.ac -m "configure.ac: bump to version $RELEASE_NUMBER for the $RELEASE_NAME release"
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ git push
</span></code></pre><li><li><ol start=3><li>For Weston releases, install Xwayland, either from your distro or</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> manually (see http://wayland.freedesktop.org/building.html).  If
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> you install it to a location other than /usr/bin/Xwayland, specify
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> this in the following env var:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span>XWAYLAND=$(which Xwayland)  # Or specify your own path
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> export DISTCHECK_CONFIGURE_FLAGS="--with-xserver-path=$XWAYLAND"
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> If you're using a locally installed libinput or other dependency
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> libraries, you'll likely need to set a few other environment
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> variables:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> export WLD="&LTpath-to-your-local-installation>"
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> export LD_LIBRARY_PATH=$WLD/lib
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> export PKG_CONFIG_PATH=$WLD/lib/pkgconfig:$WLD/share/pkgconfig/
</span></code></pre><li><li><ol start=4><li>Run the release.sh script to generate the tarballs, sign and</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> upload them, and generate a release announcement template.
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> This script can be obtained from X.org's modular package:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span>   http://cgit.freedesktop.org/xorg/util/modular/tree/release.sh
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> The script supports a --dry-run option to test it without actually
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> doing a release.  If the script fails on the distcheck step due to
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> a testsuite error that can't be fixed for some reason, you can
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> skip testsuite by specifying the --dist argument.  Pass --help to
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> see other supported options.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ release.sh .
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> For wayland, also publish the publican documentation to
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> wayland.freedesktop.org:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ ./publish-doc
</span></code></pre><li><li><li><ol start=5><li>Compose the release announcements. The script will generate</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> *.x.y.z.announce files with a list of changes and tags, one for
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> wayland, one for weston.  Prepend these with a human-readable
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> listing of the most notable changes.  For x.y.0 releases, indicate
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> the schedule for the x.y+1.0 release.
</span></code></pre><li><li><ol start=6><li>pgp sign the the release announcements and send them to</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> wayland-devel@lists.freedesktop.org
</span></code></pre><li><li><ol start=7><li>Update releases.html in wayland-web with links to tarballs and</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> the release email URL.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> The wl_register_release script in wayland-web will generate an HTML
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> snippet that can be pasted into releases.html (or e.g. in emacs
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> insert it via "C-u M-! scripts/wl_register_release x.y.z") and
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> customized.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> Once satisfied:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ git commit ./releases.html -m "releases: Add ${RELEASE_NUMBER} release"
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ git push
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ ./deploy
</span></code></pre><li><li><ol start=8><li>Update topic in #wayland to point to the release announcement URL</ol><li></ul> <p>+For x.y.0 releases, also create the release series x.y branch. The x.y +branch is for bug fixes and conservative changes to the x.y.0 release, +and is where we create x.y.z releases from. Creating the x.y branch +opens up master for new development and lets new development move on. +We've done this both after the x.y.0 release (to focus development on +bug fixing for the x.y.1 release for a little longer) or before the +x.y.0 release (like we did with the 1.5.0 release, to unblock master +development early).</p> <ul><li><li>$ git branch x.y [sha]<li>$ git push origin x.y<li></ul> <p>+The master branch configure.ac version should always be (at least) +x.y.90, with x.y being the most recent stable branch. Stable branch +configure version is just whatever was most recently released from +that branch.</p> <ul><li></ul> <p>+For stable branches, we commit fixes to master first, then cherry-pick +them back to the stable branch. +++ weston-1.12.0/notes.txt @@ -0,0 +1,87 @@ +This file is a collection of informal notes, with references to where +they were originally written. Each note should have a source and date +mentioned. Let's keep these in date order, newest first.</p> <ul><li><li><li></ul> <p>+----------------------------------------------------------------------- +2015-04-14; Pekka Paalanen <a href=mailto:ppaalanen@gmail.com>ppaalanen@gmail.com</a> +http://lists.freedesktop.org/archives/wayland-devel/2015-April/021309.html</p> <ul><li></ul> <p>+Never destroy weston_views or weston_surfaces from animation hooks. +Never destroy weston_views from weston_view signals.</p> <ul><li></ul> <p>+Basically, never manipulate a list while transversing it.</p> <ul><li><li></ul> <p>+----------------------------------------------------------------------- +2012-10-23; Pekka Paalanen <a href=mailto:ppaalanen@gmail.com>ppaalanen@gmail.com</a> +http://lists.freedesktop.org/archives/wayland-devel/2012-October/005969.html</p> <ul><li></ul> <p>+For anyone wanting to port or write their own window manager to Wayland:</p> <ul><li></ul> <p>+Most likely you have a desktop window manager. A quick way to get +started, is to fork Weston's desktop-shell plugin and start hacking it. +Qt could be another good choice, but I am not familiar with it.</p> <ul><li></ul> <p>+You also need to understand some concepts. I'm repeating things I wrote +to the wayland-devel list earlier, a little rephrased.</p> <ul><li></ul> <p>+We need to distinguish three different things here (towards Wayland +clients):</p> <ul><li></ul> <p>+- compositors (servers)</p> <ul><li>All Wayland compositors are indistinguishable by definition,<li>since they are Wayland compositors. They only differ in the<li>global interfaces they advertise, and for general purpose<li>compositors, we should aim to support the same minimum set of<li>globals everywhere. For instance, all desktop compositors<li>should implement wl_shell. In X, this component corresponds to<li>the X server with a built-in compositing manager.<li></ul> <p>+- shells</p> <ul><li>This is a new concept compared to an X stack. A shell defines<li>how a user and applications interact. The most familiar is a<li>desktop (environment). If KDE, Gnome, and XFCE are desktop<li>environments, they all fall under the <em>same</em> shell: the desktop<li>shell. You can have applications in windows, several visible at<li>the same time, you have keyboards and mice, etc.<li><li>An example of something that is not a desktop shell<li>could be a TV user interface. TV is profoundly different:<li>usually no mouse, no keyboard, but you have a remote control<li>with some buttons. Freely floating windows probably do not make<li>sense. You may have picture-in-picture, but usually not several<li>applications showing at once. Most importantly, trying to run<li>desktop applications here does not work due to the<li>incompatible application and user interface paradigms.<li><li>On protocol level, a shell is the public shell interface(s),<li>currently for desktop it is the wl_shell.<li></ul> <p>+- "window managers"</p> <ul><li>The X Window Managers correspond to different wl_shell<li>implementations, not different shells, since they pratically<li>all deal with a desktop environment. You also want all desktop<li>applications to work with all window managers, so you need to<li>implement wl_shell anyway.<li></ul> <p>+I understand there could be special purpose X Window Managers, that +would better correspond to their own shells. These window managers +might not implement e.g. EWMH by the spec.</p> <ul><li></ul> <p>+When you implement your own window manager, you want to keep the public +desktop shell interface (wl_shell). You can offer new public +interfaces, too, but keep in mind, that someone needs to make +applications use them.</p> <ul><li></ul> <p>+In Weston, a shell implementation has two parts: a weston plugin, and a +special client. For desktop shell (wl_shell) these are src/shell.c and +clients/desktop-shell.c. The is also a private protocol extension that +these two can explicitly communicate with.</p> <ul><li></ul> <p>+The plugin does window management, and the client does most of user +interaction: draw backgrounds, panels, buttons, lock screen dialog, +basically everything that is on screen.</p> <ul><li></ul> <p>+----------------------------------------------------------------------- --- weston-1.12.0.orig/releasing.txt +++ weston-1.12.0/releasing.txt @@ -0,0 +1,113 @@ +To make a release of Weston and/or Wayland, follow these steps.</p> <ul><li><li><ol start=0><li>Verify the test suites and codebase checks pass. All of the</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> tests pass should either pass or skip.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ make check
</span></code></pre><li><li><ol><li>For Weston, verify that the wayland and wayland-protocols version</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> dependencies are correct, and that wayland-protocols has had a
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> release with any needed protocol updates.
</span></code></pre><li><li><ol start=2><li>Update the first stanza of configure.ac to the intended versions</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> for weston and libweston.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> For Weston's x.y.0 releases, if libweston_major_version is greater than
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> weston_major_version, bump the Weston version numbers (major, minor,
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> micro) to match the libweston version numbers (major, minor, patch).
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> Additionally for all Weston releases, if libweston version
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> major.minor.patch is less than Weston version major.minor.micro, bump
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> libweston version numbers to match the Weston version numbers.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> Weston releases are made with the Weston version number, not with the
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> libweston version number.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> Then commit your changes:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ export RELEASE_NUMBER="x.y.z"
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ export RELEASE_NAME="[alpha|beta|RC1|RC2|official|point]"
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ git status
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ git commit configure.ac -m "configure.ac: bump to version $RELEASE_NUMBER for the $RELEASE_NAME release"
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ git push
</span></code></pre><li><li><ol start=3><li>For Weston releases, install Xwayland, either from your distro or</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> manually (see http://wayland.freedesktop.org/building.html).  If
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> you install it to a location other than /usr/bin/Xwayland, specify
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> this in the following env var:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span>XWAYLAND=$(which Xwayland)  # Or specify your own path
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> export DISTCHECK_CONFIGURE_FLAGS="--with-xserver-path=$XWAYLAND"
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> If you're using a locally installed libinput or other dependency
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> libraries, you'll likely need to set a few other environment
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> variables:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> export WLD="&LTpath-to-your-local-installation>"
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> export LD_LIBRARY_PATH=$WLD/lib
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> export PKG_CONFIG_PATH=$WLD/lib/pkgconfig:$WLD/share/pkgconfig/
</span></code></pre><li><li><ol start=4><li>Run the release.sh script to generate the tarballs, sign and</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> upload them, and generate a release announcement template.
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> This script can be obtained from X.org's modular package:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span>   http://cgit.freedesktop.org/xorg/util/modular/tree/release.sh
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> The script supports a --dry-run option to test it without actually
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> doing a release.  If the script fails on the distcheck step due to
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> a testsuite error that can't be fixed for some reason, you can
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> skip testsuite by specifying the --dist argument.  Pass --help to
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> see other supported options.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ release.sh .
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> For wayland, also publish the publican documentation to
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> wayland.freedesktop.org:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ ./publish-doc
</span></code></pre><li><li><li><ol start=5><li>Compose the release announcements. The script will generate</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> *.x.y.z.announce files with a list of changes and tags, one for
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> wayland, one for weston.  Prepend these with a human-readable
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> listing of the most notable changes.  For x.y.0 releases, indicate
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> the schedule for the x.y+1.0 release.
</span></code></pre><li><li><ol start=6><li>pgp sign the the release announcements and send them to</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> wayland-devel@lists.freedesktop.org
</span></code></pre><li><li><ol start=7><li>Update releases.html in wayland-web with links to tarballs and</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> the release email URL.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> The wl_register_release script in wayland-web will generate an HTML
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> snippet that can be pasted into releases.html (or e.g. in emacs
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> insert it via "C-u M-! scripts/wl_register_release x.y.z") and
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> customized.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> Once satisfied:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ git commit ./releases.html -m "releases: Add ${RELEASE_NUMBER} release"
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ git push
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ ./deploy
</span></code></pre><li><li><ol start=8><li>Update topic in #wayland to point to the release announcement URL</ol><li></ul> <p>+For x.y.0 releases, also create the release series x.y branch. The x.y +branch is for bug fixes and conservative changes to the x.y.0 release, +and is where we create x.y.z releases from. Creating the x.y branch +opens up master for new development and lets new development move on. +We've done this both after the x.y.0 release (to focus development on +bug fixing for the x.y.1 release for a little longer) or before the +x.y.0 release (like we did with the 1.5.0 release, to unblock master +development early).</p> <ul><li><li>$ git branch x.y [sha]<li>$ git push origin x.y<li></ul> <p>+The master branch configure.ac version should always be (at least) +x.y.90, with x.y being the most recent stable branch. Stable branch +configure version is just whatever was most recently released from +that branch.</p> <ul><li></ul> <p>+For stable branches, we commit fixes to master first, then cherry-pick +them back to the stable branch. +++ weston-1.12.0/notes.txt @@ -0,0 +1,87 @@ +This file is a collection of informal notes, with references to where +they were originally written. Each note should have a source and date +mentioned. Let's keep these in date order, newest first.</p> <ul><li><li><li></ul> <p>+----------------------------------------------------------------------- +2015-04-14; Pekka Paalanen <a href=mailto:ppaalanen@gmail.com>ppaalanen@gmail.com</a> +http://lists.freedesktop.org/archives/wayland-devel/2015-April/021309.html</p> <ul><li></ul> <p>+Never destroy weston_views or weston_surfaces from animation hooks. +Never destroy weston_views from weston_view signals.</p> <ul><li></ul> <p>+Basically, never manipulate a list while transversing it.</p> <ul><li><li></ul> <p>+----------------------------------------------------------------------- +2012-10-23; Pekka Paalanen <a href=mailto:ppaalanen@gmail.com>ppaalanen@gmail.com</a> +http://lists.freedesktop.org/archives/wayland-devel/2012-October/005969.html</p> <ul><li></ul> <p>+For anyone wanting to port or write their own window manager to Wayland:</p> <ul><li></ul> <p>+Most likely you have a desktop window manager. A quick way to get +started, is to fork Weston's desktop-shell plugin and start hacking it. +Qt could be another good choice, but I am not familiar with it.</p> <ul><li></ul> <p>+You also need to understand some concepts. I'm repeating things I wrote +to the wayland-devel list earlier, a little rephrased.</p> <ul><li></ul> <p>+We need to distinguish three different things here (towards Wayland +clients):</p> <ul><li></ul> <p>+- compositors (servers)</p> <ul><li>All Wayland compositors are indistinguishable by definition,<li>since they are Wayland compositors. They only differ in the<li>global interfaces they advertise, and for general purpose<li>compositors, we should aim to support the same minimum set of<li>globals everywhere. For instance, all desktop compositors<li>should implement wl_shell. In X, this component corresponds to<li>the X server with a built-in compositing manager.<li></ul> <p>+- shells</p> <ul><li>This is a new concept compared to an X stack. A shell defines<li>how a user and applications interact. The most familiar is a<li>desktop (environment). If KDE, Gnome, and XFCE are desktop<li>environments, they all fall under the <em>same</em> shell: the desktop<li>shell. You can have applications in windows, several visible at<li>the same time, you have keyboards and mice, etc.<li><li>An example of something that is not a desktop shell<li>could be a TV user interface. TV is profoundly different:<li>usually no mouse, no keyboard, but you have a remote control<li>with some buttons. Freely floating windows probably do not make<li>sense. You may have picture-in-picture, but usually not several<li>applications showing at once. Most importantly, trying to run<li>desktop applications here does not work due to the<li>incompatible application and user interface paradigms.<li><li>On protocol level, a shell is the public shell interface(s),<li>currently for desktop it is the wl_shell.<li></ul> <p>+- "window managers"</p> <ul><li>The X Window Managers correspond to different wl_shell<li>implementations, not different shells, since they pratically<li>all deal with a desktop environment. You also want all desktop<li>applications to work with all window managers, so you need to<li>implement wl_shell anyway.<li></ul> <p>+I understand there could be special purpose X Window Managers, that +would better correspond to their own shells. These window managers +might not implement e.g. EWMH by the spec.</p> <ul><li></ul> <p>+When you implement your own window manager, you want to keep the public +desktop shell interface (wl_shell). You can offer new public +interfaces, too, but keep in mind, that someone needs to make +applications use them.</p> <ul><li></ul> <p>+In Weston, a shell implementation has two parts: a weston plugin, and a +special client. For desktop shell (wl_shell) these are src/shell.c and +clients/desktop-shell.c. The is also a private protocol extension that +these two can explicitly communicate with.</p> <ul><li></ul> <p>+The plugin does window management, and the client does most of user +interaction: draw backgrounds, panels, buttons, lock screen dialog, +basically everything that is on screen.</p> <ul><li></ul> <p>+----------------------------------------------------------------------- --- weston-1.12.0.orig/releasing.txt +++ weston-1.12.0/releasing.txt @@ -0,0 +1,113 @@ +To make a release of Weston and/or Wayland, follow these steps.</p> <ul><li><li><ol start=0><li>Verify the test suites and codebase checks pass. All of the</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> tests pass should either pass or skip.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ make check
</span></code></pre><li><li><ol><li>For Weston, verify that the wayland and wayland-protocols version</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> dependencies are correct, and that wayland-protocols has had a
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> release with any needed protocol updates.
</span></code></pre><li><li><ol start=2><li>Update the first stanza of configure.ac to the intended versions</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> for weston and libweston.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> For Weston's x.y.0 releases, if libweston_major_version is greater than
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> weston_major_version, bump the Weston version numbers (major, minor,
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> micro) to match the libweston version numbers (major, minor, patch).
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> Additionally for all Weston releases, if libweston version
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> major.minor.patch is less than Weston version major.minor.micro, bump
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> libweston version numbers to match the Weston version numbers.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> Weston releases are made with the Weston version number, not with the
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> libweston version number.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> Then commit your changes:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ export RELEASE_NUMBER="x.y.z"
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ export RELEASE_NAME="[alpha|beta|RC1|RC2|official|point]"
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ git status
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ git commit configure.ac -m "configure.ac: bump to version $RELEASE_NUMBER for the $RELEASE_NAME release"
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ git push
</span></code></pre><li><li><ol start=3><li>For Weston releases, install Xwayland, either from your distro or</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> manually (see http://wayland.freedesktop.org/building.html).  If
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> you install it to a location other than /usr/bin/Xwayland, specify
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> this in the following env var:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span>XWAYLAND=$(which Xwayland)  # Or specify your own path
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> export DISTCHECK_CONFIGURE_FLAGS="--with-xserver-path=$XWAYLAND"
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> If you're using a locally installed libinput or other dependency
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> libraries, you'll likely need to set a few other environment
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> variables:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> export WLD="&LTpath-to-your-local-installation>"
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> export LD_LIBRARY_PATH=$WLD/lib
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> export PKG_CONFIG_PATH=$WLD/lib/pkgconfig:$WLD/share/pkgconfig/
</span></code></pre><li><li><ol start=4><li>Run the release.sh script to generate the tarballs, sign and</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> upload them, and generate a release announcement template.
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> This script can be obtained from X.org's modular package:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span>   http://cgit.freedesktop.org/xorg/util/modular/tree/release.sh
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> The script supports a --dry-run option to test it without actually
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> doing a release.  If the script fails on the distcheck step due to
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> a testsuite error that can't be fixed for some reason, you can
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> skip testsuite by specifying the --dist argument.  Pass --help to
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> see other supported options.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ release.sh .
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> For wayland, also publish the publican documentation to
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> wayland.freedesktop.org:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ ./publish-doc
</span></code></pre><li><li><li><ol start=5><li>Compose the release announcements. The script will generate</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> *.x.y.z.announce files with a list of changes and tags, one for
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> wayland, one for weston.  Prepend these with a human-readable
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> listing of the most notable changes.  For x.y.0 releases, indicate
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> the schedule for the x.y+1.0 release.
</span></code></pre><li><li><ol start=6><li>pgp sign the the release announcements and send them to</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> wayland-devel@lists.freedesktop.org
</span></code></pre><li><li><ol start=7><li>Update releases.html in wayland-web with links to tarballs and</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> the release email URL.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> The wl_register_release script in wayland-web will generate an HTML
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> snippet that can be pasted into releases.html (or e.g. in emacs
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> insert it via "C-u M-! scripts/wl_register_release x.y.z") and
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> customized.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> Once satisfied:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ git commit ./releases.html -m "releases: Add ${RELEASE_NUMBER} release"
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ git push
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ ./deploy
</span></code></pre><li><li><ol start=8><li>Update topic in #wayland to point to the release announcement URL</ol><li></ul> <p>+For x.y.0 releases, also create the release series x.y branch. The x.y +branch is for bug fixes and conservative changes to the x.y.0 release, +and is where we create x.y.z releases from. Creating the x.y branch +opens up master for new development and lets new development move on. +We've done this both after the x.y.0 release (to focus development on +bug fixing for the x.y.1 release for a little longer) or before the +x.y.0 release (like we did with the 1.5.0 release, to unblock master +development early).</p> <ul><li><li>$ git branch x.y [sha]<li>$ git push origin x.y<li></ul> <p>+The master branch configure.ac version should always be (at least) +x.y.90, with x.y being the most recent stable branch. Stable branch +configure version is just whatever was most recently released from +that branch.</p> <ul><li></ul> <p>+For stable branches, we commit fixes to master first, then cherry-pick +them back to the stable branch. --- weston-1.12.0.orig/notes.txt +++ weston-1.12.0/notes.txt @@ -0,0 +1,87 @@ +This file is a collection of informal notes, with references to where +they were originally written. Each note should have a source and date +mentioned. Let's keep these in date order, newest first.</p> <ul><li><li><li></ul> <p>+----------------------------------------------------------------------- +2015-04-14; Pekka Paalanen <a href=mailto:ppaalanen@gmail.com>ppaalanen@gmail.com</a> +http://lists.freedesktop.org/archives/wayland-devel/2015-April/021309.html</p> <ul><li></ul> <p>+Never destroy weston_views or weston_surfaces from animation hooks. +Never destroy weston_views from weston_view signals.</p> <ul><li></ul> <p>+Basically, never manipulate a list while transversing it.</p> <ul><li><li></ul> <p>+----------------------------------------------------------------------- +2012-10-23; Pekka Paalanen <a href=mailto:ppaalanen@gmail.com>ppaalanen@gmail.com</a> +http://lists.freedesktop.org/archives/wayland-devel/2012-October/005969.html</p> <ul><li></ul> <p>+For anyone wanting to port or write their own window manager to Wayland:</p> <ul><li></ul> <p>+Most likely you have a desktop window manager. A quick way to get +started, is to fork Weston's desktop-shell plugin and start hacking it. +Qt could be another good choice, but I am not familiar with it.</p> <ul><li></ul> <p>+You also need to understand some concepts. I'm repeating things I wrote +to the wayland-devel list earlier, a little rephrased.</p> <ul><li></ul> <p>+We need to distinguish three different things here (towards Wayland +clients):</p> <ul><li></ul> <p>+- compositors (servers)</p> <ul><li>All Wayland compositors are indistinguishable by definition,<li>since they are Wayland compositors. They only differ in the<li>global interfaces they advertise, and for general purpose<li>compositors, we should aim to support the same minimum set of<li>globals everywhere. For instance, all desktop compositors<li>should implement wl_shell. In X, this component corresponds to<li>the X server with a built-in compositing manager.<li></ul> <p>+- shells</p> <ul><li>This is a new concept compared to an X stack. A shell defines<li>how a user and applications interact. The most familiar is a<li>desktop (environment). If KDE, Gnome, and XFCE are desktop<li>environments, they all fall under the <em>same</em> shell: the desktop<li>shell. You can have applications in windows, several visible at<li>the same time, you have keyboards and mice, etc.<li><li>An example of something that is not a desktop shell<li>could be a TV user interface. TV is profoundly different:<li>usually no mouse, no keyboard, but you have a remote control<li>with some buttons. Freely floating windows probably do not make<li>sense. You may have picture-in-picture, but usually not several<li>applications showing at once. Most importantly, trying to run<li>desktop applications here does not work due to the<li>incompatible application and user interface paradigms.<li><li>On protocol level, a shell is the public shell interface(s),<li>currently for desktop it is the wl_shell.<li></ul> <p>+- "window managers"</p> <ul><li>The X Window Managers correspond to different wl_shell<li>implementations, not different shells, since they pratically<li>all deal with a desktop environment. You also want all desktop<li>applications to work with all window managers, so you need to<li>implement wl_shell anyway.<li></ul> <p>+I understand there could be special purpose X Window Managers, that +would better correspond to their own shells. These window managers +might not implement e.g. EWMH by the spec.</p> <ul><li></ul> <p>+When you implement your own window manager, you want to keep the public +desktop shell interface (wl_shell). You can offer new public +interfaces, too, but keep in mind, that someone needs to make +applications use them.</p> <ul><li></ul> <p>+In Weston, a shell implementation has two parts: a weston plugin, and a +special client. For desktop shell (wl_shell) these are src/shell.c and +clients/desktop-shell.c. The is also a private protocol extension that +these two can explicitly communicate with.</p> <ul><li></ul> <p>+The plugin does window management, and the client does most of user +interaction: draw backgrounds, panels, buttons, lock screen dialog, +basically everything that is on screen.</p> <ul><li></ul> <p>+----------------------------------------------------------------------- --- weston-1.12.0.orig/releasing.txt +++ weston-1.12.0/releasing.txt @@ -0,0 +1,113 @@ +To make a release of Weston and/or Wayland, follow these steps.</p> <ul><li><li><ol start=0><li>Verify the test suites and codebase checks pass. All of the</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> tests pass should either pass or skip.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ make check
</span></code></pre><li><li><ol><li>For Weston, verify that the wayland and wayland-protocols version</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> dependencies are correct, and that wayland-protocols has had a
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> release with any needed protocol updates.
</span></code></pre><li><li><ol start=2><li>Update the first stanza of configure.ac to the intended versions</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> for weston and libweston.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> For Weston's x.y.0 releases, if libweston_major_version is greater than
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> weston_major_version, bump the Weston version numbers (major, minor,
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> micro) to match the libweston version numbers (major, minor, patch).
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> Additionally for all Weston releases, if libweston version
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> major.minor.patch is less than Weston version major.minor.micro, bump
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> libweston version numbers to match the Weston version numbers.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> Weston releases are made with the Weston version number, not with the
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> libweston version number.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> Then commit your changes:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ export RELEASE_NUMBER="x.y.z"
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ export RELEASE_NAME="[alpha|beta|RC1|RC2|official|point]"
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ git status
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ git commit configure.ac -m "configure.ac: bump to version $RELEASE_NUMBER for the $RELEASE_NAME release"
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ git push
</span></code></pre><li><li><ol start=3><li>For Weston releases, install Xwayland, either from your distro or</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> manually (see http://wayland.freedesktop.org/building.html).  If
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> you install it to a location other than /usr/bin/Xwayland, specify
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> this in the following env var:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span>XWAYLAND=$(which Xwayland)  # Or specify your own path
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> export DISTCHECK_CONFIGURE_FLAGS="--with-xserver-path=$XWAYLAND"
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> If you're using a locally installed libinput or other dependency
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> libraries, you'll likely need to set a few other environment
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> variables:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> export WLD="&LTpath-to-your-local-installation>"
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> export LD_LIBRARY_PATH=$WLD/lib
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> export PKG_CONFIG_PATH=$WLD/lib/pkgconfig:$WLD/share/pkgconfig/
</span></code></pre><li><li><ol start=4><li>Run the release.sh script to generate the tarballs, sign and</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> upload them, and generate a release announcement template.
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> This script can be obtained from X.org's modular package:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span>   http://cgit.freedesktop.org/xorg/util/modular/tree/release.sh
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> The script supports a --dry-run option to test it without actually
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> doing a release.  If the script fails on the distcheck step due to
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> a testsuite error that can't be fixed for some reason, you can
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> skip testsuite by specifying the --dist argument.  Pass --help to
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> see other supported options.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ release.sh .
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> For wayland, also publish the publican documentation to
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> wayland.freedesktop.org:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ ./publish-doc
</span></code></pre><li><li><li><ol start=5><li>Compose the release announcements. The script will generate</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> *.x.y.z.announce files with a list of changes and tags, one for
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> wayland, one for weston.  Prepend these with a human-readable
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> listing of the most notable changes.  For x.y.0 releases, indicate
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> the schedule for the x.y+1.0 release.
</span></code></pre><li><li><ol start=6><li>pgp sign the the release announcements and send them to</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> wayland-devel@lists.freedesktop.org
</span></code></pre><li><li><ol start=7><li>Update releases.html in wayland-web with links to tarballs and</ol><li><pre style=background:#0f1419;color:#bfbab0><code><span> the release email URL.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> The wl_register_release script in wayland-web will generate an HTML
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> snippet that can be pasted into releases.html (or e.g. in emacs
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> insert it via "C-u M-! scripts/wl_register_release x.y.z") and
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> customized.
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> Once satisfied:
</span></code></pre><li><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ git commit ./releases.html -m "releases: Add ${RELEASE_NUMBER} release"
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ git push
</span></code></pre><li><pre style=background:#0f1419;color:#bfbab0><code><span> $ ./deploy
</span></code></pre><li><li><ol start=8><li>Update topic in #wayland to point to the release announcement URL</ol><li></ul> <p>+For x.y.0 releases, also create the release series x.y branch. The x.y +branch is for bug fixes and conservative changes to the x.y.0 release, +and is where we create x.y.z releases from. Creating the x.y branch +opens up master for new development and lets new development move on. +We've done this both after the x.y.0 release (to focus development on +bug fixing for the x.y.1 release for a little longer) or before the +x.y.0 release (like we did with the 1.5.0 release, to unblock master +development early).</p> <ul><li><li>$ git branch x.y [sha]<li>$ git push origin x.y<li></ul> <p>+The master branch configure.ac version should always be (at least) +x.y.90, with x.y being the most recent stable branch. Stable branch +configure version is just whatever was most recently released from +that branch.</p> <ul><li></ul> <p>+For stable branches, we commit fixes to master first, then cherry-pick +them back to the stable branch.</p> <p>--- weston-1.12.0.orig/wcap/README +++ weston-1.12.0/wcap/README @@ -0,0 +1,99 @@ +WCAP Tools</p> <ul><li></ul> <p>+WCAP is the video capture format used by Weston (Weston CAPture). +It's a simple, lossless format, that encodes the difference between +frames as run-length encoded rectangles. It's a variable framerate +format, that only records new frames along with a timestamp when +something actually changes.</p> <ul><li></ul> <p>+Recording in Weston is started by pressing MOD+R and stopped by +pressing MOD+R again. Currently this leaves a capture.wcap file in +the cwd of the weston process. The file format is documented below +and Weston comes with the wcap-decode tool to convert the wcap file +into something more usable:</p> <ul><li><li><ul><li>Extract single or all frames as individual png files. This will</ul><li>produce a lossless screenshot, which is useful if you're trying to<li>screenshot a brief glitch or something like that that's hard to<li>capture with the screenshot tool.<li><li>wcap-decode takes a number of options and a wcap file as its<li>arguments. Without anything else, it will show the screen size and<li>number of frames in the file. Pass --frame=<frame> to extract a <li>single frame or pass --all to extract all frames as png files:</li> <li></li> <li>[krh@minato weston]$ wcap-snapshot capture.wcap</li> <li>wcap file: size 1024x640, 176 frames</li> <li>[krh@minato weston]$ wcap-snapshot capture.wcap 20</li> <li>wrote wcap-frame-20.png</li> <li>wcap file: size 1024x640, 176 frames</li> <li></li> <li><ul><li>Decode and the wcap file and dump it as a YUV4MPEG2 stream on</ul></li> <li>stdout. This format is compatible with most video encoders and can</li> <li>be piped directly into a command line encoder such as vpxenc (part</li> <li>of libvpx, encodes to a webm file) or theora_encode (part of</li> <li>libtheora, encodes to a ogg theora file).</li> <li></li> <li>Using vpxenc to encode a webm file would look something like this:</li> <li></li> <li>[krh@minato weston]$ wcap-decode --yuv4mpeg2 ../capture.wcap |</li> <li><pre style=background:#0f1419;color:#bfbab0><code><span>  vpxenc --target-bitrate=1024 --best -t 4 -o foo.webm  -
</span></code></pre></li> <li></li> <li>where we select target bitrate, pass -t 4 to let vpxenc use</li> <li>multiple threads. To encode to Ogg Theora a command line like this</li> <li>works:</li> <li></li> <li>[krh@minato weston]$ wcap-decode ../capture.wcap --yuv4mpeg2 |</li> <li><pre style=background:#0f1419;color:#bfbab0><code><span>  theora_encode - -o cap.ogv
</span></code></pre></li> <li></li> <li></li> <p>+WCAP File format</p> <ul><li></ul> <p>+The file format has a small header and then just consists of the +indivial frames. The header is</p> <ul><li><li>uint32_t magic<li>uint32_t format<li>uint32_t width<li>uint32_t height<li></ul> <p>+all CPU endian 32 bit words. The magic number is</p> <ul><li><li>#define WCAP_HEADER_MAGIC 0x57434150<li></ul> <p>+and makes it easy to recognize a wcap file and verify that it's the +right endian. There are four supported pixel formats:</p> <ul><li><li>#define WCAP_FORMAT_XRGB8888 0x34325258<li>#define WCAP_FORMAT_XBGR8888 0x34324258<li>#define WCAP_FORMAT_RGBX8888 0x34325852<li>#define WCAP_FORMAT_BGRX8888 0x34325842<li></ul> <p>+Each frame has a header:</p> <ul><li><li>uint32_t msecs<li>uint32_t nrects<li></ul> <p>+which specifies a timestamp in ms and the number of rectangles that +changed since previous frame. The timestamps are typically just a raw +system timestamp and the first frame doesn't start from 0ms.</p> <ul><li></ul> <p>+A frame consists of a list of rectangles, each of which represents the +component-wise difference between the previous frame and the current +using a run-length encoding. The initial frame is decoded against a +previous frame of all 0x00000000 pixels. Each rectangle starts out +with</p> <ul><li><li>int32_t x1<li>int32_t y1<li>int32_t x2<li>int32_t y2<li></ul> <p>+followed by (x2 - x1) * (y2 - y1) pixels, run-length encoded. The +run-length encoding uses the 'X' channel in the pixel format to encode +the length of the run. That is for WCAP_FORMAT_XRGB8888, for example, +the length of the run is in the upper 8 bits. For X values 0-0xdf, +the length is X + 1, for X above or equal to 0xe0, the run length is 1 +<< (X - 0xe0 + 7). That is, a pixel value of 0xe3000100, means that +the next 1024 pixels differ by RGB(0x00, 0x01, 0x00) from the previous +pixels.</p> <pre class=language-toml data-lang=toml style=background:#0f1419;color:#bfbab0><code class=language-toml data-lang=toml><span style=color:#59c2ff>XDG_SEAT</span><span>=</span><span style=color:#ff3333>seat0
</span><span style=color:#59c2ff>XDG_SESSION_TYPE</span><span>=</span><span style=color:#ff3333>wayland
</span><span style=color:#59c2ff>XDG_SESSION_CLASS</span><span>=</span><span style=color:#ff3333>user
</span><span style=color:#59c2ff>XDG_VTNR</span><span>=</span><span style=color:#f29718>2
</span><span style=color:#59c2ff>XDG_SESSION_ID</span><span>=</span><span style=color:#f29718>11
</span><span style=color:#59c2ff>XDG_RUNTIME_DIR</span><span>=</span><span style=color:#ff3333>/run/user/1000
</span><span style=color:#59c2ff>XDG_DATA_DIRS</span><span>=</span><span style=color:#ff3333>/aaron/.local/share/flatpak/exports/share:/var/lib/flatpak/exports/share:/usr/local/share/:/usr/share/
</span><span style=color:#59c2ff>I3SOCK</span><span>=</span><span style=color:#ff3333>/run/user/1000/sway-ipc.1000.6788.sock
</span><span style=color:#59c2ff>XDG_SESSION_TYPE</span><span>=</span><span style=color:#ff3333>wayland
</span><span style=color:#59c2ff>SWAYSOCK</span><span>=</span><span style=color:#ff3333>/run/user/1000/sway-ipc.1000.6788.sock
</span><span style=color:#59c2ff>WAYLAND_DISPLAY</span><span>=</span><span style=color:#ff3333>wayland-1
</span></code></pre> <pre style=background:#0f1419;color:#bfbab0><code><span>aaron       6788  1.7  0.5 1560856 91348 tty2    Ssl+ 21:23   0:18  \_ sway
</span><span>aaron      15488  0.1  0.0 715464  5736 pts/2    Sl+  21:39   0:00  |           \_ fzf --preview echo {} | grep -q '^list' && echo 'etc/ etc/sway/ etc/sway/config etc/sway/config.d/ etc/sway/config.d/50-systemd-user.conf usr/ usr/bin/ usr/bin/sway usr/bin/swaybar usr/bin/swaymsg usr/bin/swaynag usr/share/ usr/share/backgrounds/ usr/share/backgrounds/sway/ usr/share/backgrounds/sway/Sway_Wallpaper_Blue_1136x640.png usr/share/backgrounds/sway/Sway_Wallpaper_Blue_1136x640_Portrait.png usr/share/backgrounds/sway/Sway_Wallpaper_Blue_1366x768.png usr/share/backgrounds/sway/Sway_Wallpaper_Blue_1920x1080.png usr/share/backgrounds/sway/Sway_Wallpaper_Blue_2048x1536.png usr/share/backgrounds/sway/Sway_Wallpaper_Blue_2048x1536_Portrait.png usr/share/backgrounds/sway/Sway_Wallpaper_Blue_768x1024.png usr/share/backgrounds/sway/Sway_Wallpaper_Blue_768x1024_Portrait.png usr/share/bash-completion/ usr/share/bash-completion/completions/ usr/share/bash-completion/completions/sway usr/share/bash-completion/completions/swaybar usr/share/bash-completion/completions/swaymsg usr/share/fish/ usr/share/fish/vendor_completions.d/ usr/share/fish/vendor_completions.d/sway.fish usr/share/fish/vendor_completions.d/swaymsg.fish usr/share/fish/vendor_completions.d/swaynag.fish usr/share/licenses/ usr/share/licenses/sway/ usr/share/licenses/sway/LICENSE usr/share/man/ usr/share/man/man1/ usr/share/man/man1/sway.1.gz usr/share/man/man1/swaymsg.1.gz usr/share/man/man1/swaynag.1.gz usr/share/man/man5/ usr/share/man/man5/sway-bar.5.gz usr/share/man/man5/sway-input.5.gz usr/share/man/man5/sway-output.5.gz usr/share/man/man5/sway.5.gz usr/share/man/man5/swaynag.5.gz usr/share/man/man7/ usr/share/man/man7/sway-ipc.7.gz usr/share/man/man7/swaybar-protocol.7.gz usr/share/sway/ usr/share/sway/scripts/ usr/share/sway/scripts/autoname-workspaces.py usr/share/sway/scripts/grimshot usr/share/sway/scripts/inactive-windows-transparency.py usr/share/wayland-sessions/ usr/share/wayland-sessions/sway.desktop usr/share/zsh/ usr/share/zsh/site-functions/ usr/share/zsh/site-functions/_sway usr/share/zsh/site-functions/_swaymsg'                                     || echo 'Repository      : community Name            : sway Version         : 1:1.7-10 Description     : Tiling Wayland compositor and replacement for the i3 window manager Architecture    : x86_64 URL             : https://swaywm.org/ Licenses        : MIT Groups          : None Provides        : None Depends On      : cairo  gdk-pixbuf2  libevdev.so=2-64  libinput  libjson-c.so=5-64  libudev.so=1-64  libwayland-server.so=0-64  libwlroots.so=10-64  libxcb  libxkbcommon.so=0-64  pango  pcre  ttf-font Optional Deps   : bemenu: Wayland-native alternative to dmenu                   dmenu: Application launcher used in default config                   foot: Terminal emulator used in the default configuration                   i3status: Status line generation                   mako: Lightweight notification daemon                   polkit: System privilege control. Required if not using seatd service                   swaybg: Wallpaper tool for sway                   swayidle: Idle management daemon                   swaylock: Screen locker                   waybar: Highly customizable bar                   xorg-xwayland: X11 support Conflicts With  : None Replaces        : None Download Size   : 5.05 MiB Installed Size  : 5.59 MiB Packager        : Brett Cornwall &LTbrett@i--b.com> Build Date      : Mon 31 Oct 2022 08:35:40 AM CST Validated By    : MD5 Sum  SHA-256 Sum  Signature' --prompt Action ("esc" to abort): --header "sway" may be found in package "community/sway" Shift up or down to scroll the preview
</span><span>aaron      16369  0.0  0.0   9668  2520 pts/5    S+   21:40   0:00      \_ grep -E --color=auto --exclude-dir=_site --exclude-dir=.git -s -I sway
</span><span>gdm         5777  0.0  0.0 155196  7368 tty1     Ssl+ 21:23   0:00      \_ /usr/lib/gdm-wayland-session dbus-run-session -- gnome-session --autostart /usr/share/gdm/greeter/autostart
</span><span>gdm         6239  0.0  0.4 863852 72776 tty1     Sl+  21:23   0:00                  |   \_ /usr/bin/Xwayland :1024 -rootless -noreset -accessx -core -auth /run/user/120/.mutter-Xwaylandauth.EY8WV1 -listenfd 4 -listenfd 5 -displayfd 6 -initfd 7
</span><span>aaron       7194  0.9  0.5 877676 83616 tty2     Sl+  21:23   0:10 Xwayland :0 -rootless -terminate -core -listenfd 29 -listenfd 30 -wm 66
</span><span>aaron      15488  0.1  0.0 715464  5736 pts/2    Sl+  21:39   0:00  |           \_ fzf --preview echo {} | grep -q '^list' && echo 'etc/ etc/sway/ etc/sway/config etc/sway/config.d/ etc/sway/config.d/50-systemd-user.conf usr/ usr/bin/ usr/bin/sway usr/bin/swaybar usr/bin/swaymsg usr/bin/swaynag usr/share/ usr/share/backgrounds/ usr/share/backgrounds/sway/ usr/share/backgrounds/sway/Sway_Wallpaper_Blue_1136x640.png usr/share/backgrounds/sway/Sway_Wallpaper_Blue_1136x640_Portrait.png usr/share/backgrounds/sway/Sway_Wallpaper_Blue_1366x768.png usr/share/backgrounds/sway/Sway_Wallpaper_Blue_1920x1080.png usr/share/backgrounds/sway/Sway_Wallpaper_Blue_2048x1536.png usr/share/backgrounds/sway/Sway_Wallpaper_Blue_2048x1536_Portrait.png usr/share/backgrounds/sway/Sway_Wallpaper_Blue_768x1024.png usr/share/backgrounds/sway/Sway_Wallpaper_Blue_768x1024_Portrait.png usr/share/bash-completion/ usr/share/bash-completion/completions/ usr/share/bash-completion/completions/sway usr/share/bash-completion/completions/swaybar usr/share/bash-completion/completions/swaymsg usr/share/fish/ usr/share/fish/vendor_completions.d/ usr/share/fish/vendor_completions.d/sway.fish usr/share/fish/vendor_completions.d/swaymsg.fish usr/share/fish/vendor_completions.d/swaynag.fish usr/share/licenses/ usr/share/licenses/sway/ usr/share/licenses/sway/LICENSE usr/share/man/ usr/share/man/man1/ usr/share/man/man1/sway.1.gz usr/share/man/man1/swaymsg.1.gz usr/share/man/man1/swaynag.1.gz usr/share/man/man5/ usr/share/man/man5/sway-bar.5.gz usr/share/man/man5/sway-input.5.gz usr/share/man/man5/sway-output.5.gz usr/share/man/man5/sway.5.gz usr/share/man/man5/swaynag.5.gz usr/share/man/man7/ usr/share/man/man7/sway-ipc.7.gz usr/share/man/man7/swaybar-protocol.7.gz usr/share/sway/ usr/share/sway/scripts/ usr/share/sway/scripts/autoname-workspaces.py usr/share/sway/scripts/grimshot usr/share/sway/scripts/inactive-windows-transparency.py usr/share/wayland-sessions/ usr/share/wayland-sessions/sway.desktop usr/share/zsh/ usr/share/zsh/site-functions/ usr/share/zsh/site-functions/_sway usr/share/zsh/site-functions/_swaymsg'                                     || echo 'Repository      : community Name            : sway Version         : 1:1.7-10 Description     : Tiling Wayland compositor and replacement for the i3 window manager Architecture    : x86_64 URL             : https://swaywm.org/ Licenses        : MIT Groups          : None Provides        : None Depends On      : cairo  gdk-pixbuf2  libevdev.so=2-64  libinput  libjson-c.so=5-64  libudev.so=1-64  libwayland-server.so=0-64  libwlroots.so=10-64  libxcb  libxkbcommon.so=0-64  pango  pcre  ttf-font Optional Deps   : bemenu: Wayland-native alternative to dmenu                   dmenu: Application launcher used in default config                   foot: Terminal emulator used in the default configuration                   i3status: Status line generation                   mako: Lightweight notification daemon                   polkit: System privilege control. Required if not using seatd service                   swaybg: Wallpaper tool for sway                   swayidle: Idle management daemon                   swaylock: Screen locker                   waybar: Highly customizable bar                   xorg-xwayland: X11 support Conflicts With  : None Replaces        : None Download Size   : 5.05 MiB Installed Size  : 5.59 MiB Packager        : Brett Cornwall &LTbrett@i--b.com> Build Date      : Mon 31 Oct 2022 08:35:40 AM CST Validated By    : MD5 Sum  SHA-256 Sum  Signature' --prompt Action ("esc" to abort): --header "sway" may be found in package "community/sway" Shift up or down to scroll the preview
</span><span>aaron      16624  0.0  0.0   9668  2540 pts/5    S+   21:41   0:00      \_ grep -E --color=auto --exclude-dir=_site --exclude-dir=.git -s -I wayl
</span></code></pre> <pre class=language-c data-lang=c style=background:#0f1419;color:#bfbab0><code class=language-c data-lang=c><span>info</span><span style=color:#f29668>:</span><span> main</span><span style=color:#f29668>.</span><span>c</span><span style=color:#f29668>:</span><span style=color:#f29718>421</span><span style=color:#f29668>:</span><span> version</span><span style=color:#f29668>: </span><span style=color:#f29718>1</span><span style=color:#bfbab0cc>.</span><span style=color:#f29718>13</span><span style=color:#bfbab0cc>.</span><span style=color:#f29718>1 </span><span style=color:#f29668>+</span><span>pgo </span><span style=color:#f29668>+</span><span>ime </span><span style=color:#f29668>+</span><span>graphemes </span><span style=color:#f29668>-</span><span>assertions
</span><span>info</span><span style=color:#f29668>:</span><span> main</span><span style=color:#f29668>.</span><span>c</span><span style=color:#f29668>:</span><span style=color:#f29718>428</span><span style=color:#f29668>:</span><span> arch</span><span style=color:#f29668>:</span><span> Linux x86_64</span><span style=color:#f29668>/</span><span style=color:#f29718>64</span><span style=color:#f29668>-</span><span>bit
</span><span>info</span><span style=color:#f29668>:</span><span> main</span><span style=color:#f29668>.</span><span>c</span><span style=color:#f29668>:</span><span style=color:#f29718>440</span><span style=color:#f29668>:</span><span> locale</span><span style=color:#f29668>:</span><span> C
</span><span>warn</span><span style=color:#f29668>:</span><span> main</span><span style=color:#f29668>.</span><span>c</span><span style=color:#f29668>:</span><span style=color:#f29718>458</span><span style=color:#f29668>: </span><span style=color:#c2d94c>'C'</span><span> is not a UTF</span><span style=color:#f29668>-</span><span style=color:#f29718>8</span><span> locale</span><span style=color:#bfbab0cc>,</span><span> using </span><span style=color:#c2d94c>'C.UTF-8'</span><span> instead
</span><span>info</span><span style=color:#f29668>:</span><span> config</span><span style=color:#f29668>.</span><span>c</span><span style=color:#f29668>:</span><span style=color:#f29718>3003</span><span style=color:#f29668>:</span><span> loading configuration from </span><span style=color:#f29668>/</span><span>aaron</span><span style=color:#f29668>/.</span><span>config</span><span style=color:#f29668>/</span><span>foot</span><span style=color:#f29668>/</span><span>foot</span><span style=color:#f29668>.</span><span>ini
</span><span>info</span><span style=color:#f29668>:</span><span> fcft</span><span style=color:#f29668>.</span><span>c</span><span style=color:#f29668>:</span><span style=color:#f29718>338</span><span style=color:#f29668>:</span><span> fcft</span><span style=color:#f29668>: </span><span style=color:#f29718>3</span><span style=color:#bfbab0cc>.</span><span style=color:#f29718>1</span><span style=color:#bfbab0cc>.</span><span style=color:#f29718>5 </span><span style=color:#f29668>+</span><span>graphemes </span><span style=color:#f29668>+</span><span>runs </span><span style=color:#f29668>+</span><span style=color:#ffb454>svg</span><span>(nanosvg) </span><span style=color:#f29668>-</span><span>assertions
</span><span>info</span><span style=color:#f29668>:</span><span> fcft</span><span style=color:#f29668>.</span><span>c</span><span style=color:#f29668>:</span><span style=color:#f29718>377</span><span style=color:#f29668>:</span><span> fontconfig</span><span style=color:#f29668>: </span><span style=color:#f29718>2</span><span style=color:#bfbab0cc>.</span><span style=color:#f29718>14</span><span style=color:#bfbab0cc>.</span><span style=color:#f29718>1</span><span style=color:#bfbab0cc>,</span><span> freetype</span><span style=color:#f29668>: </span><span style=color:#f29718>2</span><span style=color:#bfbab0cc>.</span><span style=color:#f29718>12</span><span style=color:#bfbab0cc>.</span><span style=color:#f29718>1</span><span style=color:#bfbab0cc>,</span><span> harfbuzz</span><span style=color:#f29668>: </span><span style=color:#f29718>5</span><span style=color:#bfbab0cc>.</span><span style=color:#f29718>3</span><span style=color:#bfbab0cc>.</span><span style=color:#f29718>1</span><span style=color:#bfbab0cc>,</span><span> utf8proc</span><span style=color:#f29668>: </span><span style=color:#f29718>2</span><span style=color:#bfbab0cc>.</span><span style=color:#f29718>8</span><span style=color:#bfbab0cc>.</span><span style=color:#f29718>0 </span><span>(Unicode </span><span style=color:#f29718>15</span><span style=color:#bfbab0cc>.</span><span style=color:#f29718>0</span><span style=color:#bfbab0cc>.</span><span style=color:#f29718>0</span><span>)
</span><span>info</span><span style=color:#f29668>:</span><span> fcft</span><span style=color:#f29668>.</span><span>c</span><span style=color:#f29668>:</span><span style=color:#f29718>838</span><span style=color:#f29668>: /</span><span>usr</span><span style=color:#f29668>/</span><span>share</span><span style=color:#f29668>/</span><span>fonts</span><span style=color:#f29668>/</span><span>WOFF2</span><span style=color:#f29668>/</span><span>CascadiaCode</span><span style=color:#f29668>.</span><span>woff2</span><span style=color:#f29668>:</span><span> size</span><span style=color:#f29668>=</span><span style=color:#f29718>8</span><span style=color:#bfbab0cc>.</span><span style=color:#f29718>00</span><span style=color:#ff3333>pt</span><span style=color:#f29668>/</span><span style=color:#f29718>8</span><span style=color:#ff3333>px</span><span style=color:#bfbab0cc>,</span><span> dpi</span><span style=color:#f29668>=</span><span style=color:#f29718>75</span><span style=color:#bfbab0cc>.</span><span style=color:#f29718>00
</span><span> err</span><span style=color:#f29668>:</span><span> wayland</span><span style=color:#f29668>.</span><span>c</span><span style=color:#f29668>:</span><span style=color:#f29718>1281</span><span style=color:#f29668>:</span><span> failed to connect to wayland</span><span style=color:#bfbab0cc>;</span><span> no compositor running</span><span style=color:#f29668>?
</span><span>info</span><span style=color:#f29668>:</span><span> main</span><span style=color:#f29668>.</span><span>c</span><span style=color:#f29668>:</span><span style=color:#f29718>680</span><span style=color:#f29668>:</span><span> goodbye
</span></code></pre> <p>This is a good one.</p> <pre class=language-toml data-lang=toml style=background:#0f1419;color:#bfbab0><code class=language-toml data-lang=toml><span style=color:#59c2ff>XDG_MENU_PREFIX</span><span>=</span><span style=color:#ff3333>gnome-
</span><span style=color:#59c2ff>XDG_SESSION_DESKTOP</span><span>=</span><span style=color:#ff3333>sway
</span><span style=color:#59c2ff>XDG_SESSION_TYPE</span><span>=</span><span style=color:#ff3333>wayland
</span><span style=color:#59c2ff>XDG_CURRENT_DESKTOP</span><span>=</span><span style=color:#ff3333>sway
</span><span style=color:#59c2ff>XDG_SESSION_CLASS</span><span>=</span><span style=color:#ff3333>user
</span><span style=color:#59c2ff>XDG_RUNTIME_DIR</span><span>=</span><span style=color:#ff3333>/run/user/1000
</span><span style=color:#59c2ff>XDG_DATA_DIRS</span><span>=</span><span style=color:#ff3333>/aaron/.local/share/flatpak/exports/share:/var/lib/flatpak/exports/share:/usr/local/share/:/usr/share/
</span></code></pre> <p>[325 21:48:28.194565] [glfw error 65544]: Wayland: Failed to connect to display GLFW initialization failed</p> <p>Failed to create wl_display (No such file or directory) qt.qpa.plugin: Could not load the Qt platform plugin "wayland" in "" even though it was found. This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.</p> <p>Available platform plugins are: eglfs, linuxfb, minimal, minimalegl, offscreen, vnc, wayland-egl, wayland, wayland-xcomposite-egl, wayland-xcomposite-glx, xcb.</p> <pre class=language-sh data-lang=sh style=background:#0f1419;color:#bfbab0><code class=language-sh data-lang=sh><span style=color:#ffb454>info:</span><span> main.c:421: version: 1.13.1 +pgo +ime +graphemes</span><span style=color:#f29718> -assertions
</span><span style=color:#ffb454>info:</span><span> main.c:428: arch: Linux x86_64/64-bit
</span><span style=color:#ffb454>info:</span><span> main.c:440: locale: C.UTF-8
</span><span style=color:#ffb454>info:</span><span> config.c:3003: loading configuration from /aaron/.config/foot/foot.ini
</span><span style=color:#ffb454>info:</span><span> fcft.c:338: fcft: 3.1.5 +graphemes +runs +svg(nanosvg) </span><span style=color:#ffb454>-assertions
</span><span style=color:#ffb454>info:</span><span> fcft.c:377: fontconfig: 2.14.1, freetype: 2.12.1, harfbuzz: 5.3.1, utf8proc: 2.8.0 (Unicode 15.0.0)
</span><span style=color:#ffb454>info:</span><span> fcft.c:838: /usr/share/fonts/WOFF2/FiraCode-Regular.woff2: size=8.00pt/8px, dpi=75.00
</span><span style=color:#ffb454>info:</span><span> wayland.c:1353: X11-1: 1920x1000+0x0@0Hz 11.0 0.00</span><span style=color:#c2d94c>" scale=1 PPI=0x0 (physical) PPI=0x0 (logical), DPI=0.00
</span><span style=color:#c2d94c>info: wayland.c:1509: requesting SSD decorations
</span><span style=color:#c2d94c>info: fcft.c:838: /usr/share/fonts/liberation/LiberationMono-BoldItalic.ttf: size=12.00pt/16px, dpi=96.00
</span><span style=color:#c2d94c>info: fcft.c:838: /usr/share/fonts/WOFF2/FiraCode-Regular.woff2: size=12.00pt/16px, dpi=96.00
</span><span style=color:#c2d94c>info: fcft.c:838: /usr/share/fonts/liberation/LiberationMono-Italic.ttf: size=12.00pt/16px, dpi=96.00
</span><span style=color:#c2d94c>info: fcft.c:838: /usr/share/fonts/WOFF2/FiraCode-Bold.woff2: size=12.00pt/16px, dpi=96.00
</span><span style=color:#c2d94c>info: terminal.c:700: cell width=10, height=20
</span><span style=color:#c2d94c>info: terminal.c:588: using 8 rendering threads
</span><span style=color:#c2d94c>info: wayland.c:859: using SSD decorations
</span><span style=color:#c2d94c>info: main.c:680: goodbye
</span></code></pre> 